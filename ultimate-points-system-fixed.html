<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÁßØÂàÜÁ≥ªÁªü</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* ÈªòËÆ§‰∏ªÈ¢òÂèòÈáè - ‰ºòÈõÖÁ¥´ÁΩóÂÖ∞Ê∏êÂèò */
            --primary-gradient: linear-gradient(135deg, #8b5cf6 0%, #3b82f6 50%, #06b6d4 100%);
            --success-gradient: linear-gradient(135deg, #10b981 0%, #34d399 100%);
            --danger-gradient: linear-gradient(135deg, #ef4444 0%, #f87171 100%);
            --warning-gradient: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%);
            --info-gradient: linear-gradient(135deg, #3b82f6 0%, #60a5fa 100%);
            --theme-accent: #8b5cf6;
            --theme-text: #1f2937;
            --theme-bg: rgba(255, 255, 255, 0.96);
            --card-shadow: 0 8px 25px rgba(139, 92, 246, 0.15);
            --card-shadow-hover: 0 15px 35px rgba(139, 92, 246, 0.25);
            --border-radius: 18px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            
            /* üÜï ËßÜËßâÂ±ÇÊ¨°‰ºòÂåñÂèòÈáè */
            --h1-font-size: 2.5rem;
            --h2-font-size: 2rem;
            --h3-font-size: 1.5rem;
            --h4-font-size: 1.25rem;
            --h5-font-size: 1.125rem;
            --h6-font-size: 1rem;
            --large-text: 1.125rem;
            --normal-text: 1rem;
            --small-text: 0.875rem;
            --tiny-text: 0.75rem;
            
            /* È¢úËâ≤Â±ÇÊ¨°ÂèòÈáè */
            --color-primary: #1f2937;
            --color-secondary: #6b7280;
            --color-tertiary: #9ca3af;
            --color-quaternary: #d1d5db;
            --color-muted: #f3f4f6;
            
            /* ËßÜËßâÊùÉÈáçÂ±ÇÁ∫ß */
            --weight-bold: 700;
            --weight-semibold: 600;
            --weight-medium: 500;
            --weight-normal: 400;
            --weight-light: 300;
            
            /* Èó¥Ë∑ùÂ±ÇÁ∫ß */
            --spacing-xs: 0.25rem;
            --spacing-sm: 0.5rem;
            --spacing-md: 1rem;
            --spacing-lg: 1.5rem;
            --spacing-xl: 2rem;
            --spacing-2xl: 3rem;
            --spacing-3xl: 4rem;
        }

        /* ÂΩ©Ëôπ‰∏ªÈ¢ò - Ê¢¶ÂπªÂΩ©ËôπÊ∏êÂèò */
        [data-theme="rainbow"] {
            --primary-gradient: linear-gradient(135deg, #ff006e 0%, #ffbe0b 25%, #8338ec 50%, #3a86ff 75%, #06ffa5 100%);
            --success-gradient: linear-gradient(135deg, #06ffa5 0%, #00d4aa 100%);
            --danger-gradient: linear-gradient(135deg, #ff006e 0%, #ff595e 100%);
            --warning-gradient: linear-gradient(135deg, #ffbe0b 0%, #ffca3a 100%);
            --info-gradient: linear-gradient(135deg, #8338ec 0%, #a855f7 100%);
            --theme-accent: #ff006e;
            --theme-text: #374151;
            --theme-bg: rgba(255, 255, 255, 0.97);
            --card-shadow: 0 8px 25px rgba(255, 0, 110, 0.15);
            --card-shadow-hover: 0 15px 35px rgba(255, 0, 110, 0.25);
        }

        /* Ê£ÆÊûó‰∏ªÈ¢ò - Ê∑±Â∫¶Ê£ÆÊûóÁªø */
        [data-theme="forest"] {
            --primary-gradient: linear-gradient(135deg, #0d5016 0%, #22c55e 50%, #84cc16 100%);
            --success-gradient: linear-gradient(135deg, #16a34a 0%, #22c55e 100%);
            --danger-gradient: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
            --warning-gradient: linear-gradient(135deg, #ca8a04 0%, #eab308 100%);
            --info-gradient: linear-gradient(135deg, #0ea5e9 0%, #38bdf8 100%);
            --theme-accent: #22c55e;
            --theme-text: #1a2e1a;
            --theme-bg: rgba(255, 255, 255, 0.98);
            --card-shadow: 0 8px 25px rgba(34, 197, 94, 0.15);
            --card-shadow-hover: 0 15px 35px rgba(34, 197, 94, 0.25);
        }

        /* Êó•ËêΩ‰∏ªÈ¢ò - Ê∏©ÊöñÂ§ïÈò≥Ê∏êÂèò */
        [data-theme="sunset"] {
            --primary-gradient: linear-gradient(135deg, #ff6b35 0%, #f7931e 50%, #ffcd3c 100%);
            --success-gradient: linear-gradient(135deg, #22c55e 0%, #4ade80 100%);
            --danger-gradient: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
            --warning-gradient: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%);
            --info-gradient: linear-gradient(135deg, #0ea5e9 0%, #38bdf8 100%);
            --theme-accent: #ff6b35;
            --theme-text: #451a03;
            --theme-bg: rgba(255, 251, 235, 0.96);
            --card-shadow: 0 8px 25px rgba(255, 107, 53, 0.15);
            --card-shadow-hover: 0 15px 35px rgba(255, 107, 53, 0.25);
        }

        /* Êµ∑Ê¥ã‰∏ªÈ¢ò - Ê∑±ËìùÊµ∑Ê¥ãÊ∏êÂèò */
        [data-theme="ocean"] {
            --primary-gradient: linear-gradient(135deg, #0ea5e9 0%, #0284c7 50%, #0369a1 100%);
            --success-gradient: linear-gradient(135deg, #10b981 0%, #34d399 100%);
            --danger-gradient: linear-gradient(135deg, #ef4444 0%, #f87171 100%);
            --warning-gradient: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%);
            --info-gradient: linear-gradient(135deg, #06b6d4 0%, #22d3ee 100%);
            --theme-accent: #0ea5e9;
            --theme-text: #0c4a6e;
            --theme-bg: rgba(240, 249, 255, 0.97);
            --card-shadow: 0 8px 25px rgba(14, 165, 233, 0.15);
            --card-shadow-hover: 0 15px 35px rgba(14, 165, 233, 0.25);
        }

        /* Âú£ËØû‰∏ªÈ¢ò - ÁªèÂÖ∏Âú£ËØûÁ∫¢Áªø */
        [data-theme="christmas"] {
            --primary-gradient: linear-gradient(135deg, #dc2626 0%, #16a34a 50%, #dc2626 100%);
            --success-gradient: linear-gradient(135deg, #16a34a 0%, #22c55e 100%);
            --danger-gradient: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
            --warning-gradient: linear-gradient(135deg, #ca8a04 0%, #eab308 100%);
            --info-gradient: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
            --theme-accent: #dc2626;
            --theme-text: #1f2937;
            --theme-bg: rgba(255, 251, 251, 0.98);
            --card-shadow: 0 8px 25px rgba(220, 38, 38, 0.15);
            --card-shadow-hover: 0 15px 35px rgba(220, 38, 38, 0.25);
        }

        /* Êñ∞Âπ¥‰∏ªÈ¢ò - ÂñúÂ∫ÜÈáëËâ≤Â∫ÜÁ•ù */
        [data-theme="newyear"] {
            --primary-gradient: linear-gradient(135deg, #ca8a04 0%, #fbbf24 25%, #f59e0b 50%, #ef4444 75%, #dc2626 100%);
            --success-gradient: linear-gradient(135deg, #10b981 0%, #34d399 100%);
            --danger-gradient: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
            --warning-gradient: linear-gradient(135deg, #ca8a04 0%, #eab308 100%);
            --info-gradient: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
            --theme-accent: #ca8a04;
            --theme-text: #451a03;
            --theme-bg: rgba(255, 251, 235, 0.96);
            --card-shadow: 0 8px 25px rgba(202, 138, 4, 0.15);
            --card-shadow-hover: 0 15px 35px rgba(202, 138, 4, 0.25);
        }

        body {
            font-family: 'Microsoft YaHei', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--primary-gradient);
            min-height: 100vh;
            padding: 20px;
            color: var(--theme-text);
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: var(--theme-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
            backdrop-filter: blur(10px);
            overflow: hidden;
            position: relative;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Â§¥ÈÉ®ÂíåÁßØÂàÜÊòæÁ§∫Âå∫ÂüüÂÆπÂô® */
        .header-dashboard-container {
            display: flex;
            gap: 0;
            background: var(--primary-gradient);
            position: relative;
            overflow: hidden;
        }

        /* Â∑¶‰æßÁßØÂàÜÊòæÁ§∫Ê®°Âùó */
        .left-points-section {
            flex: 0 0 40%;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 30px 20px;
            position: relative;
        }

        /* Âè≥‰æßÂ§¥ÈÉ®Âå∫ÂüüÊ®°Âùó */
        .right-header-section {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 30px;
            position: relative;
        }

        /* Áªü‰∏ÄÁöÑÂ§¥ÈÉ®Ê†∑Âºè */
        .header {
            color: white;
            text-align: center;
            position: relative;
            z-index: 1;
            max-width: 100%;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
            z-index: 0;
        }

        .header h1 {
            font-size: var(--h1-font-size);
            font-weight: var(--weight-bold);
            margin-bottom: var(--spacing-lg);
            text-shadow: 3px 3px 12px rgba(0,0,0,0.4);
            position: relative;
            z-index: 1;
            animation: glow 2s ease-in-out infinite alternate;
            color: #ffffff;
            letter-spacing: -0.02em;
            line-height: 1.1;
        }

        .child-name {
            font-size: 1em;
            opacity: 0.95;
            position: relative;
            z-index: 1;
            margin-bottom: 15px;
        }

        /* ÊØèÊó•‰∏ÄË®ÄÊ†∑Âºè */
        .daily-quote {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            position: relative;
            z-index: 1;
            transition: var(--transition);
            max-width: 500px;
            margin: 0 auto;
        }

        .daily-quote:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 12px 35px rgba(0, 0, 0, 0.15);
        }

        .quote-loading {
            color: rgba(255, 255, 255, 0.9);
            font-style: italic;
            text-align: center;
            font-size: 1em;
            animation: pulse 1.5s ease-in-out infinite;
        }

        .quote-content {
            text-align: center;
            animation: fadeInUp 0.8s ease-out;
        }

        .quote-error {
            color: rgba(255, 255, 255, 0.8);
            text-align: center;
            font-style: italic;
            font-size: 0.95em;
        }

        .quote-text {
            font-size: 1em;
            font-style: italic;
            color: rgba(255, 255, 255, 0.95);
            margin-bottom: 8px;
            line-height: 1.4;
            position: relative;
            word-wrap: break-word;
            overflow-wrap: break-word;
            hyphens: auto;
        }

        .quote-text::before {
            content: '"';
            font-size: 2em;
            position: absolute;
            left: -15px;
            top: -5px;
            color: rgba(255, 255, 255, 0.6);
        }

        .quote-text::after {
            content: '"';
            font-size: 2em;
            position: absolute;
            right: -15px;
            bottom: -15px;
            color: rgba(255, 255, 255, 0.6);
        }

        .quote-author {
            font-size: 0.85em;
            color: rgba(255, 255, 255, 0.8);
            font-weight: 500;
        }

        .quote-author::before {
            content: '‚Äî ';
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 0.7;
            }
            50% {
                opacity: 1;
            }
        }

        /* ÁßØÂàÜÊòæÁ§∫Âå∫Âüü‰ºòÂåñ */
        .points-display {
            text-align: center;
            padding: 25px;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(15px);
            border-radius: var(--border-radius);
            color: white;
            position: relative;
            overflow: hidden;
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: var(--transition);
            width: 100%;
            max-width: 300px;
        }

        .points-display:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.2);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .points-display::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, transparent 70%);
            animation: float 6s ease-in-out infinite;
            z-index: 0;
        }

        .points-label {
            font-size: 1.1em;
            opacity: 0.9;
            margin-bottom: 8px;
            position: relative;
            z-index: 1;
        }

        .current-points {
            font-size: 5rem;
            font-weight: 900;
            margin: var(--spacing-xl) 0;
            text-shadow: 4px 4px 15px rgba(0,0,0,0.5);
            position: relative;
            z-index: 1;
            animation: pulse-scale 2s ease-in-out infinite;
            transition: color 0.3s ease;
            color: #ffffff;
            letter-spacing: -0.03em;
            line-height: 0.9;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
        }

        .points-stats {
            display: flex;
            justify-content: space-around;
            margin-top: 15px;
            position: relative;
            z-index: 1;
        }

        .stat-item {
            text-align: center;
            padding: 6px;
            background: rgba(255,255,255,0.15);
            border-radius: 8px;
            backdrop-filter: blur(5px);
            flex: 1;
            margin: 0 2px;
        }

        .stat-value {
            font-size: 1.2em;
            font-weight: bold;
            color: #fff;
            margin-bottom: 3px;
        }

        .stat-label {
            opacity: 0.9;
            font-size: 0.75em;
        }

        /* ÂèØÊªöÂä®ÂÜÖÂÆπÂå∫Âüü */
        .scrollable-content {
            flex: 1;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }

        .main-content {
            padding: 40px;
        }

        .controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        .control-group {
            background: linear-gradient(145deg, #f8f9fa, #e9ecef);
            padding: 30px;
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
            border: 3px solid transparent;
            background-clip: padding-box;
            position: relative;
            transition: var(--transition);
        }
        
        .control-group:first-child {
            border-color: rgba(16, 185, 129, 0.3);
            background: linear-gradient(145deg, #f0fdf4, #dcfce7);
        }
        
        .control-group:first-child::before {
            background: linear-gradient(135deg, #10b981 0%, #34d399 100%);
        }
        
        .control-group:last-child {
            border-color: rgba(245, 158, 11, 0.3);
            background: linear-gradient(145deg, #fffbeb, #fef3c7);
        }
        
        .control-group:last-child::before {
            background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%);
        }

        .control-group::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: var(--primary-gradient);
            border-radius: var(--border-radius);
            z-index: -1;
            opacity: 0;
            transition: var(--transition);
        }

        .control-group:hover::before {
            opacity: 1;
        }

        .control-group:hover {
            transform: translateY(-3px);
        }

        .control-group h3 {
            margin-bottom: 30px;
            color: var(--theme-text);
            text-align: center;
            font-size: 1.6em;
            font-weight: 800;
            position: relative;
            padding-bottom: 15px;
        }
        
        .control-group h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 70px;
            height: 4px;
            background: linear-gradient(90deg, #4a90e2, #357abd);
            border-radius: 2px;
            box-shadow: 0 2px 4px rgba(74, 144, 226, 0.3);
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: #6c757d;
        }

        .input-group input, .input-group select {
            width: 100%;
            padding: 15px;
            border: 2px solid #dee2e6;
            border-radius: 12px;
            font-size: 16px;
            transition: var(--transition);
            background: rgba(255,255,255,0.9);
        }

        .input-group input:focus, .input-group select:focus {
            outline: none;
            border-color: var(--theme-accent);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        /* ÁßØÂàÜÂª∫ËÆÆÊèêÁ§∫Ê†∑Âºè */
        .input-group {
            position: relative;
        }
        
        .points-suggestion-tip {
            position: absolute;
            top: -30px;
            right: 0;
            background: var(--info-gradient);
            color: white;
            padding: 6px 10px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            z-index: 1000;
            animation: fadeIn 0.3s ease;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            white-space: nowrap;
            pointer-events: none;
        }
        
        .points-suggestion-tip::after {
            content: '';
            position: absolute;
            top: 100%;
            right: 10px;
            width: 0;
            height: 0;
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
            border-top: 6px solid var(--info-gradient);
        }

        /* ÁßØÂàÜÂçï‰ΩçÈ¢ÑËßàÊ†∑Âºè */
        #currencyPreview {
            transition: var(--transition);
            border: 2px solid transparent;
        }

        #currencyPreview:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
        }

        #previewIcon {
            transition: var(--transition);
            display: inline-block;
            animation: bounce-in 0.6s ease-out;
        }

        @keyframes currency-glow {
            0% { text-shadow: 0 0 5px var(--theme-accent); }
            50% { text-shadow: 0 0 20px var(--theme-accent), 0 0 30px var(--theme-accent); }
            100% { text-shadow: 0 0 5px var(--theme-accent); }
        }

        .currency-selected {
            animation: currency-glow 1s ease-in-out;
        }

        .btn {
            width: 100%;
            padding: 18px;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            margin-top: 15px;
            position: relative;
            overflow: hidden;
        }



        .btn:hover {
            transform: translateY(-3px);
        }

        .btn-add {
            background: var(--success-gradient);
            color: white;
        }

        .btn-add:hover {
            box-shadow: 0 10px 25px rgba(17, 153, 142, 0.4);
        }

        .btn-subtract {
            background: var(--danger-gradient);
            color: white;
        }

        .btn-subtract:hover {
            box-shadow: 0 10px 25px rgba(252, 70, 107, 0.4);
        }

        /* ‰∏ªÈ¢òÈÄâÊã©Âô® */
        .theme-selector {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
        }

        .theme-btn {
            background: var(--primary-gradient);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
        }

        .theme-btn:hover {
            transform: scale(1.05);
        }

        .theme-dropdown {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            background: var(--theme-bg);
            border-radius: 12px;
            box-shadow: var(--card-shadow-hover);
            padding: 20px;
            margin-top: 10px;
            min-width: 280px;
            max-width: 90vw;
            display: none;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1001;
        }

        .theme-dropdown.show {
            display: block;
            opacity: 1;
            visibility: visible;
            transform: translate(-50%, -50%) scale(1);
        }

        .theme-dropdown.show {
            display: block;
        }

        .theme-option {
            display: flex;
            align-items: center;
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            margin-bottom: 8px;
        }

        .theme-option:hover {
            background: rgba(102, 126, 234, 0.1);
        }

        .theme-option.active {
            background: var(--success-gradient);
            color: white;
        }

        .theme-preview {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            margin-right: 12px;
            border: 2px solid #dee2e6;
        }

        /* ÊàêÂ∞±Á≥ªÁªü */
        .achievements-section {
            margin-bottom: 50px;
        }

        .achievements-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 35px;
        }

        .achievements-header h3 {
            color: var(--theme-text);
            font-size: 1.8em;
            font-weight: 800;
            position: relative;
            padding-bottom: 15px;
        }
        
        .achievements-header h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 80px;
            height: 4px;
            background: linear-gradient(90deg, #10b981, #34d399);
            border-radius: 2px;
            box-shadow: 0 2px 4px rgba(16, 185, 129, 0.3);
        }

        .achievements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .achievement-card {
            background: linear-gradient(145deg, #fff, #f0f0f0);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .achievement-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s;
        }

        .achievement-card:hover::before {
            left: 100%;
        }

        .achievement-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--card-shadow-hover);
            border: 2px solid var(--theme-accent);
        }

        .achievement-card.earned {
            background: linear-gradient(135deg, #10b981, #34d399);
            color: white;
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.6), 0 0 20px rgba(16, 185, 129, 0.4);
            border: 3px solid rgba(255, 215, 0, 0.8);
            animation: achievement-glow 2s ease-in-out infinite alternate;
            position: relative;
        }
        
        .achievement-card.earned::after {
            content: '';
            position: absolute;
            inset: -5px;
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.3), rgba(16, 185, 129, 0.3));
            border-radius: 15px;
            z-index: -1;
            filter: blur(10px);
        }

        @keyframes achievement-glow {
            0% {
                box-shadow: 0 0 30px rgba(255, 215, 0, 0.6), 0 0 20px rgba(16, 185, 129, 0.4);
            }
            100% {
                box-shadow: 0 0 40px rgba(255, 215, 0, 0.8), 0 0 30px rgba(16, 185, 129, 0.6), 0 0 50px rgba(16, 185, 129, 0.3);
            }
        }

        .achievement-card.earned:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 40px rgba(16, 185, 129, 0.5);
        }

        .achievement-icon {
            font-size: 2.5em;
            margin-bottom: 10px;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
            transition: all 0.3s ease;
        }

        .achievement-card.earned .achievement-icon {
            filter: drop-shadow(0 4px 8px rgba(16, 185, 129, 0.3));
            animation: icon-bounce 0.6s ease;
        }

        @keyframes icon-bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }

        .achievement-card:hover .achievement-icon {
            transform: scale(1.1);
        }

        .achievement-title {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .achievement-desc {
            font-size: 0.9em;
            opacity: 0.8;
            margin-bottom: 8px;
        }

        .achievement-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 8px;
        }

        .achievement-category {
            font-size: 0.8em;
            background: rgba(102, 126, 234, 0.1);
            color: var(--theme-accent);
            padding: 2px 8px;
            border-radius: 12px;
            font-weight: 600;
        }

        .achievement-difficulty {
            font-size: 0.8em;
            font-weight: 600;
        }

        .achievement-earned {
            margin-top: 8px;
            font-size: 0.8em;
            opacity: 0.9;
            font-weight: 600;
        }



        /* Ê†áÁ≠æÈ°µÁ≥ªÁªü */
        .tabs {
            display: flex;
            border-bottom: 2px solid #dee2e6;
            margin-bottom: 30px;
        }

        .tab {
            padding: 15px 25px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px;
            color: #6c757d;
            transition: var(--transition);
            position: relative;
        }

        .tab.active {
            color: var(--theme-accent);
        }

        .tab.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--primary-gradient);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease-in-out;
        }

        /* ÂéÜÂè≤ËÆ∞ÂΩï */
        .history-section {
            margin-bottom: 40px;
        }

        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .history-header h3 {
            color: var(--theme-text);
            font-size: 1.4em;
        }

        .btn-clear, .btn-export, .btn-admin {
            background: var(--warning-gradient);
            color: white;
            padding: 18px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 18px;
            font-weight: 700;
            transition: var(--transition);
            box-shadow: var(--card-shadow);
        }

        .btn-clear:hover, .btn-export:hover, .btn-admin:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(245, 87, 108, 0.4);
        }

        .btn-admin {
            background: var(--primary-gradient);
        }

        .btn-reset-filters {
            background: var(--info-gradient);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: var(--transition);
            box-shadow: var(--card-shadow);
        }

        .btn-reset-filters:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        /* ÂéÜÂè≤ËÆ∞ÂΩïÁ≠õÈÄâÂô®Ê†∑Âºè */
        .history-filters {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            border: 1px solid #e9ecef;
        }

        .filter-group {
            display: inline-block;
            margin-right: 20px;
            margin-bottom: 10px;
            vertical-align: top;
        }

        .filter-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: var(--theme-text);
            font-size: 14px;
        }

        .filter-group select {
            padding: 8px 12px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 14px;
            background: white;
            color: var(--theme-text);
            transition: var(--transition);
            min-width: 120px;
        }

        .filter-group select:focus {
            outline: none;
            border-color: var(--theme-accent);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .filter-status {
            margin-top: 10px;
            padding: 8px 12px;
            background: var(--info-gradient);
            color: white;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 600;
            display: inline-block;
        }

        /* ÂéÜÂè≤ËÆ∞ÂΩïÁªüËÆ°Ê¶ÇËßàÊ†∑Âºè */
        .history-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .stats-card {
            background: linear-gradient(145deg, #fff, #f8f9fa);
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border: 2px solid transparent;
            transition: var(--transition);
        }

        .stats-card:hover {
            transform: translateY(-3px);
            border-color: var(--theme-accent);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.2);
        }

        .stats-value {
            font-size: 2em;
            font-weight: bold;
            color: var(--theme-accent);
            margin-bottom: 5px;
        }

        .stats-label {
            font-size: 0.9em;
            color: #6c757d;
            font-weight: 600;
        }

        /* ÂéÜÂè≤Êï∞ÊçÆÂàÜÊûêÂå∫ÂüüÊ†∑Âºè */
        .history-analysis {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border: 1px solid #e9ecef;
        }

        .history-analysis h3 {
            margin-bottom: 20px;
            color: var(--theme-text);
            font-size: 1.3em;
            text-align: center;
        }

        .analysis-tabs {
            display: flex;
            border-bottom: 2px solid #dee2e6;
            margin-bottom: 20px;
            gap: 2px;
        }

        .analysis-tab {
            padding: 12px 20px;
            background: rgba(248, 249, 250, 0.8);
            border: none;
            cursor: pointer;
            font-size: 14px;
            color: #6c757d;
            transition: var(--transition);
            border-radius: 8px 8px 0 0;
            position: relative;
        }

        .analysis-tab.active {
            background: var(--theme-accent);
            color: white;
            font-weight: 600;
        }

        .analysis-tab:hover:not(.active) {
            background: rgba(102, 126, 234, 0.1);
            color: var(--theme-accent);
        }

        .analysis-content {
            display: none;
        }

        .analysis-content.active {
            display: block;
            animation: fadeIn 0.3s ease-in-out;
        }

        .chart-container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .chart-container h4 {
            margin-bottom: 15px;
            color: var(--theme-text);
            font-size: 1.1em;
            text-align: center;
        }

        .mini-chart {
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6c757d;
            font-style: italic;
        }

        /* ÂõæË°®Ê†∑Âºè */
        .chart-empty {
            text-align: center;
            color: #6c757d;
            font-style: italic;
            padding: 20px;
        }

        /* È•ºÂõæÊ†∑Âºè */
        .pie-chart {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            align-items: flex-start;
        }

        .pie-item {
            display: flex;
            align-items: center;
            gap: 8px;
            min-width: 150px;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 8px;
            transition: var(--transition);
        }

        .pie-item:hover {
            background: #e9ecef;
            transform: translateY(-2px);
        }

        .pie-color {
            width: 16px;
            height: 16px;
            border-radius: 3px;
            flex-shrink: 0;
        }

        .pie-info {
            flex: 1;
        }

        .pie-label {
            font-size: 13px;
            font-weight: 600;
            color: var(--theme-text);
            margin-bottom: 2px;
        }

        .pie-value {
            font-size: 12px;
            color: #6c757d;
        }

        /* ÊäòÁ∫øÂõæÊ†∑Âºè */
        .line-chart {
            display: flex;
            justify-content: space-between;
            align-items: end;
            height: 180px;
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            overflow-x: auto;
        }

        .line-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 40px;
            flex-shrink: 0;
        }

        .line-bar {
            width: 8px;
            border-radius: 4px;
            margin-bottom: 8px;
            transition: var(--transition);
            position: relative;
        }

        .line-bar:hover {
            transform: scale(1.1);
        }

        .line-label {
            font-size: 11px;
            color: #6c757d;
            margin-bottom: 4px;
        }

        .line-value {
            font-size: 11px;
            font-weight: 600;
            text-align: center;
        }

        /* Êü±Áä∂ÂõæÊ†∑Âºè */
        .bar-chart {
            display: flex;
            justify-content: space-between;
            align-items: end;
            height: 180px;
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            overflow-x: auto;
        }

        .bar-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 60px;
            flex-shrink: 0;
        }

        .bar-group {
            display: flex;
            gap: 3px;
            align-items: end;
            height: 120px;
            margin-bottom: 8px;
        }

        .bar {
            width: 12px;
            border-radius: 2px 2px 0 0;
            transition: var(--transition);
            position: relative;
        }

        .bar:hover {
            transform: scale(1.1);
        }

        .bar-earned {
            background: var(--success-gradient);
        }

        .bar-spent {
            background: var(--danger-gradient);
        }

        .bar-label {
            font-size: 11px;
            color: #6c757d;
            margin-bottom: 4px;
        }

        .bar-value {
            font-size: 11px;
            font-weight: 600;
            text-align: center;
        }

        .history-list {
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #dee2e6;
            border-radius: 12px;
            background: rgba(255,255,255,0.9);
        }

        .history-item {
            padding: 18px;
            border-bottom: 1px solid #e9ecef;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: var(--transition);
        }

        .history-item:hover {
            background: rgba(102, 126, 234, 0.05);
        }

        .history-item:last-child {
            border-bottom: none;
        }

        .history-info {
            flex: 1;
        }

        .history-amount {
            font-weight: bold;
            font-size: 1.2em;
            min-width: 100px;
            text-align: right;
        }

        .amount-positive {
            color: #28a745;
        }

        .amount-negative {
            color: #dc3545;
        }

        .history-details {
            font-size: 1em;
            color: var(--theme-text);
            margin-bottom: 5px;
        }

        .history-time {
            font-size: 0.85em;
            color: #6c757d;
        }

        /* ËÆæÁΩÆÂå∫Âüü */
        .settings-section {
            background: linear-gradient(145deg, #f8f9fa, #e9ecef);
            padding: 30px;
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
        }

        .settings-section h3 {
            margin-bottom: 25px;
            color: var(--theme-text);
            text-align: center;
        }

        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .btn-save-settings {
            background: var(--primary-gradient);
            color: white;
            width: 100%;
            padding: 18px;
            border-radius: 12px;
            font-weight: 700;
        }

        .btn-save-settings:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }

        /* ÂÆ∂ÈïøÊéßÂà∂Èù¢Êùø */
        .admin-panel {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: none;
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .admin-panel.show {
            display: flex;
        }

        .admin-content {
            background: var(--theme-bg);
            padding: 25px;
            border-radius: var(--border-radius);
            max-width: 500px;
            width: 85%;
            max-height: 70vh;
            overflow-y: auto;
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .admin-stat-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            box-shadow: var(--card-shadow);
        }

        .admin-stat-value {
            font-size: 2em;
            font-weight: bold;
            color: var(--theme-accent);
        }

        .admin-stat-label {
            color: #6c757d;
            margin-top: 5px;
        }

        /* Âä®ÁîªÂÆö‰πâ */
        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes glow {
            0% { text-shadow: 2px 2px 8px rgba(0,0,0,0.3); }
            100% { text-shadow: 2px 2px 20px rgba(255,255,255,0.8); }
        }

        @keyframes pulse-scale {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            50% { transform: translate(10px, -10px) rotate(180deg); }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes bounce-in {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); opacity: 1; }
        }

        .achievement-popup {
            position: fixed !important;
            top: 80px !important;
            left: 50% !important;
            transform: translate(-50%, 0) !important;
            background: linear-gradient(135deg, #10b981, #34d399);
            color: white;
            padding: 30px;
            border-radius: var(--border-radius);
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            text-align: center;
            z-index: 99999 !important;
            animation: achievement-popup 0.8s ease-out;
            border: 3px solid rgba(255, 255, 255, 0.3);
            overflow: hidden;
            min-width: 280px;
            max-width: 90vw;
        }

        .achievement-popup::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: popup-rotate 3s linear infinite;
        }

        @keyframes popup-rotate {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }

        @keyframes achievement-popup {
            0% {
                transform: translate(-50%, 0) scale(0.3) rotate(-10deg);
                opacity: 0;
            }
            50% {
                transform: translate(-50%, 0) scale(1.1) rotate(5deg);
            }
            100% {
                transform: translate(-50%, 0) scale(1) rotate(0deg);
                opacity: 1;
            }
        }

        /* ÁßØÂàÜÂèòÂåñÂä®Áîª */
        @keyframes points-gain {
            0% {
                transform: scale(1);
                color: inherit;
            }
            25% {
                transform: scale(1.3);
                color: #10b981;
                text-shadow: 0 0 20px rgba(16, 185, 129, 0.6);
            }
            50% {
                transform: scale(1.2);
                color: #34d399;
                text-shadow: 0 0 30px rgba(52, 211, 153, 0.8);
            }
            75% {
                transform: scale(1.1);
                color: #10b981;
                text-shadow: 0 0 20px rgba(16, 185, 129, 0.6);
            }
            100% {
                transform: scale(1);
                color: inherit;
                text-shadow: 3px 3px 10px rgba(0,0,0,0.3);
            }
        }

        @keyframes points-loss {
            0% {
                transform: scale(1);
                color: inherit;
            }
            25% {
                transform: scale(0.7);
                color: #ef4444;
                text-shadow: 0 0 20px rgba(239, 68, 68, 0.6);
            }
            50% {
                transform: scale(0.8);
                color: #f87171;
                text-shadow: 0 0 30px rgba(248, 113, 113, 0.8);
            }
            75% {
                transform: scale(0.9);
                color: #ef4444;
                text-shadow: 0 0 20px rgba(239, 68, 68, 0.6);
            }
            100% {
                transform: scale(1);
                color: inherit;
                text-shadow: 3px 3px 10px rgba(0,0,0,0.3);
            }
        }

        /* ÁßØÂàÜÂèòÂåñÊèêÁ§∫Âä®Áîª */
        @keyframes change-indicator {
            0% {
                transform: translateY(20px) scale(0.5);
                opacity: 0;
            }
            20% {
                transform: translateY(0) scale(1.2);
                opacity: 1;
            }
            80% {
                transform: translateY(-10px) scale(1);
                opacity: 1;
            }
            100% {
                transform: translateY(-30px) scale(0.8);
                opacity: 0;
            }
        }

        /* ÁßØÂàÜÊòæÁ§∫Âå∫ÂüüÂä®Áîª */
        @keyframes points-area-glow {
            0% {
                box-shadow: var(--card-shadow);
            }
            50% {
                box-shadow: 0 0 40px rgba(16, 185, 129, 0.4), var(--card-shadow);
            }
            100% {
                box-shadow: var(--card-shadow);
            }
        }

        @keyframes points-area-shake {
            0%, 100% {
                transform: translateX(0);
            }
            10%, 30%, 50%, 70%, 90% {
                transform: translateX(-3px);
            }
            20%, 40%, 60%, 80% {
                transform: translateX(3px);
            }
        }

        .achievement-popup h4 {
            font-size: 1.5em;
            margin-bottom: 10px;
        }

        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--success-gradient);
            color: white;
            padding: 20px 25px;
            border-radius: 12px;
            transform: translateX(100%);
            transition: var(--transition);
            z-index: 1000;
            box-shadow: var(--card-shadow);
            font-weight: 600;
        }

        .toast.show {
            transform: translateX(0);
            animation: slideInRight 0.3s ease-out;
        }

        .toast.error {
            background: var(--danger-gradient);
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }

        /* ÁßØÂàÜÂèòÂåñÊèêÁ§∫Ê†∑Âºè */
        .points-change-indicator {
            position: absolute;
            top: 60%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2em;
            font-weight: bold;
            z-index: 10;
            pointer-events: none;
            animation: change-indicator 2s ease-out forwards;
        }

        .points-change-indicator.gain {
            color: #10b981;
            text-shadow: 0 0 10px rgba(16, 185, 129, 0.5);
        }

        /* ÁßªÂä®Á´ØÁïåÈù¢Â∏ÉÂ±Ä‰ºòÂåñ */
        @media (max-width: 768px) {
            body {
                padding: 8px;
            }

            /* ÁßªÂä®Á´ØÂ§¥ÈÉ®ÂíåÁßØÂàÜÊòæÁ§∫Âå∫ÂüüÂ∏ÉÂ±Ä‰ºòÂåñ - Êîπ‰∏∫ÂûÇÁõ¥Â†ÜÂè† */
            .header-dashboard-container {
                flex-direction: column;
                gap: 8px;
                padding: 12px;
            }

            .left-points-section {
                flex: none;
                width: 100%;
                order: 1;
                padding: 12px;
            }

            .right-header-section {
                flex: none;
                width: 100%;
                order: 2;
                padding: 12px;
            }

            /* ÁßªÂä®Á´ØÁßØÂàÜÊòæÁ§∫Âå∫Âüü‰ºòÂåñ */
            .points-display {
                max-width: none;
                width: 100%;
                padding: 20px 15px;
                margin: 0;
            }

            .current-points {
                font-size: 3.5rem;
                margin: 15px 0;
            }

            .points-stats {
                margin-top: 6px;
                gap: 4px;
            }

            .stat-item {
                padding: 6px 4px;
                margin: 0;
                flex: 1;
            }

            .stat-value {
                font-size: 1.1em;
            }

            .stat-label {
                font-size: 0.7em;
            }

            .container {
                border-radius: 12px;
                box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            }

            .fixed-header {
                border-bottom: 1px solid #e9ecef;
            }

            .header {
                padding: 20px 25px;
            }

            .header h1 {
                font-size: 1.8em;
                margin-bottom: 8px;
            }

            .child-name {
                font-size: 1em;
                margin-bottom: 8px;
            }

            .fixed-dashboard {
                padding: 15px 20px;
            }

            .points-display {
                padding: 18px 15px;
            }

            .current-points {
                font-size: 2.8em;
                margin: 12px 0;
            }

            .points-label {
                font-size: 1.2em;
                margin-bottom: 6px;
            }

            .stat-value {
                font-size: 1.3em;
            }

            .stat-item {
                padding: 8px 6px;
            }

            .points-stats {
                margin-top: 12px;
            }

            /* ÊØèÊó•‰∏ÄË®ÄÁßªÂä®Á´Ø‰ºòÂåñ */
            .daily-quote {
                margin-top: 4px;
                padding: 8px 10px;
                max-width: 100%;
                border-radius: 10px;
                word-wrap: break-word;
                overflow-wrap: break-word;
            }

            .quote-text {
                font-size: 0.9em;
                line-height: 1.4;
                margin-bottom: 4px;
                white-space: normal;
                word-wrap: break-word;
                overflow-wrap: break-word;
                min-width: 0;
                text-align: left;
            }

            .quote-text::before,
            .quote-text::after {
                font-size: 1.1em;
            }

            .quote-text::before {
                left: -6px;
                top: -1px;
            }

            .quote-text::after {
                right: -6px;
                bottom: -6px;
            }

            .quote-author {
                font-size: 0.75em;
                margin-top: 2px;
            }

            .main-content {
                padding: 15px;
            }

            /* ÊåâÈíÆÂ∞∫ÂØ∏‰ºòÂåñ - Â¢ûÂ§ßËß¶Â±èÊåâÈíÆÂ∞∫ÂØ∏ */
            .btn {
                padding: 16px 14px;
                font-size: 16px;
                font-weight: 600;
                border-radius: 12px;
                min-height: 44px;
                margin-top: 10px;
                position: relative;
                touch-action: manipulation;
                user-select: none;
                -webkit-tap-highlight-color: transparent;
            }

            .btn-add, .btn-subtract {
                font-size: 16px;
                padding: 18px 14px;
            }

            /* ÊéßÂà∂Èù¢Êùø‰ºòÂåñ */
            .controls {
                grid-template-columns: 1fr;
                gap: 20px;
                margin-bottom: 25px;
            }

            .control-group {
                padding: 25px 20px;
                border-radius: 15px;
            }

            .control-group h3 {
                font-size: 1.5em;
                margin-bottom: 25px;
                font-weight: 700;
            }

            /* ËæìÂÖ•Ê°Ü‰ºòÂåñ - ‰ºòÂåñÊï∞Â≠óËæìÂÖ•‰ΩìÈ™å */
            .input-group {
                margin-bottom: 12px;
            }

            .input-group input, .input-group select {
                padding: 15px 14px;
                font-size: 16px;
                border-radius: 12px;
                min-height: 44px;
                border-width: 2px;
                background: rgba(255,255,255,0.95);
            }

            .input-group input:focus, .input-group select:focus {
                border-color: var(--theme-accent);
                box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.15);
                transform: scale(1.02);
                transition: all 0.2s ease;
            }

            .input-group label {
                font-size: 16px;
                margin-bottom: 8px;
                font-weight: 600;
            }

            /* ÊàêÂ∞±ÂíåÂ•ñÂä±Âç°ÁâáÂ∏ÉÂ±Ä‰ºòÂåñ */
            .achievements-grid, .rewards-grid {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                gap: 12px;
            }

            .achievement-card, .reward-card {
                padding: 15px 12px;
                border-radius: 12px;
                transition: transform 0.2s ease, box-shadow 0.2s ease;
            }

            .achievement-card:active, .reward-card:active {
                transform: scale(0.98);
            }

            .achievement-icon {
                font-size: 2.2em;
                margin-bottom: 8px;
            }

            .reward-icon {
                font-size: 2.5em;
                margin-bottom: 12px;
            }

            .reward-title {
                font-size: 1.1em;
                margin-bottom: 6px;
            }

            .reward-cost {
                font-size: 1.1em;
                margin-bottom: 12px;
            }

            /* Ê†áÁ≠æÈ°µ‰ºòÂåñ */
            .tabs {
                margin-bottom: 15px;
                gap: 2px;
            }

            .tab {
                padding: 14px 10px;
                font-size: 14px;
                flex: 1;
                min-width: 100px;
                border-radius: 10px 10px 0 0;
                background: rgba(248, 249, 250, 0.8);
                margin-right: 1px;
                transition: all 0.2s ease;
            }

            .tab:active {
                transform: scale(0.98);
                background: rgba(102, 126, 234, 0.1);
            }

            .tab.active {
                background: var(--theme-accent);
                color: white;
                transform: none;
            }

            /* ËÆæÁΩÆÁΩëÊ†º‰ºòÂåñ */
            .settings-grid {
                grid-template-columns: 1fr;
                gap: 15px;
                margin-bottom: 18px;
            }

            .settings-section {
                padding: 18px;
                border-radius: 14px;
            }

            /* ‰∏ªÈ¢òÈÄâÊã©Âô®‰ºòÂåñ */
            .theme-selector {
                position: fixed;
                top: 20px;
                left: 20px;
                z-index: 1000;
            }

            .theme-btn {
                padding: 14px 20px;
                font-size: 15px;
                border-radius: 20px;
                min-height: 44px;
                position: relative;
                overflow: hidden;
                transition: box-shadow 0.2s ease, background 0.2s ease;
            }

            .theme-btn:hover {
                transform: none;
            }

            .theme-btn:active {
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                transition: box-shadow 0.1s ease;
            }

            /* ÂéÜÂè≤ËÆ∞ÂΩï‰ºòÂåñ */
            .history-list {
                max-height: 280px;
                border-radius: 10px;
            }

            .history-item {
                padding: 12px;
                flex-direction: column;
                align-items: flex-start;
                gap: 6px;
                border-bottom: 1px solid #e9ecef;
            }

            .history-item:active {
                background: rgba(102, 126, 234, 0.05);
                transform: scale(0.99);
            }

            .history-amount {
                text-align: left;
                font-size: 1.1em;
                align-self: flex-end;
            }

            .history-details {
                font-size: 1em;
                margin-bottom: 3px;
            }

            .history-time {
                font-size: 0.8em;
            }

            /* ÂéÜÂè≤ËÆ∞ÂΩïÁ≠õÈÄâÂô®ÁßªÂä®Á´Ø‰ºòÂåñ */
            .history-filters {
                padding: 15px;
                margin-bottom: 15px;
            }

            .filter-group {
                display: block;
                margin-right: 0;
                margin-bottom: 15px;
                width: 100%;
            }

            .filter-group select {
                width: 100%;
                min-width: auto;
                padding: 12px;
                font-size: 16px;
            }

            .filter-status {
                display: block;
                text-align: center;
                margin-top: 10px;
            }

            /* ÂéÜÂè≤ÁªüËÆ°Ê¶ÇËßàÁßªÂä®Á´Ø‰ºòÂåñ */
            .history-stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
                margin-bottom: 15px;
            }

            .stats-card {
                padding: 12px;
            }

            .stats-value {
                font-size: 1.5em;
            }

            .stats-label {
                font-size: 0.8em;
            }

            /* ÂéÜÂè≤Êï∞ÊçÆÂàÜÊûêÁßªÂä®Á´Ø‰ºòÂåñ */
            .history-analysis {
                padding: 15px;
                margin-top: 15px;
            }

            .analysis-tabs {
                flex-wrap: wrap;
                gap: 1px;
            }

            .analysis-tab {
                flex: 1;
                min-width: 100px;
                padding: 10px 15px;
                font-size: 13px;
            }

            .chart-container {
                padding: 15px;
                margin-bottom: 10px;
            }

            .chart-container h4 {
                font-size: 1em;
                margin-bottom: 10px;
            }

            .mini-chart {
                min-height: 150px;
                font-size: 14px;
            }

            /* ÂÆ∂ÈïøÊéßÂà∂Èù¢Êùø‰ºòÂåñ */
            .admin-content {
                padding: 25px 20px;
                border-radius: 16px;
                width: 95%;
                max-height: 85vh;
            }

            .admin-stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
                margin-bottom: 20px;
            }

            .admin-stat-card {
                padding: 15px 12px;
            }

            .admin-stat-value {
                font-size: 1.6em;
            }

            .admin-stat-label {
                font-size: 0.9em;
            }

            /* ToastÊ∂àÊÅØ‰ºòÂåñ - ÁßªÂä®Á´ØÂèãÂ•Ω */
            .toast {
                top: 15px;
                right: 15px;
                left: 15px;
                transform: translateY(-100%);
                padding: 16px 20px;
                font-size: 16px;
                border-radius: 12px;
                max-width: none;
                text-align: center;
            }

            .toast.show {
                transform: translateY(0);
            }

            /* ÊàêÂ∞±ÂºπÁ™ó‰ºòÂåñ - ÁßªÂä®Á´ØÈÄÇÈÖç */
            .achievement-popup {
                top: 20% !important;
                left: 50% !important;
                transform: translate(-50%, 0) !important;
                width: 85%;
                max-width: 300px;
                padding: 25px 20px;
                border-radius: 16px;
                z-index: 99999 !important;
            }

            .achievement-popup h4 {
                font-size: 1.3em;
                margin-bottom: 8px;
            }

            /* ÁõÆÊ†áËøõÂ∫¶‰ºòÂåñ */
            .goal-progress {
                height: 10px;
                margin-top: 6px;
            }

            .goal-progress-bar {
                border-radius: 6px;
            }

            /* È¢ùÂ§ñËß¶Êë∏‰ºòÂåñ */
            .control-group, .achievement-card, .reward-card, .stat-item {
                cursor: pointer;
                touch-action: manipulation;
                -webkit-tap-highlight-color: transparent;
            }

            .control-group:active {
                transform: scale(0.98);
            }

            /* ÊªöÂä®‰ºòÂåñ */
            .history-list, .admin-content {
                -webkit-overflow-scrolling: touch;
                scrollbar-width: thin;
            }

            /* Èò≤Ê≠¢ÊñáÊú¨ÈÄâÊã© */
            .btn, .theme-btn, .tab, .control-group {
                -webkit-user-select: none;
                -moz-user-select: none;
                -ms-user-select: none;
                user-select: none;
            }
        }

        /* Ë∂ÖÂ∞èÂ±èÂπï‰ºòÂåñ (480px‰ª•‰∏ã) */
        @media (max-width: 480px) {
            body {
                padding: 5px;
            }

            .header {
                padding: 15px 20px;
            }

            .header h1 {
                font-size: 1.8em;
            }

            .child-name {
                font-size: 1.1em;
            }

            .fixed-dashboard {
                padding: 12px 15px;
            }

            .current-points {
                font-size: 2.3em;
                margin: 10px 0;
            }

            .points-display {
                padding: 15px 12px;
            }

            .points-stats {
                margin-top: 10px;
            }

            .main-content {
                padding: 15px;
            }

            .control-group {
                padding: 15px;
            }

            .achievements-grid, .rewards-grid {
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
                gap: 12px;
            }

            .btn {
                padding: 18px 14px;
                font-size: 15px;
            }

            .input-group input, .input-group select {
                padding: 16px 14px;
                font-size: 16px;
                min-height: 44px;
            }

            .theme-dropdown {
                width: 95%;
                max-width: 280px;
            }

            .admin-stats {
                grid-template-columns: 1fr;
            }
        }

        /* ÂÖëÊç¢ÂïÜÂ∫óÊ†∑Âºè */
        .shop-section {
            padding: 20px 0;
        }

        .shop-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding: 20px;
            background: linear-gradient(135deg, var(--theme-accent), #667eea);
            border-radius: 15px;
            color: white;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

        .shop-header h3 {
            margin: 0;
            font-size: 1.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .shop-stats {
            display: flex;
            gap: 20px;
        }

        .shop-stat-item {
            text-align: center;
            background: rgba(255, 255, 255, 0.15);
            padding: 12px 20px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .shop-stat-label {
            display: block;
            font-size: 0.9em;
            opacity: 0.9;
            margin-bottom: 5px;
        }

        .shop-stat-value {
            font-size: 1.4em;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        .shop-filters {
            display: flex;
            gap: 20px;
            margin-bottom: 25px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border: 1px solid #e9ecef;
        }

        .shop-filters .filter-group {
            display: flex;
            flex-direction: column;
            min-width: 150px;
        }

        .shop-filters .filter-group label {
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--theme-text);
        }

        .shop-filters select {
            padding: 12px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            background: white;
            color: var(--theme-text);
            font-size: 14px;
            transition: var(--transition);
        }

        .shop-filters select:focus {
            outline: none;
            border-color: var(--theme-accent);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .shop-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .shop-item {
            background: linear-gradient(145deg, #fff, #f8f9fa);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border: 2px solid transparent;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .shop-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s;
        }

        .shop-item:hover::before {
            left: 100%;
        }

        .shop-item:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 35px rgba(102, 126, 234, 0.2);
            border-color: var(--theme-accent);
        }

        .shop-item.unavailable {
            opacity: 0.6;
            filter: grayscale(0.3);
        }

        .shop-item.unavailable:hover {
            transform: none;
            border-color: transparent;
        }

        .shop-item-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .shop-item-icon {
            font-size: 3em;
            margin-right: 15px;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
        }

        .shop-item-info {
            flex: 1;
        }

        .shop-item-title {
            font-size: 1.2em;
            font-weight: bold;
            color: var(--theme-text);
            margin-bottom: 5px;
        }

        .shop-item-category {
            font-size: 0.9em;
            color: var(--theme-accent);
            font-weight: 600;
            background: rgba(102, 126, 234, 0.1);
            padding: 2px 8px;
            border-radius: 12px;
            display: inline-block;
        }

        .shop-item-description {
            color: #6c757d;
            margin-bottom: 15px;
            line-height: 1.4;
            font-size: 0.95em;
        }

        .shop-item-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .shop-item-price {
            font-size: 1.3em;
            font-weight: bold;
            color: var(--theme-accent);
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .shop-item-price .currency {
            font-size: 0.9em;
            opacity: 0.8;
        }

        .shop-item-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-size: 14px;
        }

        .shop-item-btn-exchange {
            background: var(--success-gradient);
            color: white;
        }

        .shop-item-btn-exchange:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(16, 185, 129, 0.3);
        }

        .shop-item-btn-unavailable {
            background: #6c757d;
            color: white;
            cursor: not-allowed;
        }

        .shop-item-btn-unavailable:hover {
            transform: none;
            box-shadow: none;
        }

        .shop-history {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border: 1px solid #e9ecef;
        }

        .shop-history h4 {
            margin-bottom: 15px;
            color: var(--theme-text);
            font-size: 1.2em;
        }

        .exchange-history-list {
            max-height: 300px;
            overflow-y: auto;
        }

        .exchange-history-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid #e9ecef;
            transition: var(--transition);
        }

        .exchange-history-item:hover {
            background: rgba(102, 126, 234, 0.05);
        }

        .exchange-history-item:last-child {
            border-bottom: none;
        }

        .exchange-info {
            flex: 1;
        }

        .exchange-name {
            font-weight: 600;
            color: var(--theme-text);
            margin-bottom: 5px;
        }

        .exchange-time {
            font-size: 0.85em;
            color: #6c757d;
        }

        .exchange-cost {
            font-weight: bold;
            color: var(--theme-accent);
            font-size: 1.1em;
        }

        /* ÂÖëÊç¢Á°ÆËÆ§ÂºπÁ™óÊ†∑Âºè */
        .exchange-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            animation: fadeIn 0.3s ease;
        }

        .exchange-modal-content {
            background: var(--theme-bg);
            padding: 30px;
            border-radius: var(--border-radius);
            max-width: 450px;
            width: 90%;
            text-align: center;
            box-shadow: var(--card-shadow-hover);
            animation: bounceIn 0.4s ease;
        }

        .exchange-modal-icon {
            font-size: 4em;
            margin-bottom: 20px;
            animation: pulse 2s infinite;
        }

        .exchange-modal-title {
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 15px;
            color: var(--theme-text);
        }

        .exchange-modal-details {
            margin-bottom: 25px;
            padding: 20px;
            background: rgba(102, 126, 234, 0.05);
            border-radius: 10px;
            border-left: 4px solid var(--theme-accent);
        }

        .exchange-modal-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .exchange-modal-row:last-child {
            margin-bottom: 0;
            font-weight: bold;
            font-size: 1.1em;
            color: var(--theme-accent);
        }

        .exchange-modal-buttons {
            display: flex;
            gap: 15px;
        }

        .exchange-modal-btn {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-size: 16px;
        }

        .exchange-modal-btn-cancel {
            background: #6c757d;
            color: white;
        }

        .exchange-modal-btn-confirm {
            background: var(--success-gradient);
            color: white;
        }

        .exchange-modal-btn:hover {
            transform: translateY(-2px);
        }

        /* ÁßªÂä®Á´ØÈÄÇÈÖç */
        @media (max-width: 768px) {
            .shop-header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }

            .shop-stats {
                gap: 15px;
            }

            .shop-filters {
                flex-direction: column;
                gap: 15px;
            }

            .shop-grid {
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 15px;
            }

            .shop-item {
                padding: 15px;
            }

            .shop-item-icon {
                font-size: 2.5em;
                margin-right: 10px;
            }

            .exchange-modal-content {
                padding: 25px 20px;
            }

            .exchange-modal-buttons {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- ‰∏ªÈ¢òÈÄâÊã©Âô® -->
    <div class="theme-selector">
        <button class="theme-btn" onclick="toggleThemeDropdown()">üé® ‰∏ªÈ¢ò</button>
        <div class="theme-dropdown" id="themeDropdown">
            <div class="theme-option active" onclick="changeTheme('default')">
                <div class="theme-preview" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);"></div>
                <span>ÈªòËÆ§‰∏ªÈ¢ò</span>
            </div>
            <div class="theme-option" onclick="changeTheme('rainbow')">
                <div class="theme-preview" style="background: linear-gradient(135deg, #ff6b6b, #feca57, #48cae4, #f72585, #7209b7);"></div>
                <span>ÂΩ©Ëôπ‰∏ªÈ¢ò</span>
            </div>
            <div class="theme-option" onclick="changeTheme('forest')">
                <div class="theme-preview" style="background: linear-gradient(135deg, #134e5e 0%, #71b280 100%);"></div>
                <span>Ê£ÆÊûó‰∏ªÈ¢ò</span>
            </div>
            <div class="theme-option" onclick="changeTheme('sunset')">
                <div class="theme-preview" style="background: linear-gradient(135deg, #ff7e5f 0%, #feb47b 100%);"></div>
                <span>Êó•ËêΩ‰∏ªÈ¢ò</span>
            </div>
            <div class="theme-option" onclick="changeTheme('ocean')">
                <div class="theme-preview" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);"></div>
                <span>Êµ∑Ê¥ã‰∏ªÈ¢ò</span>
            </div>
            <div class="theme-option" onclick="changeTheme('christmas')">
                <div class="theme-preview" style="background: linear-gradient(135deg, #c53030 0%, #38a169 100%);"></div>
                <span>üéÑ Âú£ËØû‰∏ªÈ¢ò</span>
            </div>
            <div class="theme-option" onclick="changeTheme('newyear')">
                <div class="theme-preview" style="background: linear-gradient(135deg, #ffd700 0%, #ff6b6b 50%, #4ecdc4 100%);"></div>
                <span>üéÜ Êñ∞Âπ¥‰∏ªÈ¢ò</span>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Â§¥ÈÉ®ÂíåÁßØÂàÜÊòæÁ§∫Âå∫Âüü -->
        <div class="header-dashboard-container">
            <!-- Â∑¶‰æßÁßØÂàÜÊòæÁ§∫Ê®°Âùó -->
            <div class="left-points-section">
                <div class="points-display">
                    <div class="points-label" id="pointsLabel">ÂΩìÂâçÁßØÂàÜ</div>
                    <div class="current-points" id="currentPoints">0</div>
                    <!-- ÁßØÂàÜÂèòÂåñÊèêÁ§∫ -->
                    <div class="points-change-indicator" id="pointsChangeIndicator" style="display: none;"></div>
                    <div class="points-stats">
                        <div class="stat-item">
                            <div class="stat-value" id="totalEarned">0</div>
                            <div class="stat-label">ÊÄªËé∑Âæó</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="totalSpent">0</div>
                            <div class="stat-label">ÊÄªÊâ£Âáè</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Âè≥‰æßÂ§¥ÈÉ®Âå∫ÂüüÊ®°Âùó -->
            <div class="right-header-section">
                <div class="header">

                    <div class="child-name">Ê¨¢ËøéÂõûÊù•Ôºå<span id="displayChildName">Â∞èÊúãÂèã</span>ÔºÅ</div>
                    <!-- ÊØèÊó•‰∏ÄË®ÄÂå∫Âüü -->
                    <div class="daily-quote" id="dailyQuote">
                        <div class="quote-loading" id="quoteLoading">Ê≠£Âú®Ëé∑ÂèñÊØèÊó•‰∏ÄË®Ä...</div>
                        <div class="quote-content" id="quoteContent" style="display: none;">
                            <div class="quote-text" id="quoteText"></div>
                            <div class="quote-author" id="quoteAuthor"></div>
                        </div>
                        <div class="quote-error" id="quoteError" style="display: none;">
                            ÊØèÊó•‰∏ÄË®ÄÊöÇÊó∂Êó†Ê≥ïËé∑Âèñ
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ÂèØÊªöÂä®ÂÜÖÂÆπÂå∫Âüü -->
        <div class="scrollable-content">
            <div class="main-content">

            <!-- ÊéßÂà∂Èù¢Êùø -->
            <div class="controls">
                <!-- Â¢ûÂä†ÁßØÂàÜ -->
                <div class="control-group">
                    <h3>üéâ Ëé∑ÂæóÁßØÂàÜ</h3>
                    <div class="input-group">
                        <label for="addAmount">ÁßØÂàÜÊï∞Èáè</label>
                        <input type="number" id="addAmount" min="1" value="10">
                    </div>
                    <div class="input-group">
                        <label for="addReason">Ëé∑ÂæóÂéüÂõ†</label>
                        <select id="addReason">
                            <!-- Â≠¶‰π†Á±ª -->
                            <optgroup label="üìö Â≠¶‰π†ÊàêÈïø">
                                <option value="ÂÆåÊàê‰Ωú‰∏ö">ÂÆåÊàê‰Ωú‰∏ö</option>
                                <option value="‰∏ªÂä®Â≠¶‰π†">‰∏ªÂä®Â≠¶‰π†</option>
                                <option value="ËÄÉËØï‰ºòÁßÄ">ËÄÉËØï‰ºòÁßÄ</option>
                                <option value="‰∏ªÂä®ÈòÖËØª">‰∏ªÂä®ÈòÖËØª</option>
                                <option value="ËØæÂ†ÇË°®Áé∞Â•Ω">ËØæÂ†ÇË°®Áé∞Â•Ω</option>
                                <option value="È¢Ñ‰π†Êñ∞ËØæ">È¢Ñ‰π†Êñ∞ËØæ</option>
                                <option value="Â§ç‰π†Â∑©Âõ∫">Â§ç‰π†Â∑©Âõ∫</option>
                                <option value="ËÉåËØµËØæÊñá">ËÉåËØµËØæÊñá</option>
                            </optgroup>
                            
                            <!-- ÂÆ∂Âä°Á±ª -->
                            <optgroup label="üè† ÂÆ∂Âä°Âä≥Âä®">
                                <option value="Ê¥óÁ¢ó">Ê¥óÁ¢ó</option>
                                <option value="Êâ´Âú∞ÊãñÂú∞">Êâ´Âú∞ÊãñÂú∞</option>
                                <option value="Êï¥ÁêÜÊàøÈó¥">Êï¥ÁêÜÊàøÈó¥</option>
                                <option value="Êî∂ÊãæÁé©ÂÖ∑">Êî∂ÊãæÁé©ÂÖ∑</option>
                                <option value="Âè†Ë°£Êúç">Âè†Ë°£Êúç</option>
                                <option value="ÂÄíÂûÉÂúæ">ÂÄíÂûÉÂúæ</option>
                                <option value="Êì¶Ê°åÂ≠ê">Êì¶Ê°åÂ≠ê</option>
                                <option value="ÁÖßÈ°æÊ§çÁâ©">ÁÖßÈ°æÊ§çÁâ©</option>
                            </optgroup>
                            
                            <!-- Ë°å‰∏∫Ë°®Áé∞Á±ª -->
                            <optgroup label="‚≠ê Ë°å‰∏∫Ë°®Áé∞">
                                <option value="Ë°®Áé∞‰ºòÁßÄ">Ë°®Áé∞‰ºòÁßÄ</option>
                                <option value="Êó©Ëµ∑ÊåâÊó∂Áù°Ëßâ">Êó©Ëµ∑ÊåâÊó∂Áù°Ëßâ</option>
                                <option value="ÈÅµÂÆàËßÑÂàô">ÈÅµÂÆàËßÑÂàô</option>
                                <option value="ËØöÂÆûÂÆà‰ø°">ËØöÂÆûÂÆà‰ø°</option>
                                <option value="‰∏çÊåëÈ£ü">‰∏çÊåëÈ£ü</option>
                                <option value="‰∏ªÂä®ÊâøËÆ§ÈîôËØØ">‰∏ªÂä®ÊâøËÆ§ÈîôËØØ</option>
                                <option value="ÊéßÂà∂ÊÉÖÁª™">ÊéßÂà∂ÊÉÖÁª™</option>
                                <option value="Áà±Êä§ÂÖ¨Áâ©">Áà±Êä§ÂÖ¨Áâ©</option>
                            </optgroup>
                            
                            <!-- ÂÅ•Â∫∑ËøêÂä®Á±ª -->
                            <optgroup label="üèÉ ÂÅ•Â∫∑ËøêÂä®">
                                <option value="ÈîªÁÇºË∫´‰Ωì">ÈîªÁÇºË∫´‰Ωì</option>
                                <option value="Ë∑ëÊ≠•Ë∑≥Áª≥">Ë∑ëÊ≠•Ë∑≥Áª≥</option>
                                <option value="ÁêÉÁ±ªËøêÂä®">ÁêÉÁ±ªËøêÂä®</option>
                                <option value="Ê∏∏Ê≥≥">Ê∏∏Ê≥≥</option>
                                <option value="È™ëËá™Ë°åËΩ¶">È™ëËá™Ë°åËΩ¶</option>
                                <option value="Êà∑Â§ñËøêÂä®">Êà∑Â§ñËøêÂä®</option>
                                <option value="ÁªÉËàûËπà">ÁªÉËàûËπà</option>
                                <option value="ÁªÉ‰πêÂô®">ÁªÉ‰πêÂô®</option>
                            </optgroup>
                            
                            <!-- Á§æ‰∫§ÂìÅÂæ∑Á±ª -->
                            <optgroup label="ü§ù Á§æ‰∫§ÂìÅÂæ∑">
                                <option value="ÂàÜ‰∫´Áé©ÂÖ∑">ÂàÜ‰∫´Áé©ÂÖ∑</option>
                                <option value="Â∏ÆÂä©‰ªñ‰∫∫">Â∏ÆÂä©‰ªñ‰∫∫</option>
                                <option value="Â≠ùÈ°∫Áà∂ÊØç">Â≠ùÈ°∫Áà∂ÊØç</option>
                                <option value="ÁÖßÈ°æÂÆ∂‰∫∫">ÁÖßÈ°æÂÆ∂‰∫∫</option>
                                <option value="Â∞äËÄÅÁà±Âπº">Â∞äËÄÅÁà±Âπº</option>
                                <option value="ÊúâÁ§ºË≤å">ÊúâÁ§ºË≤å</option>
                                <option value="Âõ¢ÈòüÂêà‰Ωú">Âõ¢ÈòüÂêà‰Ωú</option>
                                <option value="ÂÖ≥ÂøÉ‰ªñ‰∫∫">ÂÖ≥ÂøÉ‰ªñ‰∫∫</option>
                            </optgroup>
                            
                            <!-- ÂàõÈÄ†Ëâ∫ÊúØÁ±ª -->
                            <optgroup label="üé® ÂàõÈÄ†Ëâ∫ÊúØ">
                                <option value="ÁîªÁîª">ÁîªÁîª</option>
                                <option value="ÊâãÂ∑•Âà∂‰Ωú">ÊâãÂ∑•Âà∂‰Ωú</option>
                                <option value="ÂÜô‰Ωú">ÂÜô‰Ωú</option>
                                <option value="Âî±Ê≠å">Âî±Ê≠å</option>
                                <option value="Ë∑≥Ëàû">Ë∑≥Ëàû</option>
                                <option value="ÂºπÁê¥">ÂºπÁê¥</option>
                                <option value="ÊëÑÂΩ±">ÊëÑÂΩ±</option>
                                <option value="ÂèÇÂä†Ë°®Êºî">ÂèÇÂä†Ë°®Êºî</option>
                            </optgroup>
                            
                            <!-- ÂÖ¥Ë∂£Áà±Â•ΩÁ±ª -->
                            <optgroup label="üéØ ÂÖ¥Ë∂£Áà±Â•Ω">
                                <option value="ÂèÇÂä†ÊØîËµõ">ÂèÇÂä†ÊØîËµõ</option>
                                <option value="Â≠¶‰π†Êñ∞ÊäÄËÉΩ">Â≠¶‰π†Êñ∞ÊäÄËÉΩ</option>
                                <option value="ÁªÉ‰π†ÊâçËâ∫">ÁªÉ‰π†ÊâçËâ∫</option>
                                <option value="ÂèÇÂä†Ê¥ªÂä®">ÂèÇÂä†Ê¥ªÂä®</option>
                                <option value="ÊãìÂ±ïÁü•ËØÜ">ÊãìÂ±ïÁü•ËØÜ</option>
                                <option value="Êé¢Á¥¢Êñ∞‰∫ãÁâ©">Êé¢Á¥¢Êñ∞‰∫ãÁâ©</option>
                                <option value="Â≠¶ÂÅöËèú">Â≠¶ÂÅöËèú</option>
                                <option value="Â≠¶Â§ñËØ≠">Â≠¶Â§ñËØ≠</option>
                            </optgroup>
                            

                            
                            <option value="ÂÖ∂‰ªñ">ÂÖ∂‰ªñ</option>
                        </select>
                    </div>
                    <button class="btn btn-add" onclick="addPoints()">üöÄ Ëé∑ÂæóÁßØÂàÜ</button>
                </div>

                <!-- Êâ£ÂáèÁßØÂàÜ -->
                <div class="control-group">
                    <h3>‚ö†Ô∏è ÊÉ©ÁΩöÊâ£Âáè</h3>
                    <div class="input-group">
                        <label for="subtractAmount">ÁßØÂàÜÊï∞Èáè</label>
                        <input type="number" id="subtractAmount" min="1" value="5">
                    </div>
                    <div class="input-group">
                        <label for="subtractReason">ÊÉ©ÁΩöÊâ£ÂáèÂéüÂõ†</label>
                        <select id="subtractReason">
                            <!-- ÊÉ©ÁΩöÁ±ª -->
                            <optgroup label="‚ö†Ô∏è ÊÉ©ÁΩöÊâ£Èô§">
                                <option value="Êú™ÂÆåÊàê‰Ωú‰∏ö">Êú™ÂÆåÊàê‰Ωú‰∏ö</option>
                                <option value="‰∏çÂê¨ËØù">‰∏çÂê¨ËØù</option>
                                <option value="‰π±ÂèëËÑæÊ∞î">‰π±ÂèëËÑæÊ∞î</option>
                                <option value="ÊííË∞é">ÊííË∞é</option>
                                <option value="‰∏çËØöÂÆû">‰∏çËØöÂÆû</option>
                                <option value="Ê¨∫Ë¥ü‰ªñ‰∫∫">Ê¨∫Ë¥ü‰ªñ‰∫∫</option>
                                <option value="ÊçüÂùèÁâ©ÂìÅ">ÊçüÂùèÁâ©ÂìÅ</option>
                                <option value="‰∏çÈÅµÂÆàËßÑÂàô">‰∏çÈÅµÂÆàËßÑÂàô</option>
                                <option value="‰∏çÊåâÊó∂Áù°Ëßâ">‰∏çÊåâÊó∂Áù°Ëßâ</option>
                                <option value="ÊåëÈ£ü">ÊåëÈ£ü</option>
                                <option value="‰∏çÊï¥ÁêÜÊàøÈó¥">‰∏çÊï¥ÁêÜÊàøÈó¥</option>
                                <option value="‰π±Êâî‰∏úË•ø">‰π±Êâî‰∏úË•ø</option>
                                <option value="‰∏çÁ§ºË≤å">‰∏çÁ§ºË≤å</option>
                                <option value="ËØ¥ËÑèËØù">ËØ¥ËÑèËØù</option>
                                <option value="‰∏çÂ∞äÈáç‰ªñ‰∫∫">‰∏çÂ∞äÈáç‰ªñ‰∫∫</option>
                                <option value="Êµ™Ë¥πÈ£üÁâ©">Êµ™Ë¥πÈ£üÁâ©</option>
                                <option value="ËøüÂà∞">ËøüÂà∞</option>
                                <option value="‰∏ç‰∏ìÂøÉ">‰∏ç‰∏ìÂøÉ</option>
                                <option value="ÊäÑË¢≠‰Ωú‰∏ö">ÊäÑË¢≠‰Ωú‰∏ö</option>

                    
                            </optgroup>
                             <option value="ÂÖ∂‰ªñ">ÂÖ∂‰ªñ</option>

                        </select>
                    </div>
                    <button class="btn btn-subtract" onclick="subtractPoints()">‚ö†Ô∏è ÊÉ©ÁΩöÊâ£Âáè</button>
                </div>
            </div>

            <!-- ÊàêÂ∞±Á≥ªÁªü -->
            <div class="achievements-section">
                <div class="achievements-header">
                    <h3>üèÜ ÊàêÂ∞±Á≥ªÁªü</h3>
                    <div style="color: #6c757d; font-size: 0.9em;" id="achievementCount">0/0 Â∑≤Ëß£ÈîÅ</div>
                </div>
                <div class="achievements-grid" id="achievementsGrid">
                    <!-- ÊàêÂ∞±Â∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
                </div>
            </div>

            <!-- Ê†áÁ≠æÈ°µ -->
            <div class="tabs">
                <button class="tab active" onclick="switchTab('history')">üìã ÂéÜÂè≤ËÆ∞ÂΩï</button>
                <button class="tab" onclick="switchTab('shop')">üè™ ÂÖëÊç¢ÂïÜÂ∫ó</button>
                <button class="tab" onclick="switchTab('stats')">üìä ÁªüËÆ°ÂàÜÊûê</button>
                <button class="tab" onclick="switchTab('settings')">‚öôÔ∏è Á≥ªÁªüËÆæÁΩÆ</button>
            </div>

            <!-- ÂéÜÂè≤ËÆ∞ÂΩïÊ†áÁ≠æÈ°µ -->
            <div id="history" class="tab-content active">
                <div class="history-section">
                    <div class="history-header">
                        <h3>üìã ÁßØÂàÜÂéÜÂè≤</h3>
                        <button class="btn-reset-filters" onclick="resetFilters()">üîÑ ÈáçÁΩÆÁ≠õÈÄâ</button>
                    </div>
                    
                    <!-- Á≠õÈÄâÂô®Âå∫Âüü -->
                    <div class="history-filters">
                        <div class="filter-group">
                            <label for="dateFilter">Êó∂Èó¥ËåÉÂõ¥Ôºö</label>
                            <select id="dateFilter" onchange="applyFilters()">
                                <option value="all">ÂÖ®ÈÉ®Êó∂Èó¥</option>
                                <option value="today">‰ªäÂ§©</option>
                                <option value="week">Êú¨Âë®</option>
                                <option value="month">Êú¨Êúà</option>
                                <option value="3months">Ëøë3‰∏™Êúà</option>
                                <option value="6months">Ëøë6‰∏™Êúà</option>
                                <option value="year">‰ªäÂπ¥</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label for="typeFilter">ÁßØÂàÜÁ±ªÂûãÔºö</label>
                            <select id="typeFilter" onchange="applyFilters()">
                                <option value="all">ÂÖ®ÈÉ®Á±ªÂûã</option>
                                <option value="earned">Ëé∑ÂæóÁßØÂàÜ</option>
                                <option value="spent">Êâ£ÂáèÁßØÂàÜ</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label for="reasonFilter">ÂéüÂõ†Á±ªÂà´Ôºö</label>
                            <select id="reasonFilter" onchange="applyFilters()">
                                <option value="all">ÂÖ®ÈÉ®ÂéüÂõ†</option>
                                <!-- Ëé∑ÂæóÂéüÂõ†ÈÄâÈ°πÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
                            </select>
                        </div>
                        
                        <div class="filter-status" id="filterStatus">
                            ÊòæÁ§∫ÂÖ®ÈÉ®ËÆ∞ÂΩï
                        </div>
                    </div>
                    
                    <!-- ÁªüËÆ°Ê¶ÇËßàÂå∫Âüü -->
                    <div class="history-stats">
                        <div class="stats-card">
                            <div class="stats-value" id="filteredTotalCount">0</div>
                            <div class="stats-label">Á≠õÈÄâËÆ∞ÂΩïÊï∞</div>
                        </div>
                        <div class="stats-card">
                            <div class="stats-value" id="filteredEarnedTotal">0</div>
                            <div class="stats-label">Ëé∑ÂæóÊÄªÊï∞</div>
                        </div>
                        <div class="stats-card">
                            <div class="stats-value" id="filteredSpentTotal">0</div>
                            <div class="stats-label">Êâ£ÂáèÊÄªÊï∞</div>
                        </div>
                        <div class="stats-card">
                            <div class="stats-value" id="filteredNetGain">0</div>
                            <div class="stats-label">ÂáÄÂ¢ûÈïø</div>
                        </div>
                    </div>
                    
                    <div class="history-list" id="historyList">
                        <div class="empty-history">
                            ËøòÊ≤°ÊúâÁßØÂàÜËÆ∞ÂΩïÔºåÂø´Êù•Ëé∑Âæó‰Ω†ÁöÑÁ¨¨‰∏Ä‰∏™ÁßØÂàÜÂêßÔºÅ
                        </div>
                    </div>
                </div>
                
                <!-- ÂéÜÂè≤Êï∞ÊçÆÂàÜÊûêÂå∫Âüü -->
                <div class="history-analysis">
                    <h3>üìä Êï∞ÊçÆÂàÜÊûê</h3>
                    <div class="analysis-tabs">
                        <button class="analysis-tab active" onclick="showAnalysisTab('category')">Á±ªÂà´ÂàÜÊûê</button>
                        <button class="analysis-tab" onclick="showAnalysisTab('trend')">Ë∂ãÂäøÂàÜÊûê</button>
                        <button class="analysis-tab" onclick="showAnalysisTab('monthly')">ÊúàÂ∫¶ÁªüËÆ°</button>
                    </div>
                    
                    <div id="categoryAnalysis" class="analysis-content active">
                        <div class="chart-container">
                            <h4>üéØ Ëé∑ÂæóÂéüÂõ†ÂàÜÂ∏É</h4>
                            <div id="earnedCategoryChart" class="mini-chart"></div>
                        </div>
                        <div class="chart-container">
                            <h4>üí∞ Êâ£ÂáèÂéüÂõ†ÂàÜÂ∏É</h4>
                            <div id="spentCategoryChart" class="mini-chart"></div>
                        </div>
                    </div>
                    
                    <div id="trendAnalysis" class="analysis-content">
                        <div class="chart-container">
                            <h4>üìà ÁßØÂàÜÂ¢ûÈïøË∂ãÂäø</h4>
                            <div id="trendChart" class="mini-chart"></div>
                        </div>
                    </div>
                    
                    <div id="monthlyAnalysis" class="analysis-content">
                        <div class="chart-container">
                            <h4>üìÖ ÊúàÂ∫¶ÁªüËÆ°ÂØπÊØî</h4>
                            <div id="monthlyChart" class="mini-chart"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ÁªüËÆ°ÂàÜÊûêÊ†áÁ≠æÈ°µ -->
            <div id="stats" class="tab-content">
                <div class="chart-section">
                    <h3 style="text-align: center; margin-bottom: 20px; color: var(--theme-text);">üìà ÊúÄËøë7Â§©ÁßØÂàÜË∂ãÂäø</h3>
                    <div class="chart-container" id="chartContainer">
                        <!-- ÂõæË°®Â∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
                    </div>
                </div>
            </div>

            <!-- ÂÖëÊç¢ÂïÜÂ∫óÊ†áÁ≠æÈ°µ -->
            <div id="shop" class="tab-content">
                <div class="shop-section">
                    <div class="shop-header">
                        <h3>üè™ ÁßØÂàÜÂÖëÊç¢ÂïÜÂ∫ó</h3>
                        <div class="shop-stats">
                            <div class="shop-stat-item">
                                <span class="shop-stat-label">ÂΩìÂâç‰ΩôÈ¢ù</span>
                                <span class="shop-stat-value" id="shopCurrentPoints">0</span>
                            </div>
                            <div class="shop-stat-item">
                                <span class="shop-stat-label">Â∑≤ÂÖëÊç¢</span>
                                <span class="shop-stat-value" id="shopTotalExchanged">0</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ÂïÜÂ∫óÁ≠õÈÄâÂô® -->
                    <div class="shop-filters">
                        <div class="filter-group">
                            <label for="categoryFilter">ÂïÜÂìÅÂàÜÁ±ªÔºö</label>
                            <select id="categoryFilter" onchange="filterShopItems()">
                                <option value="all">ÂÖ®ÈÉ®ÂàÜÁ±ª</option>
                                <option value="toys">üß∏ Áé©ÂÖ∑Á§ºÂìÅ</option>
                                <option value="books">üìö Â≠¶‰π†Áî®ÂìÅ</option>
                                <option value="food">üç≠ ÁæéÈ£üÈõ∂È£ü</option>
                                <option value="activities">üéâ Â®±‰πêÊ¥ªÂä®</option>
                                <option value="privileges">üëë ÁâπÊùÉÂ•ñÂä±</option>
                                <option value="custom">üé® ÂÆöÂà∂ÊúçÂä°</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="priceFilter">‰ª∑Ê†ºËåÉÂõ¥Ôºö</label>
                            <select id="priceFilter" onchange="filterShopItems()">
                                <option value="all">ÂÖ®ÈÉ®‰ª∑Ê†º</option>
                                <option value="low">1-50 ÁßØÂàÜ</option>
                                <option value="medium">51-100 ÁßØÂàÜ</option>
                                <option value="high">101-200 ÁßØÂàÜ</option>
                                <option value="premium">200+ ÁßØÂàÜ</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- ÂïÜÂ∫óÁâ©ÂìÅÁΩëÊ†º -->
                    <div class="shop-grid" id="shopGrid">
                        <!-- ÂïÜÂ∫óÁâ©ÂìÅÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
                    </div>
                    
                    <!-- ÂÖëÊç¢ÂéÜÂè≤ -->
                    <div class="shop-history">
                        <h4>üìã ÊàëÁöÑÂÖëÊç¢ËÆ∞ÂΩï</h4>
                        <div class="exchange-history-list" id="exchangeHistoryList">
                            <div class="empty-history">ËøòÊ≤°ÊúâÂÖëÊç¢ËÆ∞ÂΩïÔºåÂø´Êù•ÂÖëÊç¢ÂøÉ‰ª™ÁöÑÁâ©ÂìÅÂêßÔºÅ</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ËÆæÁΩÆÊ†áÁ≠æÈ°µ -->
            <div id="settings" class="tab-content">
                <div class="settings-section">
                    <h3>‚öôÔ∏è Á≥ªÁªüËÆæÁΩÆ</h3>
                    <div class="settings-grid">
                        <div class="input-group">
                            <label for="childNameInput">ÂßìÂêç</label>
                            <input type="text" id="childNameInput" placeholder="ËØ∑ËæìÂÖ•‰Ω†ÁöÑÂêçÂ≠ó">
                        </div>
                        <div class="input-group">
                            <label for="currencyInput">ÁßØÂàÜÂçï‰Ωç</label>
                            <select id="currencyInput" onchange="updateCurrencyPreview()">
                                <!-- ÁßØÂàÜÂçï‰ΩçÈÄâÈ°πÂ∞ÜÁî±JavaScriptÂä®ÊÄÅÁîüÊàê -->
                            </select>
                            <div id="currencyPreview" style="margin-top: 10px; padding: 10px; background: rgba(102, 126, 234, 0.1); border-radius: 8px; text-align: center;">
                                <span id="previewIcon" style="font-size: 1.5em;">‚≠ê</span>
                                <span id="previewName" style="margin-left: 8px; font-weight: bold;">ÊòüÊòü</span>
                            </div>
                        </div>
                        <div class="input-group">
                            <label for="passwordInput">Êâ£ÂáèÂØÜÁ†Å</label>
                            <input type="password" id="passwordInput" placeholder="ËØ∑ËÆæÁΩÆÊâ£ÂáèÈ™åËØÅÂØÜÁ†Å" maxlength="8">
                            <div style="font-size: 0.85em; color: #6c757d; margin-top: 5px;">Áî®‰∫éÈ™åËØÅÁßØÂàÜÊâ£ÂáèÔºå4-8‰ΩçÊï∞Â≠óÊàñÂ≠óÊØç</div>
                        </div>

                    </div>
                    <button class="btn btn-save-settings" onclick="saveSettings()">üíæ ‰øùÂ≠òËÆæÁΩÆ</button>
                    
                    <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #dee2e6;">
                        <div class="input-group">
                            <label>ÁÆ°ÁêÜÂëòÂäüËÉΩ</label>
                            <button class="btn btn-admin" onclick="openAdminPanel()" style="width: 100%; background: var(--primary-gradient);">üîê ÁÆ°ÁêÜÂëòÈù¢Êùø</button>
                        </div>
                    </div>
                    

                </div>
            </div>
            </div>
        </div>
    </div>

    <!-- ÂÆ∂ÈïøÊéßÂà∂Èù¢Êùø -->
    <div class="admin-panel" id="adminPanel">
        <div class="admin-content">
            <div class="admin-header">
                <h2>üîê ÂÆ∂ÈïøÊéßÂà∂Èù¢Êùø</h2>
                <button class="btn-clear" onclick="closeAdminPanel()">‚úï ÂÖ≥Èó≠</button>
            </div>
            
            <div class="admin-stats">
                <div class="admin-stat-card">
                    <div class="admin-stat-value" id="adminTotalPoints">0</div>
                    <div class="admin-stat-label">ÂΩìÂâçÊÄªÁßØÂàÜ</div>
                </div>
                <div class="admin-stat-card">
                    <div class="admin-stat-value" id="adminTotalEarned">0</div>
                    <div class="admin-stat-label">Á¥ØËÆ°Ëé∑Âæó</div>
                </div>
                <div class="admin-stat-card">
                    <div class="admin-stat-value" id="adminTotalSpent">0</div>
                    <div class="admin-stat-label">Á¥ØËÆ°Êâ£Âáè</div>
                </div>
                <div class="admin-stat-card">
                    <div class="admin-stat-value" id="adminActivityDays">0</div>
                    <div class="admin-stat-label">Ê¥ªË∑ÉÂ§©Êï∞</div>
                </div>
            </div>

            <div style="margin-top: 30px;">
                <h3 style="margin-bottom: 20px; color: var(--theme-text);">üì• Êï∞ÊçÆÁÆ°ÁêÜ</h3>
                <div class="settings-grid">
                    <div class="input-group">
                        <label>ÂØºÂá∫Êï∞ÊçÆ</label>
                        <button class="btn btn-export" onclick="exportData()" style="width: 100%; background: var(--primary-gradient);">üì• ÂØºÂá∫ÊâÄÊúâÊï∞ÊçÆ</button>
                    </div>
                    <div class="input-group">
                        <label>Êñá‰ª∂ÂØºÂÖ•</label>
                        <input type="file" id="importFileInput" accept=".json,.txt" style="display: none;" onchange="importData()">
                        <button class="btn btn-save-settings" onclick="document.getElementById('importFileInput').click()" style="width: 100%; background: var(--primary-gradient);">üì§ Êñá‰ª∂ÂØºÂÖ•</button>
                    </div>
                    <div class="input-group">
                        <label>ÊñáÊú¨ÂØºÂÖ•</label>
                        <button class="btn btn-admin" onclick="showTextImportDialog()" style="width: 100%; background: var(--warning-gradient);">üìã ÊñáÊú¨ÂØºÂÖ•</button>
                    </div>
                </div>
            </div>

            <div style="margin-top: 30px;">
                <h3 style="margin-bottom: 20px; color: var(--theme-text);">üõçÔ∏è ÂïÜÂ∫óÁâ©ÂìÅÁÆ°ÁêÜ</h3>
                
                <!-- Áâ©ÂìÅË°®ÂçïÂå∫Âüü -->
                <div class="shop-form-container" style="background: rgba(255,255,255,0.9); padding: 20px; border-radius: 12px; margin-bottom: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); border: 1px solid #e9ecef;">
                    <h4 id="shopFormTitle" style="margin-bottom: 15px; color: var(--theme-text);">Ê∑ªÂä†Êñ∞Áâ©ÂìÅ</h4>
                    <form id="shopItemForm" onsubmit="return false;">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                            <div class="input-group">
                                <label for="shopItemName">Áâ©ÂìÅÂêçÁß∞</label>
                                <input type="text" id="shopItemName" placeholder="ËæìÂÖ•Áâ©ÂìÅÂêçÁß∞" required style="width: 100%; padding: 12px; border: 2px solid #dee2e6; border-radius: 8px; font-size: 14px;">
                            </div>
                            <div class="input-group">
                                <label for="shopItemIcon">ÂõæÊ†á(emoji)</label>
                                <input type="text" id="shopItemIcon" placeholder="üéÅ" value="üéÅ" required style="width: 100%; padding: 12px; border: 2px solid #dee2e6; border-radius: 8px; font-size: 14px;">
                            </div>
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                            <div class="input-group">
                                <label for="shopItemCategory">ÂàÜÁ±ª</label>
                                <select id="shopItemCategory" required style="width: 100%; padding: 12px; border: 2px solid #dee2e6; border-radius: 8px; font-size: 14px;">
                                    <option value="">ÈÄâÊã©ÂàÜÁ±ª</option>
                                    <option value="toys">üß∏ Áé©ÂÖ∑Á§ºÂìÅ</option>
                                    <option value="books">üìö Â≠¶‰π†Áî®ÂìÅ</option>
                                    <option value="food">üç≠ ÁæéÈ£üÈõ∂È£ü</option>
                                    <option value="activities">üéâ Â®±‰πêÊ¥ªÂä®</option>
                                    <option value="privileges">üëë ÁâπÊùÉÂ•ñÂä±</option>
                                    <option value="custom">üé® ÂÆöÂà∂ÊúçÂä°</option>
                                </select>
                            </div>
                            <div class="input-group">
                                <label for="shopItemPrice">‰ª∑Ê†º(ÁßØÂàÜ)</label>
                                <input type="number" id="shopItemPrice" placeholder="ËæìÂÖ•‰ª∑Ê†º" min="1" required style="width: 100%; padding: 12px; border: 2px solid #dee2e6; border-radius: 8px; font-size: 14px;">
                            </div>
                        </div>
                        <div class="input-group">
                            <label for="shopItemDesc">Áâ©ÂìÅÊèèËø∞</label>
                            <textarea id="shopItemDesc" placeholder="ËæìÂÖ•Áâ©ÂìÅÊèèËø∞" rows="3" style="width: 100%; padding: 12px; border: 2px solid #dee2e6; border-radius: 8px; font-size: 14px; resize: vertical;"></textarea>
                        </div>
                        <div style="display: flex; gap: 10px;">
                            <button type="button" onclick="submitShopItem()" style="flex: 1; padding: 12px; border: none; border-radius: 8px; background: var(--success-gradient); color: white; font-weight: 600; cursor: pointer;">Ê∑ªÂä†Áâ©ÂìÅ</button>
                            <button type="button" id="cancelShopEdit" onclick="clearShopForm()" style="flex: 1; padding: 12px; border: 2px solid #dee2e6; border-radius: 8px; background: white; color: #6c757d; font-weight: 600; cursor: pointer; display: none;">ÂèñÊ∂à</button>
                        </div>
                    </form>
                </div>
                
                <!-- Áâ©ÂìÅÁÆ°ÁêÜÂàóË°® -->
                <div id="shopItemsManageList" style="background: rgba(255,255,255,0.9); border-radius: 12px; padding: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); border: 1px solid #e9ecef;">
                    <div style="margin-bottom: 15px;">
                        <h4 style="color: var(--theme-text); margin-bottom: 10px;">ÂΩìÂâçÂïÜÂ∫óÁâ©ÂìÅÂàóË°®</h4>
                        <div style="color: #6c757d; font-size: 14px;">ÁÆ°ÁêÜÊâÄÊúâÂèØÂÖëÊç¢ÁöÑÂïÜÂ∫óÁâ©ÂìÅ</div>
                    </div>
                    <div id="shopItemsList" style="max-height: 300px; overflow-y: auto;">
                        <!-- Áâ©ÂìÅÂàóË°®Â∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
                    </div>
                </div>
            </div>

            <div style="margin-top: 30px;">
                <h3 style="margin-bottom: 20px; color: var(--theme-text);">‚ö†Ô∏è ÁÆ°ÁêÜÊìç‰Ωú</h3>
                <div class="settings-grid">
                    <div class="input-group">
                        <label>ÈáçÁΩÆÊâÄÊúâÊï∞ÊçÆ</label>
                        <button class="btn btn-subtract" onclick="resetAllData()" style="width: 100%; background: var(--danger-gradient);">üóëÔ∏è ÈáçÁΩÆÁßØÂàÜÁ≥ªÁªü</button>
                    </div>
                    <div class="input-group">
                        <label>ÁîüÊàêËØ¶ÁªÜÊä•Âëä</label>
                        <button class="btn btn-export" onclick="generateReport()" style="width: 100%; background: var(--primary-gradient);">üìä ÁîüÊàêÊä•Âëä</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        console.log('ÁªàÊûÅÁßØÂàÜÁ≥ªÁªüËÑöÊú¨ÂºÄÂßãÂä†ËΩΩ...');
        
        // ÁßØÂàÜÈÖçÁΩÆÂØπË±° - Ê†πÊçÆÂéüÂõ†Ëá™Âä®ËÆæÁΩÆÁßØÂàÜÊï∞Èáè
        const pointsConfig = {
            // Â≠¶‰π†ÊàêÈïøÁ±ª (5-100ÂàÜ)
            earn: {
                'ÂÆåÊàê‰Ωú‰∏ö': 10,
                'ÊåâÊó∂ÂÆåÊàê‰Ωú‰∏ö': 15,
                '‰∏ªÂä®Â≠¶‰π†': 20,
                'ËÄÉËØï‰ºòÁßÄ': 100,
                '‰∏ªÂä®ÈòÖËØª': 5,
                'ËØæÂ†ÇË°®Áé∞Â•Ω': 15,
                'ÂÆåÊàêÈ¢ùÂ§ñÁªÉ‰π†': 25,
                'È¢Ñ‰π†Êñ∞ËØæ': 12,
                'Â§ç‰π†Â∑©Âõ∫': 8,
                'ËÉåËØµËØæÊñá': 10,
                'ÈªòÂÜôÂçïËØç': 8,
                'ÂÆåÊàêÊâãÂ∑•‰Ωú‰∏ö': 15,
                'ÁßëÂ≠¶ÂÆûÈ™å': 30,
                'ÁªÉÂ≠ó': 5,
                
                // ÂÆ∂Âä°Âä≥Âä®Á±ª (3-15ÂàÜ)
                'Â∏ÆÂä©ÂÆ∂Âä°': 5,
                'Ê¥óÁ¢ó': 3,
                'Êâ´Âú∞': 3,
                'ÊãñÂú∞': 4,
                'Êï¥ÁêÜÊàøÈó¥': 6,
                'Êî∂ÊãæÁé©ÂÖ∑': 5,
                'ÊôæË°£Êúç': 4,
                'Âè†Ë°£Êúç': 3,
                'ÂÄíÂûÉÂúæ': 2,
                'Êì¶Ê°åÂ≠ê': 3,
                'ÂáÜÂ§áÈ§êÂÖ∑': 2,
                'ÁÖßÈ°æÊ§çÁâ©': 8,
                
                // Ë°å‰∏∫Ë°®Áé∞Á±ª (2-20ÂàÜ)
                'Ë°®Áé∞‰ºòÁßÄ': 15,
                'Êó©Ëµ∑': 10,
                'ÊåâÊó∂Áù°Ëßâ': 8,
                'ÈÅµÂÆàËßÑÂàô': 12,
                '‰∏ªÂä®ÈÅìÊ≠â': 10,
                'ËØöÂÆûÂÆà‰ø°': 20,
                '‰∏çÊåëÈ£ü': 5,
                '‰∏ªÂä®ÊâøËÆ§ÈîôËØØ': 15,
                '‰∏çÊííË∞é': 12,
                'ÊåâÊó∂Ëµ∑Â∫ä': 8,
                'Ëá™Â∑±Á©øË°£Êúç': 5,
                'Ëá™Â∑±Ê¥óÊº±': 5,
                '‰∏ç‰π±ÂèëËÑæÊ∞î': 10,
                
                // ÂÅ•Â∫∑ËøêÂä®Á±ª (3-25ÂàÜ)
                'ÈîªÁÇºË∫´‰Ωì': 10,
                'ÂÅ•Â∫∑È•ÆÈ£ü': 8,
                '‰ΩìËÇ≤ÈîªÁÇº': 15,
                'Êà∑Â§ñËøêÂä®': 12,
                'Ê∏∏Ê≥≥': 20,
                'È™ëËá™Ë°åËΩ¶': 15,
                'Ë∑ëÊ≠•': 8,
                'Ë∑≥Áª≥': 10,
                'ÊâìÁØÆÁêÉ': 18,
                'Ë∏¢Ë∂≥ÁêÉ': 18,
                'ÁªÉËàûËπà': 15,
                'ÁªÉ‰πêÂô®': 25,
                
                // Á§æ‰∫§ÂìÅÂæ∑Á±ª (5-30ÂàÜ)
                'ÂàÜ‰∫´Áé©ÂÖ∑': 8,
                'Â∏ÆÂä©‰ªñ‰∫∫': 15,
                'Â∏ÆÂä©ÂêåÂ≠¶': 10,
                'ÂÅöÂøóÊÑøÊúçÂä°': 25,
                'Â≠ùÈ°∫Áà∂ÊØç': 30,
                'ÁÖßÈ°æÂºüÂºüÂ¶πÂ¶π': 20,
                'ÁÖßÈ°æÂÆ†Áâ©': 12,
                'Â∞äËÄÅÁà±Âπº': 15,
                'ÂÖ≥ÂøÉ‰ªñ‰∫∫': 10,
                '‰∏ªÂä®ÊâìÊãõÂëº': 5,
                'ÊúâÁ§ºË≤å': 8,
                '‰∏çËØ¥ËÑèËØù': 10,
                '‰∏çÊ¨∫Ë¥üÂº±Â∞è': 15,
                'ÂÆâÊÖ∞‰ªñ‰∫∫': 12,
                'ÂàÜ‰∫´Èõ∂È£ü': 6,
                
                // ÂàõÈÄ†Ëâ∫ÊúØÁ±ª (5-50ÂàÜ)
                'Âàõ‰Ωú‰ΩúÂìÅ': 20,
                'ÁîªÁîª': 15,
                'ÊâãÂ∑•Âà∂‰Ωú': 18,
                'ÂÜô‰Ωú': 25,
                'Âî±Ê≠å': 12,
                'Ë∑≥Ëàû': 15,
                'ÂºπÁê¥': 20,
                'ÂÅöÊâãÂ∑•': 12,
                'ÊëÑÂΩ±': 30,
                'ÂÅöÊ®°Âûã': 25,
                'Âà∂‰ΩúË¥∫Âç°': 15,
                'ÂèÇÂä†Ë°®Êºî': 35,
                
                // ÂÖ¥Ë∂£Áà±Â•ΩÁ±ª (5-40ÂàÜ)
                'ÂèÇÂä†ÊØîËµõ': 30,
                'Â≠¶‰π†Êñ∞ÊäÄËÉΩ': 25,
                'ÁªÉ‰π†ÊâçËâ∫': 20,
                'ÂèÇÂä†Ê¥ªÂä®': 15,
                'ÊãìÂ±ïÁü•ËØÜ': 20,
                'Êé¢Á¥¢Êñ∞‰∫ãÁâ©': 18,
                'Â≠¶ÂÅöËèú': 15,
                'Â≠¶È™ëËΩ¶': 10,
                'Â≠¶Ê∏∏Ê≥≥': 12,
                'Â≠¶Â§ñËØ≠': 25,
                
                // ÁâπÊÆäÊàêÂ∞±Á±ª (10-50ÂàÜ)
                'ËøûÁª≠Ëé∑ÂæóÁßØÂàÜ': 30,
                'ÂÆåÊàêÁõÆÊ†á': 25,
                'Â∏ÆÂä©ÂÆ∂Â∫≠': 20,
                'ÂÖ≥ÂøÉÁéØÂ¢É': 15,
                'ËäÇÁ∫¶Áî®Ê∞¥': 10,
                'ËäÇÁ∫¶Áî®Áîµ': 10,
                'ÂûÉÂúæÂàÜÁ±ª': 12,
                '‰øùÊä§Âä®Áâ©': 15,
                'ÂÖ≥Áà±‰ªñ‰∫∫': 18,
                'ÂèÇ‰∏éÂÖ¨Áõä': 25,
                
                // üî• Êñ∞Â¢ûÂ≠¶‰π†ÊàêÈïøÁ±ª (+15È°π)
                'ÂÆåÊàêÁΩëËØæÂ≠¶‰π†': 20,
                'ÂèÇÂä†Â≠¶‰π†Â∞èÁªÑ': 15,
                'Âà∂‰ΩúÊÄùÁª¥ÂØºÂõæ': 12,
                'ÂÆåÊàêÊºîËÆ≤‰Ωú‰∏ö': 25,
                'ÂèÇÂä†Ëæ©ËÆ∫ÊØîËµõ': 30,
                'Êï¥ÁêÜÈîôÈ¢òÊú¨': 10,
                'ÂÆåÊàêÁ†îÁ©∂Êä•Âëä': 35,
                'Â≠¶‰π†ÁºñÁ®ã': 25,
                'ÂÆåÊàêÂÆûÈ™åÊä•Âëä': 20,
                'ÂèÇÂä†Áü•ËØÜÁ´ûËµõ': 30,
                'Ëá™‰∏ªÊé¢Á©∂Â≠¶‰π†': 20,
                'ÂÆåÊàêËØª‰π¶Á¨îËÆ∞': 15,
                'ËÉåËØµÂè§ËØóËØç': 8,
                'ÁªÉ‰π†Âè£ÁÆó': 5,
                'ÂÆåÊàêÊï∞Â≠¶Â∫îÁî®È¢ò': 15,
                
                // üè† Êñ∞Â¢ûÂÆ∂Âä°Âä≥Âä®Á±ª (+12È°π)
                'Êï¥ÁêÜ‰π¶Êüú': 8,
                'Ê∏ÖÊ¥ÅÂç´ÁîüÈó¥': 10,
                'Ê¥óËΩ¶': 15,
                'Êï¥ÁêÜÈûãÊüú': 6,
                'Êì¶ÁéªÁíÉ': 8,
                'Êï¥ÁêÜÂÜ∞ÁÆ±': 10,
                'ÊâìÊâ´Èò≥Âè∞': 7,
                'Êï¥ÁêÜË°£Êüú': 12,
                'Ê∏ÖÊ¥ÅÂé®Êàø': 10,
                'Êï¥ÁêÜÂÇ®Áâ©Èó¥': 15,
                'Êõ¥Êç¢Â∫äÂçïË¢´ÁΩ©': 8,
                'Êî∂ÊãæÈ§êÂêéÂé®Êàø': 5,
                
                // ‚≠ê Êñ∞Â¢ûË°å‰∏∫Ë°®Áé∞Á±ª (+10È°π)
                '‰∏ªÂä®Â∏ÆÂøô': 10,
                '‰øùÊåÅÂÆâÈùô': 8,
                'ËÄêÂøÉÁ≠âÂæÖ': 10,
                'ÊéßÂà∂ÊÉÖÁª™': 15,
                'ÁßØÊûÅÂèÇ‰∏é': 12,
                '‰∏ªÂä®ÂàÜ‰∫´ÁªèÈ™å': 15,
                'ÈÅµÂÆàÊó∂Èó¥': 10,
                'Áà±Êä§ÂÖ¨Áâ©': 8,
                'ËäÇÁ∫¶ËµÑÊ∫ê': 10,
                '‰øùÊåÅÂç´Áîü‰π†ÊÉØ': 8,
                
                // üèÉ Êñ∞Â¢ûÂÅ•Â∫∑ËøêÂä®Á±ª (+8È°π)
                'Êô®Ë∑ë': 15,
                'ÂÅöÁëú‰ºΩ': 12,
                'ÊâìÁæΩÊØõÁêÉ': 15,
                'Êâì‰πí‰πìÁêÉ': 15,
                'Áà¨Â±±': 25,
                'ÊªëÂÜ∞ÊªëÈõ™': 20,
                'ÂèÇÂä†‰ΩìËÇ≤ËØæÂ§ñÁè≠': 20,
                'ÂÆåÊàê‰ΩìËÇ≤ÊâìÂç°': 10,
                
                // ü§ù Êñ∞Â¢ûÁ§æ‰∫§ÂìÅÂæ∑Á±ª (+12È°π)
                'Ë∞ÉËß£ÁüõÁõæ': 20,
                'ÂÄæÂê¨‰ªñ‰∫∫': 10,
                'ÈºìÂä±‰ªñ‰∫∫': 12,
                'Âõ¢ÈòüÂêà‰Ωú': 15,
                'ÂÖ¨ÂÖ±Âú∫ÂêàÁ§ºË≤å': 8,
                'Â∏ÆÂä©Êñ∞ÂêåÂ≠¶': 15,
                'Èô™‰º¥ËÄÅ‰∫∫': 20,
                'ÁÖßÈ°æÁîüÁóÖÂÆ∂‰∫∫': 25,
                'ÂèÇÂä†Á§æÂå∫Ê¥ªÂä®': 18,
                '‰øùÊä§Âº±Â∞è': 15,
                'Áª¥Êä§ÂÖ¨ÂÖ±Áß©Â∫è': 10,
                'Áà±Êä§ÂÖ¨ÂÖ±ËÆæÊñΩ': 8
            },
            
            // Êâ£ÂáèÁ±ª (2-50ÂàÜ)
            spend: {
                // Â•ñÂä±ÂÖëÊç¢Á±ª (5-30ÂàÜ)
                '‰π∞Áé©ÂÖ∑': 20,
                '‰π∞Èõ∂È£ü': 10,
                '‰π∞ÊñáÂÖ∑': 8,
                '‰π∞‰π¶Êú¨': 15,
                '‰π∞Ë°£Êúç': 25,
                '‰π∞ÁîµÂ≠ê‰∫ßÂìÅ': 50,
                '‰π∞Ê∏∏Êàè': 30,
                'ÁâπÊÆäÂ•ñÂä±': 25,
                'ÂéªÊ∏∏‰πêÂõ≠': 40,
                'ÁúãÂä®ÁîªÁâá': 5,
                'Áé©Ê∏∏ÊàèÊó∂Èó¥': 8,
                'È¢ùÂ§ñÈõ∂Ëä±Èí±': 15,
                'Â∞èÁ§ºÂìÅ': 12,
                
                // Â≠¶‰π†Ê∂àË¥πÁ±ª (3-25ÂàÜ)
                'ÁîµÂ≠ê‰π¶': 8,
                'Â≠¶‰π†Áî®ÂìÅ': 10,
                '‰π∞ËØæÁ®ã': 35,
                '‰π∞ËΩØ‰ª∂': 20,
                '‰π∞ËµÑÊñô': 12,
                'ÂüπËÆ≠Ë¥π': 50,
                '‰π¶Á±çË¥πÁî®': 15,
                'ÊâìÂç∞ËµÑÊñô': 3,
                
                // Â®±‰πêÊ¥ªÂä®Á±ª (5-40ÂàÜ)
                'Â®±‰πêÊ¥ªÂä®': 15,
                'Êà∑Â§ñÊ¥ªÂä®': 20,
                'ÁúãÁîµÂΩ±': 25,
                'ËÅöÈ§ê': 30,
                '‰π∞Á•®': 18,
                'ÂèÇÂä†Ê¥ªÂä®': 22,
                'Ë¥≠‰π∞‰ºöÂëò': 15,
                'ËÆ¢ÈòÖÊúçÂä°': 12,
                'ÂÖÖÂÄº': 10,
                
                // Áà±ÂøÉÊçêËµ†Á±ª (5-30ÂàÜ)
                'ÊçêÊ¨æ': 20,
                'ÊçêÁé©ÂÖ∑': 15,
                'Êçê‰π¶': 10,
                'Áà±ÂøÉÊ¥ªÂä®': 18,
                'Â∏ÆÂä©‰ªñ‰∫∫': 12,
                'ÊÖàÂñÑÊçêËµ†': 25,
                'ÂÖ¨ÁõäÊ¥ªÂä®': 15,
                
                // ÊÉ©ÁΩöÊâ£Èô§Á±ª (5-50ÂàÜ)
                'Êú™ÂÆåÊàê‰Ωú‰∏ö': 15,
                '‰∏çÂê¨ËØù': 10,
                '‰π±ÂèëËÑæÊ∞î': 20,
                'ÊííË∞é': 25,
                '‰∏çËØöÂÆû': 30,
                'Ê¨∫Ë¥ü‰ªñ‰∫∫': 40,
                'ÊçüÂùèÁâ©ÂìÅ': 35,
                '‰∏çÈÅµÂÆàËßÑÂàô': 15,
                '‰∏çÊåâÊó∂Áù°Ëßâ': 12,
                'ÊåëÈ£ü': 8,
                '‰∏çÊï¥ÁêÜÊàøÈó¥': 10,
                '‰π±Êâî‰∏úË•ø': 12,
                '‰∏çÁ§ºË≤å': 15,
                'ËØ¥ËÑèËØù': 18,
                '‰∏çÂ∞äÈáç‰ªñ‰∫∫': 25,
                'Êµ™Ë¥πÈ£üÁâ©': 15,
                '‰∏çÁèçÊÉúÁâ©ÂìÅ': 20,
                'ËøüÂà∞': 10,
                'Êó©ÈÄÄ': 15,
                '‰∏ç‰∏ìÂøÉ': 12,
                '‰ΩúÂºä': 50,
                
                // ÁîüÊ¥ªÊ∂àË¥πÁ±ª (3-20ÂàÜ)
                '‰∫§ÈÄöË¥π': 5,
                'È§êË¥π': 10,
                'Êó•Áî®ÂìÅ': 8,
                'Áª¥‰øÆË¥π': 15,
                'ÂåªÁñóË¥π': 20,
                'ÁêÜÂèë': 6,
                'Ê¥óÊæ°Áî®ÂìÅ': 4,
                
                // üéÅ Êñ∞Â¢ûÂ•ñÂä±ÂÖëÊç¢Á±ª (+18È°π)
                '‰π∞ËØæÂ§ñ‰π¶': 18,
                '‰π∞ÁõäÊô∫Áé©ÂÖ∑': 15,
                '‰π∞ÊãºË£ÖÊ®°Âûã': 25,
                '‰π∞‰πêÈ´ò': 30,
                '‰π∞ÊâãÂäûÊ®°Âûã': 40,
                '‰π∞Êî∂ËóèÂìÅ': 35,
                '‰π∞ËøêÂä®Áî®ÂìÅ': 20,
                '‰π∞‰πêÂô®': 50,
                'ÂéªÊ∏∏‰πêÂõ≠': 35,
                'ÂéªÂçöÁâ©È¶Ü': 15,
                'ÂéªÂä®Áâ©Âõ≠': 20,
                'ÂéªÁßëÊäÄÈ¶Ü': 18,
                'Ë¥≠‰π∞ÊñáÂÖ∑Â•óË£Ö': 12,
                '‰π∞ÊâãÊú∫ÈÖç‰ª∂': 25,
                '‰π∞Êï∞Á†Å‰∫ßÂìÅ': 60,
                'Ë¥≠‰π∞Ê∏∏ÊàèÂë®Ëæπ': 30,
                'Ë¥≠‰π∞Âä®Êº´ÂïÜÂìÅ': 20,
                'Ë¥≠‰π∞Êî∂ËóèÂç°Áâá': 15,
                
                // üìö Êñ∞Â¢ûÂ≠¶‰π†Ê∂àË¥πÁ±ª (+12È°π)
                'Âú®Á∫øËØæÁ®ã': 40,
                'Â≠¶‰π†ËΩØ‰ª∂': 25,
                'ÊïôËæÖËµÑÊñô': 18,
                'È¢òÂ∫ìÈ¢òÈõÜ': 15,
                'Â≠¶‰π†APP‰ºöÂëò': 20,
                'ÁΩëËØæÂπ≥Âè∞‰ºöÂëò': 30,
                'ÁîµÂ≠êËØçÂÖ∏': 35,
                'Â≠¶‰π†Â∑•ÂÖ∑': 12,
                'Êä•ÂÖ¥Ë∂£Áè≠': 45,
                'Ë¥≠‰π∞Â≠óÂ∏ñ': 8,
                'Ë¥≠‰π∞Â≠¶‰π†Ê®°Âûã': 25,
                'ÂèÇÂä†Â§è‰ª§Ëê•': 50,
                
                // üéâ Êñ∞Â¢ûÂ®±‰πêÊ¥ªÂä®Á±ª (+15È°π)
                'KTVÂî±Ê≠å': 25,
                'ÁîµÂΩ±Èô¢ÁúãÁîµÂΩ±': 20,
                '‰∏ªÈ¢ò‰πêÂõ≠': 40,
                'ÂÆ§ÂÜÖÊ∏∏‰πêÂú∫': 25,
                'Ë¥≠‰π∞Ê∏∏ÊàèÂÖÖÂÄº': 15,
                'Ë¥≠‰π∞ËßÜÈ¢ë‰ºöÂëò': 15,
                'Ë¥≠‰π∞Èü≥‰πê‰ºöÂëò': 12,
                'ÂèÇÂä†Ë°®ÊºîÊ¥ªÂä®': 30,
                'Ë¥≠‰π∞cosplayÈÅìÂÖ∑': 35,
                'Ë¥≠‰π∞Êî∂ËóèÁé©ÂÖ∑': 28,
                'ÂèÇÂä†Á§æÂõ¢Ê¥ªÂä®': 15,
                'Ë¥≠‰π∞Ëâ∫ÊúØÁî®ÂìÅ': 18,
                'Ë¥≠‰π∞ÊâãÂ∑•ÊùêÊñô': 12,
                'Ë¥≠‰π∞ÊëÑÂΩ±ËÆæÂ§á': 45,
                'ÂèÇÂä†ÊØîËµõÊä•ÂêçË¥π': 20,
                
                // ‚ù§Ô∏è Êñ∞Â¢ûÁà±ÂøÉÊçêËµ†Á±ª (+8È°π)
                'ÊçêËµ†‰π¶Á±ç': 12,
                'ÊçêËµ†Ë°£Áâ©': 15,
                'Â∏ÆÂä©Âõ∞ÈöæÂêåÂ≠¶': 10,
                'ÂèÇÂä†‰πâÂçñÊ¥ªÂä®': 18,
                'Ë¥≠‰π∞ÊÖàÂñÑÂïÜÂìÅ': 15,
                'ÂêëÁÅæÂå∫ÊçêÊ¨æ': 25,
                'ÊîØÊåÅÂÖ¨ÁõäÈ°πÁõÆ': 20,
                'ÂèÇ‰∏éÂøóÊÑøÊúçÂä°': 8,
                
                // ‚ö†Ô∏è Êñ∞Â¢ûÊÉ©ÁΩöÊâ£Èô§Á±ª (+20È°π)
                'ÊçüÂùèÂÖ¨ÂÖ±Áâ©ÂìÅ': 30,
                '‰∏çÊåâÊó∂ÂÅö‰Ωú‰∏ö': 12,
                '‰∏äËØæËÆ≤ËØù': 10,
                '‰∏ç‰∏ìÂøÉÂê¨ËÆ≤': 8,
                '‰∏çÂ∞äÈáçËÄÅÂ∏à': 25,
                'Âú®ÂÖ¨ÂÖ±Âú∫ÊâÄÂ§ßÂ£∞ÂñßÂìó': 12,
                '‰∏çÁèçÊÉúÈ£üÁâ©': 10,
                '‰π±‰∏¢ÂûÉÂúæ': 8,
                'ÊçüÂùèÂêåÂ≠¶Áâ©ÂìÅ': 35,
                '‰∏çÈÅµÂÆàÊ∏∏ÊàèËßÑÂàô': 10,
                'ÊìÖËá™ÊãøÂèñ‰ªñ‰∫∫Áâ©ÂìÅ': 25,
                '‰∏çÊâøËÆ§ÈîôËØØ': 20,
                '‰∏çÊåâËßÑÂÆö‰ΩøÁî®ÊâãÊú∫': 15,
                '‰∏çÊï¥ÁêÜ‰∏™‰∫∫Áâ©ÂìÅ': 8,
                'Êµ™Ë¥πÊ∞¥ËµÑÊ∫ê': 10,
                'Êµ™Ë¥πÁîµÂäõËµÑÊ∫ê': 8,
                '‰∏çÊåâÊó∂ÂÆåÊàê‰ªªÂä°': 12,
                'ÊäÑË¢≠‰Ωú‰∏ö': 30,
                'Âú®Â¢ô‰∏ä‰π±Ê∂Ç‰π±Áîª': 20,
                '‰∏çÂ∞äÈáçÈïøËæà': 25,
                
                // üè† Êñ∞Â¢ûÁîüÊ¥ªÊ∂àË¥πÁ±ª (+10È°π)
                'Ë¥≠‰π∞ÁîüÊ¥ªÁî®ÂìÅ': 8,
                'Ë¥≠‰π∞Èõ∂È£üÈ•ÆÊñô': 5,
                'Ë¥≠‰π∞‰∏™‰∫∫Êä§ÁêÜÁî®ÂìÅ': 12,
                'Ë¥≠‰π∞Â∫ä‰∏äÁî®ÂìÅ': 15,
                'Ë¥≠‰π∞ÂÆ∂ÂÖ∑Ë£ÖÈ•∞': 20,
                'Ë¥≠‰π∞ÁîµÂ≠êËÆæÂ§á': 45,
                'Ë¥≠‰π∞‰∫§ÈÄöÂ∑•ÂÖ∑': 30,
                'Ë¥≠‰π∞Ë£ÖÈ•∞ÂìÅ': 15,
                'Ë¥≠‰π∞ÂÅ•Ë∫´Âô®Êùê': 25,
                'Ë¥≠‰π∞ËøêÂä®ÊúçË£Ö': 18
            }
        };

        // ÂÖ®Â±ÄÊï∞ÊçÆÂØπË±°
        let pointsData = {
            currentPoints: 0,
            totalEarned: 0,
            totalSpent: 0,
            lastUpdated: null,
            history: [],
            settings: {
                childName: 'Â∞èÊúãÂèã',
                currency: 'ÁßØÂàÜ',
                notifications: true,
                theme: 'default',
                password: '',
                passwordEnabled: false
            },
            achievements: {
                firstEarn: false,
                points50: false,
                points100: false,
                points500: false,
                firstSpend: false,
                dailyActive: false,
                consistency3: false
            },
            shop: {
                totalExchanged: 0,
                exchangeHistory: [],
                items: [
                    // Áé©ÂÖ∑Á§ºÂìÅÁ±ª
                    { id: 1, name: 'Á≤æÁæéÁé©ÂÖ∑ËΩ¶', icon: 'üöó', category: 'toys', price: 50, description: '‰∏ÄËæÜÁ≤æÁæéÁöÑÁé©ÂÖ∑Â∞èÊ±ΩËΩ¶ÔºåÂèØ‰ª•Êé®ÁùÄÁé©' },
                    { id: 2, name: 'ÊØõÁªíÁé©ÂÖ∑ÁÜä', icon: 'üß∏', category: 'toys', price: 80, description: 'ÊüîËΩØÁöÑÊØõÁªíÁé©ÂÖ∑ÁÜäÔºåÈô™‰º¥‰Ω†Áù°Ëßâ' },
                    { id: 3, name: '‰πêÈ´òÁßØÊú®', icon: 'üß±', category: 'toys', price: 120, description: 'ÂàõÊÑè‰πêÈ´òÁßØÊú®Â•óË£ÖÔºåÊøÄÂèëÂàõÈÄ†Âäõ' },
                    { id: 4, name: 'ÈÅ•ÊéßÈ£ûÊú∫', icon: '‚úàÔ∏è', category: 'toys', price: 200, description: 'ÂèØ‰ª•È£ûË°åÁöÑÈÅ•ÊéßÂ∞èÈ£ûÊú∫' },
                    { id: 5, name: 'ÊãºÂõæÊ∏∏Êàè', icon: 'üß©', category: 'toys', price: 60, description: 'ÊúâË∂£ÁöÑÊãºÂõæÊ∏∏ÊàèÔºåÈîªÁÇºËßÇÂØüÂäõ' },
                    
                    // Â≠¶‰π†Áî®ÂìÅÁ±ª
                    { id: 6, name: 'Á≤æÁæéÁ¨îËÆ∞Êú¨', icon: 'üìî', category: 'books', price: 25, description: 'ÊºÇ‰∫ÆÁöÑÁ¨îËÆ∞Êú¨ÔºåÈÄÇÂêàËÆ∞ÂΩïÂ≠¶‰π†ÂøÉÂæó' },
                    { id: 7, name: 'ÂΩ©Ëâ≤Á¨îÂ•óË£Ö', icon: 'üñçÔ∏è', category: 'books', price: 40, description: 'Â§öÂΩ©ÁöÑÁªòÁîªÁ¨îÂ•óË£Ö' },
                    { id: 8, name: 'ÁßëÂ≠¶ÂÆûÈ™åÂåÖ', icon: 'üî¨', category: 'books', price: 150, description: 'ÊúâË∂£ÁöÑÁßëÂ≠¶Â∞èÂÆûÈ™åÂ•óË£Ö' },
                    { id: 9, name: '‰∏ñÁïåÂú∞ÂõæÊãºÂõæ', icon: 'üó∫Ô∏è', category: 'books', price: 80, description: '‰∏ñÁïåÂú∞ÂõæÊãºÂõæÔºå‰∫ÜËß£‰∏ñÁïåÂêÑÂõΩ' },
                    { id: 10, name: 'ÊÄùÁª¥ËÆ≠ÁªÉÊ∏∏Êàè', icon: 'üß†', category: 'books', price: 90, description: 'ÈîªÁÇºÈÄªËæëÊÄùÁª¥ÁöÑËÆ≠ÁªÉÊ∏∏Êàè' },
                    
                    // ÁæéÈ£üÈõ∂È£üÁ±ª
                    { id: 11, name: 'Â∑ßÂÖãÂäõÁ§ºÁõí', icon: 'üç´', category: 'food', price: 60, description: 'È¶ôÁîúÁæéÂë≥ÁöÑÂ∑ßÂÖãÂäõÁ§ºÁõí' },
                    { id: 12, name: 'ËøõÂè£Á≥ñÊûú', icon: 'üç≠', category: 'food', price: 35, description: 'Ëâ≤ÂΩ©Áº§Á∫∑ÁöÑËøõÂè£Á≥ñÊûú' },
                    { id: 13, name: 'ÂùöÊûúÂ§ßÁ§ºÂåÖ', icon: 'ü•ú', category: 'food', price: 70, description: 'Ëê•ÂÖª‰∏∞ÂØåÁöÑÂùöÊûúÂ§ßÁ§ºÂåÖ' },
                    { id: 14, name: 'ÂÅ•Â∫∑ÊûúÊ±Å', icon: 'üßÉ', category: 'food', price: 30, description: 'Êñ∞È≤úÊ¶®ÂèñÁöÑÂÅ•Â∫∑ÊûúÊ±Å' },
                    { id: 15, name: 'ÁæéÂë≥È•ºÂπ≤', icon: 'üç™', category: 'food', price: 25, description: 'È¶ôËÑÜÁæéÂë≥ÁöÑÂêÑÂºèÈ•ºÂπ≤' },
                    
                    // Â®±‰πêÊ¥ªÂä®Á±ª
                    { id: 16, name: 'ÁîµÂΩ±Á•®', icon: 'üé´', category: 'activities', price: 80, description: '‰∏ÄÂº†ÁîµÂΩ±Á•®ÔºåÂíåÂÆ∂‰∫∫‰∏ÄËµ∑ÁúãÁîµÂΩ±' },
                    { id: 17, name: 'Ê∏∏‰πêÂõ≠Èó®Á•®', icon: 'üé¢', category: 'activities', price: 180, description: 'Ê∏∏‰πêÂõ≠Èó®Á•®ÔºåÁïÖÁé©ÂêÑÁßçÊ∏∏‰πêËÆæÊñΩ' },
                    { id: 18, name: 'KTVÂåÖÂé¢', icon: 'üé§', category: 'activities', price: 120, description: 'KTVÂåÖÂé¢ÔºåÂíåÊúãÂèã‰∏ÄËµ∑Âî±Ê≠å' },
                    { id: 19, name: 'Ê∏∏Ê≥≥Á•®', icon: 'üèä', category: 'activities', price: 40, description: 'Ê∏∏Ê≥≥Ê±†Èó®Á•®Ôºå‰∫´ÂèóÊ∏∏Ê≥≥‰πêË∂£' },
                    { id: 20, name: '‰øùÈæÑÁêÉ', icon: 'üé≥', category: 'activities', price: 60, description: '‰øùÈæÑÁêÉÊ∏∏ÊàèÁ•®ÔºåÂíåÊúãÂèã‰∏ÄËµ∑ËøêÂä®' },
                    
                    // ÁâπÊùÉÂ•ñÂä±Á±ª
                    { id: 21, name: 'ÂÖçÂÅöÂÆ∂Âä°Âà∏', icon: 'üßπ', category: 'privileges', price: 30, description: 'ÂÖçÈô§‰∏ÄÊ¨°ÂÆ∂Âä°Âä≥Âä®' },
                    { id: 22, name: 'Âª∂ËøüÁù°ËßâÊùÉ', icon: 'üåô', category: 'privileges', price: 50, description: 'ÂèØ‰ª•ÊôöÁù°30ÂàÜÈíü' },
                    { id: 23, name: 'ÈÄâÊã©ËèúÂçïÊùÉ', icon: 'üçΩÔ∏è', category: 'privileges', price: 40, description: 'ÂèØ‰ª•ÈÄâÊã©‰∏ÄÊ¨°ÂÆ∂Â∫≠ËèúÂçï' },
                    { id: 24, name: 'ÂÖç‰Ωú‰∏öÂà∏', icon: '‚úèÔ∏è', category: 'privileges', price: 100, description: 'ÂÖçÈô§‰∏ÄÊ¨°ÈùûÂøÖÈ°ª‰Ωú‰∏ö' },
                    { id: 25, name: 'ÁîµÂ≠ê‰∫ßÂìÅÊó∂Èó¥', icon: 'üì±', category: 'privileges', price: 80, description: 'È¢ùÂ§ñ30ÂàÜÈíüÁîµÂ≠ê‰∫ßÂìÅ‰ΩøÁî®Êó∂Èó¥' },
                    
                    // ÂÆöÂà∂ÊúçÂä°Á±ª
                    { id: 26, name: '‰∏ìÂ±ûÁîüÊó•Ê¥æÂØπ', icon: 'üéÇ', category: 'custom', price: 300, description: 'ÂÆöÂà∂ÂåñÁöÑÁîüÊó•Ê¥æÂØπÁ≠ñÂàí' },
                    { id: 27, name: '‰∏™‰∫∫ÂÆöÂà∂Á§ºÂìÅ', icon: 'üéÅ', category: 'custom', price: 150, description: '‰∏ìÂ±ûÂÆöÂà∂ÁöÑ‰∏™‰∫∫Á§ºÂìÅ' },
                    { id: 28, name: 'ÁâπÂà´‰ΩìÈ™åÊ¥ªÂä®', icon: 'üéØ', category: 'custom', price: 200, description: 'Áã¨ÁâπÁöÑ‰∏™‰∫∫‰ΩìÈ™åÊ¥ªÂä®' },
                    { id: 29, name: 'ÂÆ∂Â∫≠ÁîµÂΩ±Â§ú', icon: 'üçø', category: 'custom', price: 80, description: 'Âú®ÂÆ∂‰∫´Âèó‰∏ìÂ±ûÂÆ∂Â∫≠ÁîµÂΩ±Â§ú' },
                    { id: 30, name: '‰∏™‰∫∫Êó∂Èó¥ÁâπÊùÉ', icon: '‚è∞', category: 'custom', price: 120, description: 'Êã•Êúâ2Â∞èÊó∂ÂÆåÂÖ®Ëá™‰∏ªÊó∂Èó¥' }
                ]
            }
        };

        // È¢ÑËÆæÁßØÂàÜÂçï‰ΩçÂ∫ì
        const currencyUnits = {
            // ÈªòËÆ§‰∏ªÈ¢ò
            default: [
                { name: 'ÊòüÊòü', icon: '‚≠ê', color: '#FFD700' },
                { name: 'Á¨ëËÑ∏', icon: 'üòä', color: '#FF6B6B' },
                { name: 'Áà±ÂøÉ', icon: '‚ù§Ô∏è', color: '#FF69B4' },
                { name: 'Ëä±Êúµ', icon: 'üå∏', color: '#FFB6C1' },
                { name: 'Á≥ñÊûú', icon: 'üç¨', color: '#FF1493' },
                { name: 'Ê∞îÁêÉ', icon: 'üéà', color: '#FF6347' },
                { name: 'Ëù¥Ëù∂', icon: 'ü¶ã', color: '#DA70D6' },
                { name: 'Â∞èÁÜä', icon: 'üß∏', color: '#8B4513' },
                { name: 'ÂΩ©Ëôπ', icon: 'üåà', color: '#FF69B4' },
                { name: 'È≠îÊ≥ï', icon: '‚ú®', color: '#FFD700' }
            ],
            // ÂΩ©Ëôπ‰∏ªÈ¢ò
            rainbow: [
                { name: 'ÂΩ©ËôπÁ¢éÁâá', icon: 'üåà', color: '#FF69B4' },
                { name: 'ÂΩ©ËôπÁ≥ñ', icon: 'üç≠', color: '#FF69B4' },
                { name: 'ÂΩ©Ëâ≤ÊòüÊòü', icon: '‚≠ê', color: '#FFD700' },
                { name: 'ÂΩ©Ëâ≤Ê≥°Ê≥°', icon: 'ü´ß', color: '#87CEEB' },
                { name: 'ÂΩ©Ëâ≤ÂøÉÂΩ¢', icon: 'üíñ', color: '#FF69B4' },
                { name: 'ÂΩ©ËôπÁã¨ËßíÂÖΩ', icon: 'ü¶Ñ', color: '#DA70D6' },
                { name: 'ÂΩ©Ëâ≤Ëä±Êúµ', icon: 'üå∫', color: '#FF6347' },
                { name: 'ÂΩ©ËôπÈü≥Á¨¶', icon: 'üéµ', color: '#FF69B4' },
                { name: 'ÂΩ©Ëâ≤Ê∞îÁêÉ', icon: 'üéà', color: '#FFD700' },
                { name: 'ÂΩ©ËôπËù¥Ëù∂', icon: 'ü¶ã', color: '#DA70D6' }
            ],
            // Ê£ÆÊûó‰∏ªÈ¢ò
            forest: [
                { name: 'ÁªøÂè∂', icon: 'üçÉ', color: '#32CD32' },
                { name: 'ÊùæÊûú', icon: 'üå∞', color: '#8B4513' },
                { name: 'ËòëËèá', icon: 'üçÑ', color: '#FF6347' },
                { name: 'Ëä±Êúµ', icon: 'üåº', color: '#FFD700' },
                { name: 'Â∞èËçâ', icon: 'üå±', color: '#32CD32' },
                { name: 'Ê©°Êûú', icon: 'üå∞', color: '#8B4513' },
                { name: 'ËúÇÂ∑¢', icon: 'üçØ', color: '#FFD700' },
                { name: 'Ëù¥Ëù∂', icon: 'ü¶ã', color: '#DA70D6' },
                { name: 'Áì¢Ëô´', icon: 'üêû', color: '#FF69B4' },
                { name: 'ËúªËúì', icon: 'ü¶ã', color: '#87CEEB' }
            ],
            // Êó•ËêΩ‰∏ªÈ¢ò
            sunset: [
                { name: 'Â§™Èò≥', icon: '‚òÄÔ∏è', color: '#FFD700' },
                { name: 'Êúà‰∫Æ', icon: 'üåô', color: '#F0F8FF' },
                { name: 'ÊôöÈúû', icon: 'üåÖ', color: '#FF6347' },
                { name: 'ÊòüÊòü', icon: '‚≠ê', color: '#FFD700' },
                { name: '‰∫ëÊúµ', icon: '‚òÅÔ∏è', color: '#F5F5F5' },
                { name: 'Â∞èÈ∏ü', icon: 'üê¶', color: '#4682B4' },
                { name: 'Êµ∑Êµ™', icon: 'üåä', color: '#4682B4' },
                { name: 'Ê≤ôÊª©', icon: 'üèñÔ∏è', color: '#F4A460' },
                { name: 'Ê§∞Â≠ê', icon: 'ü••', color: '#8B4513' },
                { name: 'ÁÉ≠Â∏¶È±º', icon: 'üê†', color: '#FF6347' }
            ],
            // Êµ∑Ê¥ã‰∏ªÈ¢ò
            ocean: [
                { name: 'Êµ∑Êòü', icon: '‚≠ê', color: '#FFD700' },
                { name: 'Ë¥ùÂ£≥', icon: 'üêö', color: '#F5DEB3' },
                { name: 'Êµ∑Ë±ö', icon: 'üê¨', color: '#4682B4' },
                { name: 'Êµ∑È©¨', icon: 'ü¶Ñ', color: '#FF69B4' },
                { name: 'ÁèäÁëö', icon: 'ü™∏', color: '#FF6347' },
                { name: 'ÁèçÁè†', icon: 'üíé', color: '#F0F8FF' },
                { name: 'Â∞èÈ±º', icon: 'üêü', color: '#4682B4' },
                { name: 'Êµ∑Èæü', icon: 'üê¢', color: '#32CD32' },
                { name: 'Á´†È±º', icon: 'üêô', color: '#FF69B4' },
                { name: 'ÁèäÁëöÁ§Å', icon: 'ü™∏', color: '#FF6347' }
            ],
            // Âú£ËØû‰∏ªÈ¢ò
            christmas: [
                { name: 'Âú£ËØûÊ†ë', icon: 'üéÑ', color: '#32CD32' },
                { name: 'Âú£ËØûËÄÅ‰∫∫', icon: 'üéÖ', color: '#FF6B6B' },
                { name: 'Èõ™‰∫∫', icon: '‚òÉÔ∏è', color: '#FFFFFF' },
                { name: 'Á§ºÁâ©', icon: 'üéÅ', color: '#FFD700' },
                { name: 'ÈìÉÈìõ', icon: 'üîî', color: '#FFD700' },
                { name: 'ÊòüÊòü', icon: '‚≠ê', color: '#FFD700' },
                { name: 'Èõ™Ëä±', icon: '‚ùÑÔ∏è', color: '#87CEEB' },
                { name: 'ÊãêÊ£çÁ≥ñ', icon: 'üç¨', color: '#FF1493' },
                { name: 'Âú£ËØûË¢ú', icon: 'üß¶', color: '#FF6B6B' },
                { name: 'È©ØÈπø', icon: 'ü¶å', color: '#8B4513' }
            ],
            // Êñ∞Âπ¥‰∏ªÈ¢ò
            newyear: [
                { name: 'ÁÉüËä±', icon: 'üéÜ', color: '#FFD700' },
                { name: 'Ê∞îÁêÉ', icon: 'üéà', color: '#FF69B4' },
                { name: 'ËõãÁ≥ï', icon: 'üéÇ', color: '#FFB6C1' },
                { name: 'Ëú°ÁÉõ', icon: 'üïØÔ∏è', color: '#FFD700' },
                { name: 'ÂΩ©Â∏¶', icon: 'üéóÔ∏è', color: '#FF69B4' },
                { name: 'Â•ñÊùØ', icon: 'üèÜ', color: '#FFD700' },
                { name: 'ÊòüÊòü', icon: '‚≠ê', color: '#FFD700' },
                { name: 'Á§ºÂìÅ', icon: 'üéÅ', color: '#FF6B6B' },
                { name: 'Èü≥Á¨¶', icon: 'üéµ', color: '#4ECDC4' },
                { name: 'ÂΩ©Ëôπ', icon: 'üåà', color: '#FF69B4' }
            ]
        };

        // Ëé∑Âèñ‰∏ªÈ¢òÂØπÂ∫îÁöÑÁßØÂàÜÂçï‰Ωç
        function getThemeCurrencies(theme = 'default') {
            return currencyUnits[theme] || currencyUnits.default;
        }



        // ÊàêÂ∞±ÂÆö‰πâ - ÂÖ®Èù¢‰ºòÂåñ
        const achievements = [
            // ÂÖ•Èó®ÊàêÂ∞±
            { id: 'firstEarn', title: 'ÂàùÊ¨°Ëé∑Âæó', desc: 'Ëé∑ÂæóÁ¨¨‰∏Ä‰∏™ÁßØÂàÜ', icon: 'üéâ', category: 'ÂÖ•Èó®', difficulty: 'easy' },
            { id: 'firstSpend', title: 'È¶ñÊ¨°Ê∂àË¥π', desc: 'Á¨¨‰∏ÄÊ¨°‰ΩøÁî®ÁßØÂàÜ', icon: 'üí∞', category: 'ÂÖ•Èó®', difficulty: 'easy' },
            
            // ÁßØÂàÜÁ±ªÊàêÂ∞±
            { id: 'points25', title: 'ÂàùÂá∫ËåÖÂ∫ê', desc: 'Á¥ØËÆ°Ëé∑Âæó25ÁßØÂàÜ', icon: 'üå±', category: 'ÁßØÂàÜ', difficulty: 'easy' },
            { id: 'points50', title: 'Â∞èÊúâÊàêÂ∞±', desc: 'Á¥ØËÆ°Ëé∑Âæó50ÁßØÂàÜ', icon: '‚≠ê', category: 'ÁßØÂàÜ', difficulty: 'easy' },
            { id: 'points100', title: 'ÁôæÁßØÂàÜËææÊàê', desc: 'Á¥ØËÆ°Ëé∑Âæó100ÁßØÂàÜ', icon: 'üíØ', category: 'ÁßØÂàÜ', difficulty: 'medium' },
            { id: 'points250', title: 'ÁßØÂàÜËææ‰∫∫', desc: 'Á¥ØËÆ°Ëé∑Âæó250ÁßØÂàÜ', icon: 'üèÖ', category: 'ÁßØÂàÜ', difficulty: 'medium' },
            { id: 'points500', title: 'ÁßØÂàÜÂ§ßÊà∑', desc: 'Á¥ØËÆ°Ëé∑Âæó500ÁßØÂàÜ', icon: 'üèÜ', category: 'ÁßØÂàÜ', difficulty: 'hard' },
            { id: 'points1000', title: 'ÁßØÂàÜÁéãËÄÖ', desc: 'Á¥ØËÆ°Ëé∑Âæó1000ÁßØÂàÜ', icon: 'üëë', category: 'ÁßØÂàÜ', difficulty: 'expert' },
            
            // ÂùöÊåÅÁ±ªÊàêÂ∞±
            { id: 'consistency3', title: 'ÂùöÊåÅ‰∏çÊáà', desc: 'ËøûÁª≠3Â§©Ëé∑ÂæóÁßØÂàÜ', icon: 'üí™', category: 'ÂùöÊåÅ', difficulty: 'easy' },
            { id: 'consistency7', title: '‰∏ÄÂë®ÂùöÊåÅ', desc: 'ËøûÁª≠7Â§©Ëé∑ÂæóÁßØÂàÜ', icon: 'üìÖ', category: 'ÂùöÊåÅ', difficulty: 'medium' },
            { id: 'consistency14', title: '‰∏§Âë®ÂùöÊåÅ', desc: 'ËøûÁª≠14Â§©Ëé∑ÂæóÁßØÂàÜ', icon: 'üìÜ', category: 'ÂùöÊåÅ', difficulty: 'hard' },
            { id: 'consistency30', title: 'ÊúàÂ∫¶ÂùöÊåÅÁéã', desc: 'ËøûÁª≠30Â§©Ëé∑ÂæóÁßØÂàÜ', icon: 'üèÉ', category: 'ÂùöÊåÅ', difficulty: 'expert' },
            

            
            // Â≠¶‰π†Á±ªÊàêÂ∞±
            { id: 'studyStreak', title: 'Â≠¶‰π†‰πãÊòü', desc: 'ËøûÁª≠7Â§©Âõ†Â≠¶‰π†Ëé∑ÂæóÁßØÂàÜ', icon: 'üìö', category: 'Â≠¶‰π†', difficulty: 'medium' },
            { id: 'homeworkHero', title: '‰Ωú‰∏öËã±ÈõÑ', desc: 'ËøûÁª≠10Ê¨°Âõ†‰Ωú‰∏öËé∑ÂæóÁßØÂàÜ', icon: '‚úèÔ∏è', category: 'Â≠¶‰π†', difficulty: 'hard' },
            { id: 'readingChamp', title: 'ÈòÖËØªÂÜ†ÂÜõ', desc: 'ËøûÁª≠15Â§©Âõ†ÈòÖËØªËé∑ÂæóÁßØÂàÜ', icon: 'üìñ', category: 'Â≠¶‰π†', difficulty: 'hard' },
            
            // ÂÅ•Â∫∑Á±ªÊàêÂ∞±
            { id: 'earlyBird', title: 'Êó©Ëµ∑È∏üÂÑø', desc: 'ËøûÁª≠5Â§©Âõ†Êó©Ëµ∑Ëé∑ÂæóÁßØÂàÜ', icon: 'üåÖ', category: 'ÂÅ•Â∫∑', difficulty: 'medium' },
            { id: 'exerciseFan', title: 'ËøêÂä®Ëææ‰∫∫', desc: 'ËøûÁª≠7Â§©Âõ†ËøêÂä®Ëé∑ÂæóÁßØÂàÜ', icon: 'üèÉ', category: 'ÂÅ•Â∫∑', difficulty: 'medium' },
            { id: 'healthyEater', title: 'ÂÅ•Â∫∑È•ÆÈ£ü', desc: 'ËøûÁª≠10Â§©Âõ†ÂÅ•Â∫∑È•ÆÈ£üËé∑ÂæóÁßØÂàÜ', icon: 'ü•ó', category: 'ÂÅ•Â∫∑', difficulty: 'hard' },
            
            // Á§æ‰∫§Á±ªÊàêÂ∞±
            { id: 'helper', title: 'Â∞èÂ∏ÆÊâã', desc: 'Á¥ØËÆ°Â∏ÆÂä©‰ªñ‰∫∫10Ê¨°', icon: 'ü§ù', category: 'Á§æ‰∫§', difficulty: 'medium' },
            { id: 'friend', title: 'Â•ΩÊúãÂèã', desc: 'Á¥ØËÆ°ÂàÜ‰∫´Áé©ÂÖ∑10Ê¨°', icon: 'üë´', category: 'Á§æ‰∫§', difficulty: 'medium' },
            { id: 'volunteer', title: 'Â∞èÂøóÊÑøËÄÖ', desc: 'Á¥ØËÆ°ÂÅöÂøóÊÑøÊúçÂä°5Ê¨°', icon: '‚ù§Ô∏è', category: 'Á§æ‰∫§', difficulty: 'hard' },
            
            // ÁâπÊÆäÁ±ªÊàêÂ∞±
            { id: 'perfectDay', title: 'ÂÆåÁæé‰∏ÄÂ§©', desc: 'ÂçïÊó•Ëé∑Âæó50+ÁßØÂàÜ', icon: 'üåü', category: 'ÁâπÊÆä', difficulty: 'medium' },
            { id: 'bigSpender', title: 'Â§ß‰π∞ÂÆ∂', desc: 'ÂçïÊ¨°Ê∂àË¥π100+ÁßØÂàÜ', icon: 'üí≥', category: 'ÁâπÊÆä', difficulty: 'medium' },
            { id: 'collector', title: 'Êî∂ËóèÂÆ∂', desc: 'ÂÖëÊç¢ÊâÄÊúâÁ±ªÂûãÁöÑÂ•ñÂä±', icon: 'üóÇÔ∏è', category: 'ÁâπÊÆä', difficulty: 'hard' }
        ];

        // DOMÂÖÉÁ¥†ÂºïÁî®
        const elements = {};

        function initElements() {
            console.log('ÂºÄÂßãÂàùÂßãÂåñDOMÂÖÉÁ¥†...');
            
            const elementIds = [
                'currentPoints', 'totalEarned', 'totalSpent', 'displayChildName',
                'childNameInput', 'currencyInput', 'passwordInput',
                'addAmount', 'addReason', 'subtractAmount', 'subtractReason',
                'historyList',
                'achievementsGrid', 'achievementCount', 'chartContainer',
                'themeDropdown', 'adminPanel',
                'adminTotalPoints', 'adminTotalEarned', 'adminTotalSpent', 'adminActivityDays',
                'currencyPreview', 'previewIcon', 'previewName', 'pointsChangeIndicator',
                'dailyQuote', 'quoteContent', 'quoteText', 'quoteAuthor', 'quoteLoading', 'quoteError',
                // Êñ∞Â¢ûÁöÑÁ≠õÈÄâÂô®ÂíåÁªüËÆ°Áõ∏ÂÖ≥ÂÖÉÁ¥†
                'dateFilter', 'typeFilter', 'reasonFilter', 'filterStatus',
                'filteredTotalCount', 'filteredEarnedTotal', 'filteredSpentTotal', 'filteredNetGain',
                'earnedCategoryChart', 'spentCategoryChart', 'trendChart', 'monthlyChart',
                // ÂïÜÂ∫óÁõ∏ÂÖ≥ÂÖÉÁ¥†
                'shopCurrentPoints', 'shopTotalExchanged', 'shopGrid', 'exchangeHistoryList',
                'categoryFilter', 'priceFilter'
            ];
            
            elementIds.forEach(id => {
                elements[id] = document.getElementById(id);
                if (!elements[id]) {
                    console.warn(`ÂÖÉÁ¥† ${id} Êú™ÊâæÂà∞`);
                }
            });
            
            console.log('DOMÂÖÉÁ¥†ÂàùÂßãÂåñÂÆåÊàê');
        }

        // ÂàùÂßãÂåñ
        function init() {
            console.log('=== ÁªàÊûÅÁßØÂàÜÁ≥ªÁªüÂàùÂßãÂåñÂºÄÂßã ===');
            
            try {
                initElements();
                loadData();
                

                
                applyTheme();
                updateThemeSelector(); // ÂàùÂßãÂåñ‰∏ªÈ¢òÈÄâÊã©Âô®Áä∂ÊÄÅ
                updateDisplay();
                renderHistory(); // Ê∑ªÂä†ÂéÜÂè≤ËÆ∞ÂΩïÊ∏≤Êüì
                initHistoryFilters(); // ÂàùÂßãÂåñÂéÜÂè≤ËÆ∞ÂΩïÁ≠õÈÄâÂô®
                renderAchievements();

                renderChart(); // Ê∑ªÂä†ÂõæË°®Ê∏≤Êüì
                bindEvents();
                checkAchievements();
                
                // ÂàùÂßãÂåñÊØèÊó•‰∏ÄË®Ä
                initDailyQuote();
                
                // ÂàùÂßãÂåñÂïÜÂ∫óÁ≥ªÁªü
                initShop();

                console.log('=== ÁªàÊûÅÁßØÂàÜÁ≥ªÁªüÂàùÂßãÂåñÂÆåÊàê ===');
                showToast('üåü ÁªàÊûÅÁßØÂàÜÁ≥ªÁªüÂä†ËΩΩÂÆåÊàêÔºÅ');
            } catch (error) {
                console.error('ÂàùÂßãÂåñÂ§±Ë¥•:', error);
                showToast('Á≥ªÁªüÂàùÂßãÂåñÂ§±Ë¥•ÔºåËØ∑Âà∑Êñ∞È°µÈù¢', 'error');
            }
        }

        // ‰∏ªÈ¢òÁõ∏ÂÖ≥ÂäüËÉΩ
        function toggleThemeDropdown() {
            console.log('ÂàáÊç¢‰∏ªÈ¢ò‰∏ãÊãâËèúÂçï');
            const dropdown = elements.themeDropdown;
            if (!dropdown) return;
            
            dropdown.classList.toggle('show');
        }

        function changeTheme(themeName) {
            console.log('ÂàáÊç¢‰∏ªÈ¢ò‰∏∫:', themeName);
            document.body.setAttribute('data-theme', themeName);
            pointsData.settings.theme = themeName;
            
            // Ëé∑ÂèñÊñ∞‰∏ªÈ¢òÁöÑÁßØÂàÜÂçï‰Ωç
            const themeCurrencies = getThemeCurrencies(themeName);
            const currentCurrency = pointsData.settings.currency;
            
            // Ê£ÄÊü•ÂΩìÂâçÈÄâÊã©ÁöÑÁßØÂàÜÂçï‰ΩçÊòØÂê¶Â≠òÂú®‰∫éÊñ∞‰∏ªÈ¢ò‰∏≠
            const currencyExistsInNewTheme = themeCurrencies.some(currency => 
                `${currency.icon} ${currency.name}` === currentCurrency
            );
            
            // Â¶ÇÊûúÂΩìÂâçÈÄâÊã©ÁöÑÁßØÂàÜÂçï‰Ωç‰∏çÂ≠òÂú®‰∫éÊñ∞‰∏ªÈ¢ò‰∏≠Ôºå‰ΩøÁî®Á¨¨‰∏Ä‰∏™
            if (!currencyExistsInNewTheme && themeCurrencies.length > 0) {
                pointsData.settings.currency = `${themeCurrencies[0].icon} ${themeCurrencies[0].name}`;
            }
            
            // Êõ¥Êñ∞ÁßØÂàÜÂçï‰ΩçÈÄâÊã©Âô®
            populateCurrencyOptions();
            
            // Êõ¥Êñ∞‰∏ªÈ¢òÈÄâÊã©Âô®Áä∂ÊÄÅ
            updateThemeSelector();
            
            // Êõ¥Êñ∞ÊâÄÊúâÁßØÂàÜÂçï‰ΩçÁõ∏ÂÖ≥ÁöÑÊñáÊú¨
            updateCurrencyTexts();
            
            saveData();
            
            // Êõ¥Êñ∞‰∏ªÈ¢òÈÄâÈ°πÁöÑÊøÄÊ¥ªÁä∂ÊÄÅ
            document.querySelectorAll('.theme-option').forEach(option => {
                option.classList.remove('active');
            });
            event.target.closest('.theme-option').classList.add('active');
            
            // ÂÖ≥Èó≠‰∏ãÊãâËèúÂçï
            elements.themeDropdown.classList.remove('show');
            showToast(`‰∏ªÈ¢òÂ∑≤ÂàáÊç¢‰∏∫${getThemeName(themeName)}ÔºÅ`);
        }
        
        // Êõ¥Êñ∞‰∏ªÈ¢òÈÄâÊã©Âô®Áä∂ÊÄÅ
        function updateThemeSelector() {
            const currentTheme = pointsData.settings.theme || 'default';
            
            // Ê∏ÖÈô§ÊâÄÊúâÊøÄÊ¥ªÁä∂ÊÄÅ
            document.querySelectorAll('.theme-option').forEach(option => {
                option.classList.remove('active');
            });
            
            // Ê†πÊçÆ‰∏ªÈ¢òÂêçÁß∞ÊøÄÊ¥ªÂØπÂ∫îÈÄâÈ°π
            let targetOption;
            switch (currentTheme) {
                case 'rainbow':
                    targetOption = document.querySelector('.theme-option:nth-child(2)');
                    break;
                case 'forest':
                    targetOption = document.querySelector('.theme-option:nth-child(3)');
                    break;
                case 'sunset':
                    targetOption = document.querySelector('.theme-option:nth-child(4)');
                    break;
                case 'ocean':
                    targetOption = document.querySelector('.theme-option:nth-child(5)');
                    break;
                case 'christmas':
                    targetOption = document.querySelector('.theme-option:nth-child(6)');
                    break;
                case 'newyear':
                    targetOption = document.querySelector('.theme-option:nth-child(7)');
                    break;
                default:
                    targetOption = document.querySelector('.theme-option');
                    break;
            }
            
            if (targetOption) {
                targetOption.classList.add('active');
            }
        }

        function getThemeName(theme) {
            const names = {
                'default': 'ÈªòËÆ§',
                'rainbow': 'ÂΩ©Ëôπ',
                'forest': 'Ê£ÆÊûó',
                'sunset': 'Êó•ËêΩ',
                'ocean': 'Êµ∑Ê¥ã',
                'christmas': 'Âú£ËØû',
                'newyear': 'Êñ∞Âπ¥'
            };
            return names[theme] || 'ÈªòËÆ§';
        }

        function applyTheme() {
            const theme = pointsData.settings.theme || 'default';
            document.body.setAttribute('data-theme', theme);
            
            // Á°Æ‰øùÁßØÂàÜÂçï‰Ωç‰∏é‰∏ªÈ¢òÂåπÈÖç
            const themeCurrencies = getThemeCurrencies(theme);
            const currentCurrency = pointsData.settings.currency;
            
            // Ê£ÄÊü•ÂΩìÂâçÈÄâÊã©ÁöÑÁßØÂàÜÂçï‰ΩçÊòØÂê¶Â≠òÂú®‰∫é‰∏ªÈ¢ò‰∏≠
            const currencyExists = themeCurrencies.some(currency => 
                `${currency.icon} ${currency.name}` === currentCurrency
            );
            
            // Â¶ÇÊûú‰∏çÂ≠òÂú®Ôºå‰ΩøÁî®Á¨¨‰∏Ä‰∏™
            if (!currencyExists && themeCurrencies.length > 0) {
                pointsData.settings.currency = `${themeCurrencies[0].icon} ${themeCurrencies[0].name}`;
            }
        }

        // ‰ªélocalStorageÂä†ËΩΩÊï∞ÊçÆ
        function loadData() {
            try {
                const savedData = localStorage.getItem('ultimatePointsSystemFixed');
                if (savedData) {
                    const parsed = JSON.parse(savedData);
                    pointsData = { ...pointsData, ...parsed };
                    console.log('Êï∞ÊçÆÂä†ËΩΩÊàêÂäü');
                }
            } catch (error) {
                console.error('Âä†ËΩΩÊï∞ÊçÆÂ§±Ë¥•:', error);
            }
        }

        // ‰øùÂ≠òÊï∞ÊçÆÂà∞localStorage
        function saveData() {
            try {
                localStorage.setItem('ultimatePointsSystemFixed', JSON.stringify(pointsData));
            } catch (error) {
                console.error('‰øùÂ≠òÊï∞ÊçÆÂ§±Ë¥•:', error);
                showToast('‰øùÂ≠òÂ§±Ë¥•ÔºåËØ∑Ê£ÄÊü•Â≠òÂÇ®Á©∫Èó¥', 'error');
            }
        }

        // Êí≠ÊîæÁßØÂàÜÂèòÂåñÂä®Áîª
        function playPointsAnimation(changeType, changeAmount) {
            const pointsElement = elements.currentPoints;
            const indicatorElement = elements.pointsChangeIndicator;
            const pointsArea = document.querySelector('.points-display');
            
            if (!pointsElement || !indicatorElement) return;
            
            // Êí≠ÊîæÁßØÂàÜÊï∞Â≠óÂä®Áîª
            pointsElement.style.animation = 'none';
            
            if (changeType === 'gain') {
                // Ëé∑ÂæóÁßØÂàÜÁöÑÂä®Áîª
                pointsElement.style.animation = 'points-gain 1.5s ease-out';
                pointsArea.style.animation = 'points-area-glow 1.5s ease-out';
                
                // ÊòæÁ§∫Ëé∑ÂæóÊèêÁ§∫
                indicatorElement.textContent = `+${changeAmount} ${pointsData.settings.currency}`;
                indicatorElement.className = 'points-change-indicator gain';
                
            } else if (changeType === 'loss') {
                // Êâ£ÂáèÁßØÂàÜÁöÑÂä®Áîª
                pointsElement.style.animation = 'points-loss 1.5s ease-out';
                pointsArea.style.animation = 'points-area-shake 0.6s ease-out';
                
                // ÊòæÁ§∫Êâ£ÂáèÊèêÁ§∫
                indicatorElement.textContent = `-${changeAmount} ${pointsData.settings.currency}`;
                indicatorElement.className = 'points-change-indicator loss';
            }
            
            // ÊòæÁ§∫ÁßØÂàÜÂèòÂåñÊèêÁ§∫
            indicatorElement.style.display = 'block';
            
            // Ê∏ÖÁêÜÂä®ÁîªÊ†∑Âºè
            setTimeout(() => {
                pointsElement.style.animation = '';
                pointsArea.style.animation = '';
                indicatorElement.style.display = 'none';
            }, 2000);
        }
        
        // Êõ¥Êñ∞ÊòæÁ§∫
        function updateDisplay(changeType = null, changeAmount = null) {
            elements.currentPoints.textContent = pointsData.currentPoints;
            elements.totalEarned.textContent = pointsData.totalEarned;
            elements.totalSpent.textContent = pointsData.totalSpent;
            elements.displayChildName.textContent = pointsData.settings.childName;
            elements.childNameInput.value = pointsData.settings.childName;
            
            // Âä†ËΩΩÂØÜÁ†ÅËÆæÁΩÆ
            if (pointsData.settings.passwordEnabled && pointsData.settings.password) {
                elements.passwordInput.placeholder = 'Â∑≤ËÆæÁΩÆÂØÜÁ†ÅÔºåÂ¶ÇÈúÄ‰øÆÊîπËØ∑ÈáçÊñ∞ËæìÂÖ•';
                elements.passwordInput.value = '';
            } else {
                elements.passwordInput.placeholder = 'ËØ∑ËÆæÁΩÆÊâ£ÂáèÈ™åËØÅÂØÜÁ†Å';
                elements.passwordInput.value = '';
            }

            // Â¶ÇÊûúÊúâÂèòÂåñÔºåÊí≠ÊîæÂä®Áîª
            if (changeType && changeAmount !== null) {
                playPointsAnimation(changeType, changeAmount);
            }

            // Â°´ÂÖÖÁßØÂàÜÂçï‰ΩçÈÄâÊã©Âô®
            populateCurrencyOptions();
            
            // Êõ¥Êñ∞ÁßØÂàÜÂçï‰ΩçÁõ∏ÂÖ≥ÁöÑÊñáÊú¨
            updateCurrencyTexts();
        }
        
        // Â°´ÂÖÖÁßØÂàÜÂçï‰ΩçÈÄâÊã©Âô®
        function populateCurrencyOptions() {
            const themeCurrencies = getThemeCurrencies(pointsData.settings.theme);
            const currentCurrency = pointsData.settings.currency;
            
            // Á°Æ‰øùÂΩìÂâçÈÄâÊã©ÁöÑÁßØÂàÜÂçï‰ΩçÂ≠òÂú®‰∫é‰∏ªÈ¢ò‰∏≠
            const validCurrency = themeCurrencies.find(currency => 
                `${currency.icon} ${currency.name}` === currentCurrency
            );
            
            // Â¶ÇÊûúÂΩìÂâçÈÄâÊã©ÁöÑÁßØÂàÜÂçï‰Ωç‰∏çÂ≠òÂú®‰∫éÂΩìÂâç‰∏ªÈ¢ò‰∏≠Ôºå‰ΩøÁî®Á¨¨‰∏Ä‰∏™
            const selectedCurrency = validCurrency || themeCurrencies[0];
            
            // ÁîüÊàêÈÄâÊã©Âô®ÈÄâÈ°π
            const optionsHTML = themeCurrencies.map((currency, index) => {
                const selected = `${currency.icon} ${currency.name}` === selectedCurrency ? 'selected' : '';
                return `<option value="${currency.icon} ${currency.name}" ${selected}>
                    ${currency.icon} ${currency.name}
                </option>`;
            }).join('');
            
            elements.currencyInput.innerHTML = optionsHTML;
            
            // Êõ¥Êñ∞È¢ÑËßà
            updateCurrencyPreview();
        }
        
        // Êõ¥Êñ∞ÁßØÂàÜÂçï‰ΩçÈ¢ÑËßà
        function updateCurrencyPreview() {
            const selectedValue = elements.currencyInput.value;
            if (selectedValue) {
                const [icon, name] = selectedValue.split(' ');
                elements.previewIcon.textContent = icon;
                elements.previewName.textContent = name;
            }
        }
        

        
        // ÁÆÄÂçïÂØÜÁ†ÅÂä†ÂØÜ
        function encryptPassword(password) {
            if (!password) return '';
            // ÁÆÄÂçïÁöÑBase64ÁºñÁ†ÅÔºàÂú®ÂÆûÈôÖÂ∫îÁî®‰∏≠Â∫îËØ•‰ΩøÁî®Êõ¥ÂÆâÂÖ®ÁöÑÊñπÊ≥ïÔºâ
            return btoa(password);
        }
        
        // ÂØÜÁ†ÅÈ™åËØÅÂØπËØùÊ°Ü
        function showPasswordVerificationDialog(amount, reason) {
            return new Promise((resolve) => {
                const modal = document.createElement('div');
                modal.style.cssText = `
                    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                    background: rgba(0,0,0,0.8); display: flex; align-items: center; justify-content: center;
                    z-index: 10000;
                `;
                
                const remainingAfterSpend = pointsData.currentPoints - amount;
                
                modal.innerHTML = `
                    <div style="
                        background: var(--theme-bg); padding: 30px; border-radius: var(--border-radius);
                        max-width: 400px; width: 90%; text-align: center; box-shadow: var(--card-shadow);
                    ">
                        <h3 style="margin-bottom: 20px; color: var(--theme-text);">üîê ÂØÜÁ†ÅÈ™åËØÅ</h3>
                        <div style="margin-bottom: 20px; color: #6c757d; font-size: 14px;">
                            <div style="margin-bottom: 10px;">
                                <strong>ÂΩìÂâç‰ΩôÈ¢ùÔºö</strong>${pointsData.currentPoints} ${pointsData.settings.currency}
                            </div>
                            <div style="margin-bottom: 5px;">
                                Êâ£Âáè ${amount} ${pointsData.settings.currency}<br>
                                ÂéüÂõ†Ôºö${reason}
                            </div>
                            <div style="color: var(--theme-accent); font-weight: 600;">
                                Ââ©‰ΩôÔºö${remainingAfterSpend} ${pointsData.settings.currency}
                            </div>
                        </div>
                        <input type="password" id="verifyPasswordInput" placeholder="ËØ∑ËæìÂÖ•Ê∂àË¥πÂØÜÁ†Å" 
                               maxlength="8" style="
                            width: 100%; padding: 15px; border: 2px solid #dee2e6; border-radius: 12px;
                            font-size: 16px; margin-bottom: 15px; text-align: center;
                        ">
                        <div style="display: flex; gap: 10px;">
                            <button onclick="cancelPasswordVerification()" style="
                                flex: 1; padding: 15px; border: none; border-radius: 12px;
                                background: #6c757d; color: white; font-weight: 600;
                            ">ÂèñÊ∂à</button>
                            <button onclick="confirmPasswordVerification()" style="
                                flex: 1; padding: 15px; border: none; border-radius: 12px;
                                background: var(--primary-gradient); color: white; font-weight: 600;
                            ">Á°ÆËÆ§</button>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(modal);
                
                // ÁªëÂÆöÂÖ®Â±ÄÂáΩÊï∞
                window.cancelPasswordVerification = () => {
                    document.body.removeChild(modal);
                    delete window.cancelPasswordVerification;
                    delete window.confirmPasswordVerification;
                    resolve(false);
                };
                
                window.confirmPasswordVerification = () => {
                    const input = document.getElementById('verifyPasswordInput');
                    const inputPassword = input.value;
                    
                    if (!inputPassword) {
                        input.style.borderColor = '#dc3545';
                        input.placeholder = 'ËØ∑ËæìÂÖ•ÂØÜÁ†Å';
                        return;
                    }
                    
                    const savedPassword = pointsData.settings.password;
                    const inputEncrypted = encryptPassword(inputPassword);
                    
                    if (inputEncrypted === savedPassword) {
                        document.body.removeChild(modal);
                        delete window.cancelPasswordVerification;
                        delete window.confirmPasswordVerification;
                        resolve(true);
                    } else {
                        input.style.borderColor = '#dc3545';
                        input.value = '';
                        input.placeholder = 'ÂØÜÁ†ÅÈîôËØØÔºåËØ∑ÈáçËØï';
                        setTimeout(() => {
                            input.style.borderColor = '#dee2e6';
                            input.placeholder = 'ËØ∑ËæìÂÖ•Ê∂àË¥πÂØÜÁ†Å';
                        }, 2000);
                    }
                };
                
                // ÂõûËΩ¶ÈîÆÁ°ÆËÆ§
                setTimeout(() => {
                    const input = document.getElementById('verifyPasswordInput');
                    input.focus();
                    input.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter') {
                            window.confirmPasswordVerification();
                        }
                    });
                }, 100);
            });
        }
        
        // Êõ¥Êñ∞ÁßØÂàÜÂçï‰ΩçÁõ∏ÂÖ≥ÁöÑÊñáÊú¨
        function updateCurrencyTexts() {
            const currency = pointsData.settings.currency;
            
            // Êõ¥Êñ∞Ê†áÁ≠æÈ°µÊ†áÈ¢ò
            const pointsLabel = document.getElementById('pointsLabel');
            if (pointsLabel) {
                pointsLabel.textContent = `ÂΩìÂâç${currency}`;
            }
            
            // Êõ¥Êñ∞ÁªüËÆ°Ê†áÁ≠æ
            const statLabels = document.querySelectorAll('.stat-label');
            if (statLabels.length >= 2) {
                statLabels[0].textContent = `ÊÄªËé∑Âæó`;
                statLabels[1].textContent = `ÊÄªÊâ£Âáè`;
            }
            
            // Êõ¥Êñ∞Ê†áÁ≠æÈ°µÊ†áÈ¢ò
            const historyHeader = document.querySelector('#history h3');
            if (historyHeader) {
                historyHeader.textContent = `üìã ${currency}ÂéÜÂè≤`;
            }
            
            // Êõ¥Êñ∞Á©∫ÂéÜÂè≤ÊèêÁ§∫
            const emptyHistory = document.querySelector('.empty-history');
            if (emptyHistory) {
                emptyHistory.textContent = `ËøòÊ≤°Êúâ${currency}ËÆ∞ÂΩïÔºåÂø´Êù•Ëé∑Âæó‰Ω†ÁöÑÁ¨¨‰∏Ä‰∏™${currency}ÂêßÔºÅ`;
            }
            
            // Êõ¥Êñ∞ÂõæË°®Ê†áÈ¢ò
            const chartTitle = document.querySelector('#stats h3');
            if (chartTitle) {
                chartTitle.textContent = `üìà ÊúÄËøë7Â§©${currency}Ë∂ãÂäø`;
            }
            
            // Êõ¥Êñ∞Â•ñÂä±ÂïÜÂ∫óÊ†áÈ¢ò
            const rewardsTitle = document.querySelector('.rewards-section h3');
            if (rewardsTitle) {
                rewardsTitle.textContent = 'üè™ Â•ñÂä±ÂïÜÂ∫ó';
            }
            
            // Êõ¥Êñ∞ÊéßÂà∂Èù¢ÊùøÊ†áÈ¢ò
            const addControlTitle = document.querySelector('.controls .control-group:first-child h3');
            if (addControlTitle) {
                addControlTitle.textContent = `üéâ Ëé∑Âæó${currency}`;
            }
            
            const subtractControlTitle = document.querySelector('.controls .control-group:last-child h3');
            if (subtractControlTitle) {
                subtractControlTitle.textContent = `üí∞ Êâ£Âáè${currency}`;
            }
            
            // Êõ¥Êñ∞ËæìÂÖ•Ê°ÜÊ†áÁ≠æ
            const addAmountLabel = document.querySelector('label[for="addAmount"]');
            if (addAmountLabel) {
                addAmountLabel.textContent = `${currency}Êï∞Èáè`;
            }
            
            const subtractAmountLabel = document.querySelector('label[for="subtractAmount"]');
            if (subtractAmountLabel) {
                subtractAmountLabel.textContent = `${currency}Êï∞Èáè`;
            }
            
            // Êõ¥Êñ∞ÊåâÈíÆÊñáÊú¨
            const addButton = document.querySelector('.btn-add');
            if (addButton) {
                addButton.textContent = `üöÄ Ëé∑Âæó${currency}`;
            }
            
            const subtractButton = document.querySelector('.btn-subtract');
            if (subtractButton) {
                subtractButton.textContent = `üí∏ Êâ£Âáè${currency}`;
            }
            
            // Êõ¥Êñ∞Â•ñÂä±ÂÖëÊç¢ÊåâÈíÆÊñáÊú¨
            const rewardButtons = document.querySelectorAll('.reward-card button');
            rewardButtons.forEach(button => {
                if (button.textContent.includes('ÁßØÂàÜ‰∏çË∂≥')) {
                    button.textContent = `${currency}‰∏çË∂≥`;
                }
            });
        }



        // Ê∑ªÂä†ÁßØÂàÜ
        function addPoints() {
            console.log('=== Ê∑ªÂä†ÁßØÂàÜÂäüËÉΩË∞ÉÁî® ===');
            const amount = parseInt(elements.addAmount.value);
            const reason = elements.addReason.value;

            if (!amount || amount <= 0) {
                showToast('ËØ∑ËæìÂÖ•ÊúâÊïàÁöÑÁßØÂàÜÊï∞Èáè', 'error');
                return;
            }

            if (!reason.trim()) {
                showToast('ËØ∑ÈÄâÊã©Ëé∑ÂæóÂéüÂõ†', 'error');
                return;
            }

            // ‰∫åÊ¨°Á°ÆËÆ§ - Â¢ûÂº∫ÊòæÁ§∫‰ø°ÊÅØ
            const currentPoints = pointsData.currentPoints;
            const newPoints = currentPoints + amount;
            const confirmMessage = `üìã Ëé∑ÂæóÁßØÂàÜÁ°ÆËÆ§\n\nüìä ÂΩìÂâçÁßØÂàÜÔºö${currentPoints} ${pointsData.settings.currency}\n‚ûï Ëé∑ÂæóÁßØÂàÜÔºö+${amount} ${pointsData.settings.currency}\nüí∞ Ëé∑ÂæóÂêéÁßØÂàÜÔºö${newPoints} ${pointsData.settings.currency}\n\nüìù Ëé∑ÂæóÂéüÂõ†Ôºö${reason}\n\nÁ°ÆÂÆöË¶ÅËé∑ÂæóÁßØÂàÜÂêóÔºü`;
            if (!confirm(confirmMessage)) {
                showToast('Â∑≤ÂèñÊ∂àÊìç‰Ωú', 'info');
                return;
            }

            pointsData.currentPoints += amount;
            pointsData.totalEarned += amount;
            pointsData.lastUpdated = new Date().toISOString();

            // Ê∑ªÂä†Âà∞ÂéÜÂè≤ËÆ∞ÂΩï
            addHistoryRecord('earned', amount, reason);

            updateDisplay('gain', amount);
            saveData();
            checkAchievements();
            
            // Êõ¥Êñ∞Á≠õÈÄâÂô®ÂíåÁªüËÆ°Êï∞ÊçÆ
            populateReasonFilter();
            applyFilters();
            
            showToast(`üéâ Ëé∑Âæó ${amount} ${pointsData.settings.currency}ÔºÅ`);
        }

        // ÂáèÂ∞ëÁßØÂàÜ
        async function subtractPoints() {
            console.log('=== ÂáèÂ∞ëÁßØÂàÜÂäüËÉΩË∞ÉÁî® ===');
            const amount = parseInt(elements.subtractAmount.value);
            const reason = elements.subtractReason.value;

            if (!amount || amount <= 0) {
                showToast('ËØ∑ËæìÂÖ•ÊúâÊïàÁöÑÁßØÂàÜÊï∞Èáè', 'error');
                return;
            }

            if (!reason.trim()) {
                showToast('ËØ∑ÈÄâÊã©Êâ£ÂáèÂéüÂõ†', 'error');
                return;
            }

            if (pointsData.currentPoints < amount) {
                showToast(`${pointsData.settings.currency}‰∏çË∂≥ÔºåÊó†Ê≥ïÊâ£Âáè`, 'error');
                return;
            }

            // Ê£ÄÊü•ÊòØÂê¶ÈúÄË¶ÅÂØÜÁ†ÅÈ™åËØÅ
            if (pointsData.settings.passwordEnabled && pointsData.settings.password) {
                // ÊòæÁ§∫ÂØÜÁ†ÅÈ™åËØÅÂØπËØùÊ°Ü
                const passwordValid = await showPasswordVerificationDialog(amount, reason);
                if (!passwordValid) {
                    showToast('ÂØÜÁ†ÅÈ™åËØÅÂ§±Ë¥•ÔºåÂ∑≤ÂèñÊ∂àÊìç‰Ωú', 'error');
                    return;
                }
            }

            pointsData.currentPoints -= amount;
            pointsData.totalSpent += amount;
            pointsData.lastUpdated = new Date().toISOString();

            // Ê∑ªÂä†Âà∞ÂéÜÂè≤ËÆ∞ÂΩï
            addHistoryRecord('spent', amount, reason);

            updateDisplay('loss', amount);
            saveData();
            checkAchievements();
            
            // Êõ¥Êñ∞Á≠õÈÄâÂô®ÂíåÁªüËÆ°Êï∞ÊçÆ
            populateReasonFilter();
            applyFilters();
            
            showToast(`‚ö†Ô∏è Êâ£Âáè ${amount} ${pointsData.settings.currency}`);
        }

        // Ê∑ªÂä†ÂéÜÂè≤ËÆ∞ÂΩï
        function addHistoryRecord(type, amount, reason) {
            const record = {
                id: Date.now(),
                type: type,
                amount: amount,
                reason: reason,
                timestamp: new Date().toISOString()
            };

            pointsData.history.unshift(record);

            // ÈôêÂà∂ÂéÜÂè≤ËÆ∞ÂΩïÊï∞ÈáèÔºàÊúÄÂ§ö‰øùÂ≠ò500Êù°Ôºâ
            if (pointsData.history.length > 500) {
                pointsData.history = pointsData.history.slice(0, 500);
            }

            renderHistory();
        }

        // ÂàùÂßãÂåñÂéÜÂè≤ËÆ∞ÂΩïÁ≠õÈÄâÂô®
        function initHistoryFilters() {
            populateReasonFilter();
            applyFilters();
        }

        // Â°´ÂÖÖÂéüÂõ†Á≠õÈÄâÂô®ÈÄâÈ°π
        function populateReasonFilter() {
            const reasonFilter = elements.reasonFilter;
            const reasons = new Set();
            
            // Êî∂ÈõÜÊâÄÊúâÂéüÂõ†
            pointsData.history.forEach(record => {
                reasons.add(record.reason);
            });
            
            // ÁîüÊàêÈÄâÈ°πHTML
            const optionsHTML = Array.from(reasons)
                .sort()
                .map(reason => `<option value="${reason}">${reason}</option>`)
                .join('');
            
            reasonFilter.innerHTML = '<option value="all">ÂÖ®ÈÉ®ÂéüÂõ†</option>' + optionsHTML;
        }

        // Â∫îÁî®Á≠õÈÄâÊù°‰ª∂
        function applyFilters() {
            const dateFilter = elements.dateFilter.value;
            const typeFilter = elements.typeFilter.value;
            const reasonFilter = elements.reasonFilter.value;
            
            // Ëé∑ÂèñÁ≠õÈÄâÂêéÁöÑÂéÜÂè≤ËÆ∞ÂΩï
            let filteredHistory = pointsData.history.filter(record => {
                // Êó∂Èó¥Á≠õÈÄâ
                if (dateFilter !== 'all') {
                    const recordDate = new Date(record.timestamp);
                    const now = new Date();
                    const daysDiff = Math.floor((now - recordDate) / (1000 * 60 * 60 * 24));
                    
                    switch (dateFilter) {
                        case 'today':
                            if (daysDiff > 0) return false;
                            break;
                        case 'week':
                            if (daysDiff > 7) return false;
                            break;
                        case 'month':
                            if (daysDiff > 30) return false;
                            break;
                        case '3months':
                            if (daysDiff > 90) return false;
                            break;
                        case '6months':
                            if (daysDiff > 180) return false;
                            break;
                        case 'year':
                            if (daysDiff > 365) return false;
                            break;
                    }
                }
                
                // Á±ªÂûãÁ≠õÈÄâ
                if (typeFilter !== 'all' && record.type !== typeFilter) {
                    return false;
                }
                
                // ÂéüÂõ†Á≠õÈÄâ
                if (reasonFilter !== 'all' && record.reason !== reasonFilter) {
                    return false;
                }
                
                return true;
            });
            
            // Ê∏≤ÊüìÁ≠õÈÄâÂêéÁöÑÂéÜÂè≤ËÆ∞ÂΩï
            renderFilteredHistory(filteredHistory);
            
            // Êõ¥Êñ∞ÁªüËÆ°‰ø°ÊÅØ
            updateFilteredStats(filteredHistory);
            
            // Êõ¥Êñ∞Á≠õÈÄâÁä∂ÊÄÅ
            updateFilterStatus(dateFilter, typeFilter, reasonFilter, filteredHistory.length);
            
            // Êõ¥Êñ∞ÂàÜÊûêÂõæË°®
            updateAnalysisCharts(filteredHistory);
        }

        // Ê∏≤ÊüìÁ≠õÈÄâÂêéÁöÑÂéÜÂè≤ËÆ∞ÂΩï
        function renderFilteredHistory(filteredHistory) {
            const historyList = elements.historyList;
            
            if (filteredHistory.length === 0) {
                historyList.innerHTML = '<div class="empty-history">Ê≤°ÊúâÁ¨¶ÂêàÁ≠õÈÄâÊù°‰ª∂ÁöÑËÆ∞ÂΩï</div>';
                return;
            }

            const historyHTML = filteredHistory.map(record => {
                const date = new Date(record.timestamp);
                const timeString = date.toLocaleString('zh-CN');
                const amountClass = record.type === 'earned' ? 'amount-positive' : 'amount-negative';
                const amountPrefix = record.type === 'earned' ? '+' : '-';
                const icon = record.type === 'earned' ? 'üéâ' : 'üí∏';
                
                return `
                    <div class="history-item">
                        <div class="history-info">
                            <div class="history-details">${icon} ${record.reason}</div>
                            <div class="history-time">${timeString}</div>
                        </div>
                        <div class="history-amount ${amountClass}">
                            ${amountPrefix}${record.amount} ${pointsData.settings.currency}
                        </div>
                    </div>
                `;
            }).join('');

            historyList.innerHTML = historyHTML;
        }

        // Êõ¥Êñ∞Á≠õÈÄâÂêéÁöÑÁªüËÆ°‰ø°ÊÅØ
        function updateFilteredStats(filteredHistory) {
            const totalCount = filteredHistory.length;
            const earnedTotal = filteredHistory
                .filter(record => record.type === 'earned')
                .reduce((sum, record) => sum + record.amount, 0);
            const spentTotal = filteredHistory
                .filter(record => record.type === 'spent')
                .reduce((sum, record) => sum + record.amount, 0);
            const netGain = earnedTotal - spentTotal;
            
            elements.filteredTotalCount.textContent = totalCount;
            elements.filteredEarnedTotal.textContent = earnedTotal;
            elements.filteredSpentTotal.textContent = spentTotal;
            elements.filteredNetGain.textContent = netGain > 0 ? `+${netGain}` : netGain;
        }

        // Êõ¥Êñ∞Á≠õÈÄâÁä∂ÊÄÅÊòæÁ§∫
        function updateFilterStatus(dateFilter, typeFilter, reasonFilter, resultCount) {
            const statusParts = [];
            
            // ÊûÑÂª∫Á≠õÈÄâÊèèËø∞
            if (dateFilter !== 'all') {
                const dateLabels = {
                    'today': '‰ªäÂ§©',
                    'week': 'Êú¨Âë®',
                    'month': 'Êú¨Êúà',
                    '3months': 'Ëøë3‰∏™Êúà',
                    '6months': 'Ëøë6‰∏™Êúà',
                    'year': '‰ªäÂπ¥'
                };
                statusParts.push(dateLabels[dateFilter]);
            }
            
            if (typeFilter !== 'all') {
                const typeLabels = {
                    'earned': 'Ëé∑ÂæóÁßØÂàÜ',
                    'spent': 'Êâ£ÂáèÁßØÂàÜ'
                };
                statusParts.push(typeLabels[typeFilter]);
            }
            
            if (reasonFilter !== 'all') {
                statusParts.push(reasonFilter);
            }
            
            const statusText = statusParts.length > 0 
                ? `ÊòæÁ§∫ ${statusParts.join(' ¬∑ ')} ËÆ∞ÂΩï (${resultCount}Êù°)`
                : `ÊòæÁ§∫ÂÖ®ÈÉ®ËÆ∞ÂΩï (${resultCount}Êù°)`;
                
            elements.filterStatus.textContent = statusText;
        }

        // ÈáçÁΩÆÁ≠õÈÄâÊù°‰ª∂
        function resetFilters() {
            elements.dateFilter.value = 'all';
            elements.typeFilter.value = 'all';
            elements.reasonFilter.value = 'all';
            applyFilters();
            showToast('Á≠õÈÄâÊù°‰ª∂Â∑≤ÈáçÁΩÆ');
        }

        // ÂàáÊç¢ÂàÜÊûêÊ†áÁ≠æÈ°µ
        function showAnalysisTab(tabName) {
            // ÈöêËóèÊâÄÊúâÂàÜÊûêÂÜÖÂÆπ
            document.querySelectorAll('.analysis-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // ÁßªÈô§ÊâÄÊúâÊ†áÁ≠æÁöÑÊøÄÊ¥ªÁä∂ÊÄÅ
            document.querySelectorAll('.analysis-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // ÊøÄÊ¥ªÈÄâ‰∏≠ÁöÑÊ†áÁ≠æÈ°µ
            document.getElementById(tabName + 'Analysis').classList.add('active');
            event.target.classList.add('active');
            
            // Ê†πÊçÆÊ†áÁ≠æÈ°µÁ±ªÂûãÊõ¥Êñ∞ÂõæË°®
            const filteredHistory = getCurrentFilteredHistory();
            updateAnalysisCharts(filteredHistory);
        }

        // Ëé∑ÂèñÂΩìÂâçÁ≠õÈÄâÂêéÁöÑÂéÜÂè≤ËÆ∞ÂΩï
        function getCurrentFilteredHistory() {
            // ËøôÈáåÈúÄË¶ÅÈáçÊñ∞Â∫îÁî®ÂΩìÂâçÁöÑÁ≠õÈÄâÊù°‰ª∂
            const dateFilter = elements.dateFilter.value;
            const typeFilter = elements.typeFilter.value;
            const reasonFilter = elements.reasonFilter.value;
            
            return pointsData.history.filter(record => {
                // Êó∂Èó¥Á≠õÈÄâ
                if (dateFilter !== 'all') {
                    const recordDate = new Date(record.timestamp);
                    const now = new Date();
                    const daysDiff = Math.floor((now - recordDate) / (1000 * 60 * 60 * 24));
                    
                    switch (dateFilter) {
                        case 'today':
                            if (daysDiff > 0) return false;
                            break;
                        case 'week':
                            if (daysDiff > 7) return false;
                            break;
                        case 'month':
                            if (daysDiff > 30) return false;
                            break;
                        case '3months':
                            if (daysDiff > 90) return false;
                            break;
                        case '6months':
                            if (daysDiff > 180) return false;
                            break;
                        case 'year':
                            if (daysDiff > 365) return false;
                            break;
                    }
                }
                
                // Á±ªÂûãÁ≠õÈÄâ
                if (typeFilter !== 'all' && record.type !== typeFilter) {
                    return false;
                }
                
                // ÂéüÂõ†Á≠õÈÄâ
                if (reasonFilter !== 'all' && record.reason !== reasonFilter) {
                    return false;
                }
                
                return true;
            });
        }

        // Êõ¥Êñ∞ÂàÜÊûêÂõæË°®
        function updateAnalysisCharts(filteredHistory) {
            renderCategoryAnalysis(filteredHistory);
            renderTrendAnalysis(filteredHistory);
            renderMonthlyAnalysis(filteredHistory);
        }

        // Ê∏≤ÊüìÁ±ªÂà´ÂàÜÊûê
        function renderCategoryAnalysis(filteredHistory) {
            // Ëé∑ÂæóÂéüÂõ†ÁªüËÆ°
            const earnedReasons = {};
            filteredHistory
                .filter(record => record.type === 'earned')
                .forEach(record => {
                    earnedReasons[record.reason] = (earnedReasons[record.reason] || 0) + record.amount;
                });
            
            // Ê∂àË¥πÂéüÂõ†ÁªüËÆ°
            const spentReasons = {};
            filteredHistory
                .filter(record => record.type === 'spent')
                .forEach(record => {
                    spentReasons[record.reason] = (spentReasons[record.reason] || 0) + record.amount;
                });
            
            // Ê∏≤ÊüìËé∑ÂæóÂéüÂõ†È•ºÂõæ
            renderPieChart(elements.earnedCategoryChart, earnedReasons, 'Ëé∑ÂæóÂéüÂõ†');
            
            // Ê∏≤ÊüìÊâ£ÂáèÂéüÂõ†È•ºÂõæ
            renderPieChart(elements.spentCategoryChart, spentReasons, 'Ê∂àË¥πÂéüÂõ†');
        }

        // Ê∏≤ÊüìË∂ãÂäøÂàÜÊûê
        function renderTrendAnalysis(filteredHistory) {
            // ÊåâÊó•ÊúüÁªüËÆ°ÊØèÊó•ÂáÄÂ¢ûÈïø
            const dailyStats = {};
            filteredHistory.forEach(record => {
                const date = new Date(record.timestamp).toISOString().split('T')[0];
                if (!dailyStats[date]) {
                    dailyStats[date] = { earned: 0, spent: 0, net: 0 };
                }
                
                if (record.type === 'earned') {
                    dailyStats[date].earned += record.amount;
                } else {
                    dailyStats[date].spent += record.amount;
                }
                
                dailyStats[date].net = dailyStats[date].earned - dailyStats[date].spent;
            });
            
            // Ê∏≤ÊüìË∂ãÂäøÂõæ
            renderLineChart(elements.trendChart, dailyStats);
        }

        // Ê∏≤ÊüìÊúàÂ∫¶ÂàÜÊûê
        function renderMonthlyAnalysis(filteredHistory) {
            // ÊåâÊúàÁªüËÆ°
            const monthlyStats = {};
            filteredHistory.forEach(record => {
                const date = new Date(record.timestamp);
                const monthKey = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}`;
                if (!monthlyStats[monthKey]) {
                    monthlyStats[monthKey] = { earned: 0, spent: 0, net: 0 };
                }
                
                if (record.type === 'earned') {
                    monthlyStats[monthKey].earned += record.amount;
                } else {
                    monthlyStats[monthKey].spent += record.amount;
                }
                
                monthlyStats[monthKey].net = monthlyStats[monthKey].earned - monthlyStats[monthKey].spent;
            });
            
            // Ê∏≤ÊüìÊúàÂ∫¶Êü±Áä∂Âõæ
            renderBarChart(elements.monthlyChart, monthlyStats);
        }

        // Ê∏≤ÊüìÈ•ºÂõæ
        function renderPieChart(container, data, title) {
            if (Object.keys(data).length === 0) {
                container.innerHTML = '<div class="chart-empty">ÊöÇÊó†Êï∞ÊçÆ</div>';
                return;
            }
            
            const total = Object.values(data).reduce((sum, val) => sum + val, 0);
            const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57', '#ff9ff3', '#54a0ff'];
            
            let html = '<div class="pie-chart">';
            let colorIndex = 0;
            
            Object.entries(data).forEach(([key, value]) => {
                const percentage = Math.round((value / total) * 100);
                const color = colors[colorIndex % colors.length];
                
                html += `
                    <div class="pie-item">
                        <div class="pie-color" style="background: ${color}"></div>
                        <div class="pie-info">
                            <div class="pie-label">${key}</div>
                            <div class="pie-value">${value} (${percentage}%)</div>
                        </div>
                    </div>
                `;
                colorIndex++;
            });
            
            html += '</div>';
            container.innerHTML = html;
        }

        // Ê∏≤ÊüìÊäòÁ∫øÂõæ
        function renderLineChart(container, data) {
            const entries = Object.entries(data).sort(([a], [b]) => a.localeCompare(b));
            
            if (entries.length === 0) {
                container.innerHTML = '<div class="chart-empty">ÊöÇÊó†Êï∞ÊçÆ</div>';
                return;
            }
            
            const maxValue = Math.max(...entries.map(([, stats]) => Math.abs(stats.net)));
            const chartHeight = 150;
            
            let html = '<div class="line-chart">';
            entries.forEach(([date, stats]) => {
                const day = new Date(date).getDate();
                const height = maxValue > 0 ? (Math.abs(stats.net) / maxValue) * chartHeight : 0;
                const isPositive = stats.net >= 0;
                const color = isPositive ? '#28a745' : '#dc3545';
                
                html += `
                    <div class="line-item">
                        <div class="line-bar" style="height: ${height}px; background: ${color}"></div>
                        <div class="line-label">${day}</div>
                        <div class="line-value">${stats.net > 0 ? '+' : ''}${stats.net}</div>
                    </div>
                `;
            });
            html += '</div>';
            
            container.innerHTML = html;
        }

        // Ê∏≤ÊüìÊü±Áä∂Âõæ
        function renderBarChart(container, data) {
            const entries = Object.entries(data).sort(([a], [b]) => a.localeCompare(b));
            
            if (entries.length === 0) {
                container.innerHTML = '<div class="chart-empty">ÊöÇÊó†Êï∞ÊçÆ</div>';
                return;
            }
            
            const maxValue = Math.max(...entries.map(([, stats]) => Math.max(stats.earned, stats.spent)));
            const chartHeight = 150;
            
            let html = '<div class="bar-chart">';
            entries.forEach(([month, stats]) => {
                const earnedHeight = maxValue > 0 ? (stats.earned / maxValue) * chartHeight : 0;
                const spentHeight = maxValue > 0 ? (stats.spent / maxValue) * chartHeight : 0;
                const monthName = month.split('-')[1] + 'Êúà';
                
                html += `
                    <div class="bar-item">
                        <div class="bar-group">
                            <div class="bar bar-earned" style="height: ${earnedHeight}px" title="Ëé∑Âæó: ${stats.earned}"></div>
                            <div class="bar bar-spent" style="height: ${spentHeight}px" title="Ê∂àË¥π: ${stats.spent}"></div>
                        </div>
                        <div class="bar-label">${monthName}</div>
                        <div class="bar-value">${stats.net > 0 ? '+' : ''}${stats.net}</div>
                    </div>
                `;
            });
            html += '</div>';
            
            container.innerHTML = html;
        }

        // Ê∏≤ÊüìÂéÜÂè≤ËÆ∞ÂΩï
        function renderHistory() {
            // Áõ¥Êé•Ë∞ÉÁî®Á≠õÈÄâÂäüËÉΩÔºåÊòæÁ§∫ÂÖ®ÈÉ®ËÆ∞ÂΩï
            elements.dateFilter.value = 'all';
            elements.typeFilter.value = 'all';
            elements.reasonFilter.value = 'all';
            applyFilters();
        }





        // Ê∏ÖÁ©∫ÂéÜÂè≤ËÆ∞ÂΩï
        function clearHistory() {
            if (confirm('Á°ÆÂÆöË¶ÅÊ∏ÖÁ©∫ÊâÄÊúâÂéÜÂè≤ËÆ∞ÂΩïÂêóÔºüÊ≠§Êìç‰ΩúÊó†Ê≥ïÊí§ÈîÄ„ÄÇ')) {
                pointsData.history = [];
                renderHistory();
                saveData();
                populateReasonFilter();
                applyFilters();
                showToast('ÂéÜÂè≤ËÆ∞ÂΩïÂ∑≤Ê∏ÖÁ©∫');
            }
        }

        // Ê£ÄÊü•ÊàêÂ∞± - ÂÖ®Èù¢‰ºòÂåñ
        function checkAchievements() {
            let newAchievements = [];
            const now = new Date();
            const today = now.toDateString();
            
            // ÂàùÂßãÂåñÊàêÂ∞±ÂØπË±°ÔºàÂ¶ÇÊûú‰∏çÂ≠òÂú®Ôºâ
            if (!pointsData.achievements) {
                pointsData.achievements = {};
            }
            
            // ÂÖ•Èó®Á±ªÊàêÂ∞±
            if (!pointsData.achievements.firstEarn && pointsData.totalEarned > 0) {
                pointsData.achievements.firstEarn = true;
                newAchievements.push('firstEarn');
            }
            
            if (!pointsData.achievements.firstSpend && pointsData.totalSpent > 0) {
                pointsData.achievements.firstSpend = true;
                newAchievements.push('firstSpend');
            }
            
            // ÁßØÂàÜÁ±ªÊàêÂ∞±
            const pointsAchievements = [
                { id: 'points25', threshold: 25 },
                { id: 'points50', threshold: 50 },
                { id: 'points100', threshold: 100 },
                { id: 'points250', threshold: 250 },
                { id: 'points500', threshold: 500 },
                { id: 'points1000', threshold: 1000 }
            ];
            
            pointsAchievements.forEach(achievement => {
                if (!pointsData.achievements[achievement.id] && pointsData.totalEarned >= achievement.threshold) {
                    pointsData.achievements[achievement.id] = true;
                    newAchievements.push(achievement.id);
                }
            });
            
            // ÂùöÊåÅÁ±ªÊàêÂ∞±
            const dailyRecords = getDailyRecords();
            const maxStreak = Math.max(...dailyRecords.map(d => d.streak));
            
            const streakAchievements = [
                { id: 'consistency3', streak: 3 },
                { id: 'consistency7', streak: 7 },
                { id: 'consistency14', streak: 14 },
                { id: 'consistency30', streak: 30 }
            ];
            
            streakAchievements.forEach(achievement => {
                if (!pointsData.achievements[achievement.id] && maxStreak >= achievement.streak) {
                    pointsData.achievements[achievement.id] = true;
                    newAchievements.push(achievement.id);
                }
            });
            

            
            // Â≠¶‰π†Á±ªÊàêÂ∞±
            const studyRecords = pointsData.history.filter(r => 
                r.type === 'earned' && 
                ['ÂÆåÊàê‰Ωú‰∏ö', '‰∏ªÂä®Â≠¶‰π†', '‰∏ªÂä®ÈòÖËØª', 'ÊåâÊó∂ÂÆåÊàê‰Ωú‰∏ö', 'ËØæÂ†ÇË°®Áé∞Â•Ω', 'ËÄÉËØï‰ºòÁßÄ'].includes(r.reason)
            );
            const studyStreak = calculateStreak(studyRecords.map(r => new Date(r.timestamp).toDateString()));
            
            if (!pointsData.achievements.studyStreak && studyStreak >= 7) {
                pointsData.achievements.studyStreak = true;
                newAchievements.push('studyStreak');
            }
            
            const homeworkCount = studyRecords.filter(r => r.reason === 'ÂÆåÊàê‰Ωú‰∏ö' || r.reason === 'ÊåâÊó∂ÂÆåÊàê‰Ωú‰∏ö').length;
            if (!pointsData.achievements.homeworkHero && homeworkCount >= 10) {
                pointsData.achievements.homeworkHero = true;
                newAchievements.push('homeworkHero');
            }
            
            const readingCount = studyRecords.filter(r => r.reason === '‰∏ªÂä®ÈòÖËØª').length;
            if (!pointsData.achievements.readingChamp && readingCount >= 15) {
                pointsData.achievements.readingChamp = true;
                newAchievements.push('readingChamp');
            }
            
            // ÂÅ•Â∫∑Á±ªÊàêÂ∞±
            const healthRecords = pointsData.history.filter(r => 
                r.type === 'earned' && 
                ['Êó©Ëµ∑', 'ÈîªÁÇºË∫´‰Ωì', 'ÂÅ•Â∫∑È•ÆÈ£ü'].includes(r.reason)
            );
            const healthStreak = calculateStreak(healthRecords.map(r => new Date(r.timestamp).toDateString()));
            
            if (!pointsData.achievements.earlyBird) {
                const earlyBirdDays = pointsData.history.filter(r => 
                    r.type === 'earned' && r.reason === 'Êó©Ëµ∑'
                ).map(r => new Date(r.timestamp).toDateString());
                const earlyBirdStreak = calculateStreak([...new Set(earlyBirdDays)]);
                if (earlyBirdStreak >= 5) {
                    pointsData.achievements.earlyBird = true;
                    newAchievements.push('earlyBird');
                }
            }
            
            if (!pointsData.achievements.exerciseFan && healthStreak >= 7) {
                pointsData.achievements.exerciseFan = true;
                newAchievements.push('exerciseFan');
            }
            
            // Á§æ‰∫§Á±ªÊàêÂ∞±
            const helpCount = pointsData.history.filter(r => 
                r.type === 'earned' && 
                ['Â∏ÆÂä©‰ªñ‰∫∫', 'Â∏ÆÂä©ÂÆ∂Âä°', 'Â∏ÆÂä©ÂêåÂ≠¶'].includes(r.reason)
            ).length;
            if (!pointsData.achievements.helper && helpCount >= 10) {
                pointsData.achievements.helper = true;
                newAchievements.push('helper');
            }
            
            const shareCount = pointsData.history.filter(r => 
                r.type === 'earned' && r.reason === 'ÂàÜ‰∫´Áé©ÂÖ∑'
            ).length;
            if (!pointsData.achievements.friend && shareCount >= 10) {
                pointsData.achievements.friend = true;
                newAchievements.push('friend');
            }
            
            const volunteerCount = pointsData.history.filter(r => 
                r.type === 'earned' && r.reason === 'ÂÅöÂøóÊÑøÊúçÂä°'
            ).length;
            if (!pointsData.achievements.volunteer && volunteerCount >= 5) {
                pointsData.achievements.volunteer = true;
                newAchievements.push('volunteer');
            }
            
            // ÁâπÊÆäÁ±ªÊàêÂ∞±
            const todayEarned = pointsData.history
                .filter(r => r.type === 'earned' && new Date(r.timestamp).toDateString() === today)
                .reduce((sum, r) => sum + r.amount, 0);
            if (!pointsData.achievements.perfectDay && todayEarned >= 50) {
                pointsData.achievements.perfectDay = true;
                newAchievements.push('perfectDay');
            }
            
            const maxSpend = Math.max(...pointsData.history.filter(r => r.type === 'spent').map(r => r.amount));
            if (!pointsData.achievements.bigSpender && maxSpend >= 100) {
                pointsData.achievements.bigSpender = true;
                newAchievements.push('bigSpender');
            }
            
            // ÊòæÁ§∫Êñ∞Ëé∑ÂæóÁöÑÊàêÂ∞±
            newAchievements.forEach(achievementId => {
                const achievement = achievements.find(a => a.id === achievementId);
                if (achievement) {
                    showAchievementPopup(achievement);
                }
            });

            renderAchievements();
            saveData();
        }
        
        // Ëé∑ÂèñÊØèÊó•ËÆ∞ÂΩï
        function getDailyRecords() {
            const dailyMap = new Map();
            
            pointsData.history.forEach(record => {
                const date = new Date(record.timestamp).toDateString();
                if (!dailyMap.has(date)) {
                    dailyMap.set(date, { streak: 0, earned: 0, spent: 0 });
                }
                const day = dailyMap.get(date);
                if (record.type === 'earned') {
                    day.earned += record.amount;
                } else {
                    day.spent += record.amount;
                }
            });
            
            return Array.from(dailyMap.entries()).map(([date, data]) => ({
                date,
                ...data
            }));
        }
        
        // ËÆ°ÁÆóËøûÁª≠Â§©Êï∞
        function calculateStreak(dates) {
            if (dates.length === 0) return 0;
            
            dates.sort();
            let streak = 1;
            let maxStreak = 1;
            
            for (let i = 1; i < dates.length; i++) {
                const prevDate = new Date(dates[i-1]);
                const currDate = new Date(dates[i]);
                const diffTime = currDate.getTime() - prevDate.getTime();
                const diffDays = diffTime / (1000 * 3600 * 24);
                
                if (diffDays === 1) {
                    streak++;
                    maxStreak = Math.max(maxStreak, streak);
                } else if (diffDays > 1) {
                    streak = 1;
                }
            }
            
            return maxStreak;
        }

        // ÊòæÁ§∫ÊàêÂ∞±ÂºπÁ™ó
        function showAchievementPopup(achievement) {
            const popup = document.createElement('div');
            popup.className = 'achievement-popup';
            popup.innerHTML = `
                <h4>üèÜ ÊàêÂ∞±Ëß£ÈîÅÔºÅ</h4>
                <div style="font-size: 2em; margin: 10px 0;">${achievement.icon}</div>
                <div style="font-weight: bold; margin-bottom: 5px;">${achievement.title}</div>
                <div style="opacity: 0.9;">${achievement.desc}</div>
            `;
            document.body.appendChild(popup);
            
            setTimeout(() => popup.remove(), 4000);
        }

        // Ê∏≤ÊüìÊàêÂ∞± - ‰ºòÂåñÊòæÁ§∫
        function renderAchievements() {
            const earnedCount = Object.values(pointsData.achievements).filter(Boolean).length;
            const totalCount = achievements.length;
            
            elements.achievementCount.textContent = `${earnedCount}/${totalCount} Â∑≤Ëß£ÈîÅ`;
            
            const achievementsHTML = achievements.map(achievement => {
                const isEarned = pointsData.achievements[achievement.id];
                const difficultyColors = {
                    'easy': '#10b981',
                    'medium': '#f59e0b', 
                    'hard': '#ef4444',
                    'expert': '#8b5cf6'
                };
                const difficultyLabels = {
                    'easy': 'ÁÆÄÂçï',
                    'medium': '‰∏≠Á≠â',
                    'hard': 'Âõ∞Èöæ',
                    'expert': '‰∏ìÂÆ∂'
                };
                
                return `
                    <div class="achievement-card ${isEarned ? 'earned' : ''}">
                        <div class="achievement-icon">${achievement.icon}</div>
                        <div class="achievement-title">${achievement.title}</div>
                        <div class="achievement-desc">${achievement.desc}</div>
                        <div class="achievement-meta">
                            <span class="achievement-category">${achievement.category}</span>
                            <span class="achievement-difficulty" style="color: ${difficultyColors[achievement.difficulty]}">
                                ${difficultyLabels[achievement.difficulty]}
                            </span>
                        </div>
                        ${isEarned ? '<div class="achievement-earned">‚úÖ Â∑≤Ëß£ÈîÅ</div>' : ''}
                    </div>
                `;
            }).join('');
            
            elements.achievementsGrid.innerHTML = achievementsHTML;
        }

        // ÂàáÊç¢Ê†áÁ≠æÈ°µ
        function switchTab(tabName) {
            console.log('ÂàáÊç¢Âà∞Ê†áÁ≠æÈ°µ:', tabName);
            
            // ÈöêËóèÊâÄÊúâÊ†áÁ≠æÈ°µÂÜÖÂÆπ
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // ÁßªÈô§ÊâÄÊúâÊ†áÁ≠æÁöÑÊøÄÊ¥ªÁä∂ÊÄÅ
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // ÊøÄÊ¥ªÈÄâ‰∏≠ÁöÑÊ†áÁ≠æÈ°µ
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
            
            // Â¶ÇÊûúÂàáÊç¢Âà∞ÁªüËÆ°ÂàÜÊûêÊ†áÁ≠æÈ°µÔºåÊ∏≤ÊüìÂõæË°®
            if (tabName === 'stats') {
                renderChart();
            }
        }

        // Ê∏≤ÊüìÁªüËÆ°ÂàÜÊûêÂõæË°®
        function renderChart() {
            console.log('Ê∏≤ÊüìÁªüËÆ°ÂàÜÊûêÂõæË°®');
            const chartContainer = elements.chartContainer;
            
            if (!chartContainer) {
                console.warn('ÂõæË°®ÂÆπÂô®Êú™ÊâæÂà∞');
                return;
            }
            
            // Ëé∑ÂèñÊúÄËøë7Â§©ÁöÑÊï∞ÊçÆ
            const weeklyData = getWeeklyData();
            
            if (weeklyData.length === 0) {
                chartContainer.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #6c757d;">
                        <div style="font-size: 3em; margin-bottom: 20px;">üìä</div>
                        <div style="font-size: 1.2em; margin-bottom: 10px;">ÊöÇÊó†Êï∞ÊçÆ</div>
                        <div>ÂºÄÂßã‰ΩøÁî®ÁßØÂàÜÁ≥ªÁªüÂêéÔºåËøôÈáåÂ∞ÜÊòæÁ§∫ÊÇ®ÁöÑÁßØÂàÜË∂ãÂäøÂõæË°®</div>
                    </div>
                `;
                return;
            }
            
            // ÂàõÂª∫ÂõæË°®HTML
            const chartHTML = createChartHTML(weeklyData);
            chartContainer.innerHTML = chartHTML;
        }
        
        // Ëé∑ÂèñÊúÄËøë7Â§©ÁöÑÊï∞ÊçÆ
        function getWeeklyData() {
            const now = new Date();
            const weeklyData = [];
            
            // ÁîüÊàêÊúÄËøë7Â§©ÁöÑÊó•Êúü
            for (let i = 6; i >= 0; i--) {
                const date = new Date(now);
                date.setDate(date.getDate() - i);
                const dateString = date.toISOString().split('T')[0];
                
                // ËÆ°ÁÆóÂΩìÂ§©Ëé∑ÂæóÁöÑÁßØÂàÜ
                const dayEarned = pointsData.history
                    .filter(record => {
                        const recordDate = new Date(record.timestamp).toISOString().split('T')[0];
                        return record.type === 'earned' && recordDate === dateString;
                    })
                    .reduce((sum, record) => sum + record.amount, 0);
                
                // ËÆ°ÁÆóÂΩìÂ§©Ê∂àË¥πÁöÑÁßØÂàÜ
                const daySpent = pointsData.history
                    .filter(record => {
                        const recordDate = new Date(record.timestamp).toISOString().split('T')[0];
                        return record.type === 'spent' && recordDate === dateString;
                    })
                    .reduce((sum, record) => sum + record.amount, 0);
                
                weeklyData.push({
                    date: date,
                    dateString: dateString,
                    dayOfWeek: date.toLocaleDateString('zh-CN', { weekday: 'short' }),
                    earned: dayEarned,
                    spent: daySpent,
                    net: dayEarned - daySpent
                });
            }
            
            return weeklyData;
        }
        
        // ÂàõÂª∫ÂõæË°®HTML
        function createChartHTML(data) {
            const maxValue = Math.max(...data.map(d => Math.max(d.earned, d.spent)), 10);
            const chartHeight = 300;
            
            let barsHTML = '';
            let labelsHTML = '';
            let statsHTML = '';
            
            data.forEach((day, index) => {
                const earnedHeight = (day.earned / maxValue) * chartHeight;
                const spentHeight = (day.spent / maxValue) * chartHeight;
                const barWidth = 100 / data.length - 2; // ÁïôÂá∫Èó¥Ë∑ù
                
                barsHTML += `
                    <div style="display: inline-block; width: ${barWidth}%; margin: 0 1%; text-align: center; position: relative;">
                        <div style="height: ${chartHeight}px; display: flex; flex-direction: column; justify-content: flex-end; align-items: center;">
                            <div style="width: 100%; margin-bottom: 2px;">
                                <div style="height: ${earnedHeight}px; background: var(--success-gradient); border-radius: 4px; opacity: 0.8; position: relative;">
                                    ${day.earned > 0 ? `<div style="position: absolute; top: -25px; left: 50%; transform: translateX(-50%); font-size: 12px; font-weight: bold; color: #28a745;">+${day.earned}</div>` : ''}
                                </div>
                            </div>
                            <div style="width: 100%;">
                                <div style="height: ${spentHeight}px; background: var(--danger-gradient); border-radius: 4px; opacity: 0.8; position: relative;">
                                    ${day.spent > 0 ? `<div style="position: absolute; top: -25px; left: 50%; transform: translateX(-50%); font-size: 12px; font-weight: bold; color: #dc3545;">-${day.spent}</div>` : ''}
                                </div>
                            </div>
                        </div>
                        <div style="margin-top: 10px; font-size: 12px; color: #6c757d;">${day.dayOfWeek}</div>
                    </div>
                `;
            });
            
            // ËÆ°ÁÆóÁªüËÆ°Êï∞ÊçÆ
            const totalEarned = data.reduce((sum, day) => sum + day.earned, 0);
            const totalSpent = data.reduce((sum, day) => sum + day.spent, 0);
            const activeDays = data.filter(day => day.earned > 0 || day.spent > 0).length;
            const averageEarned = Math.round(totalEarned / 7);
            const averageSpent = Math.round(totalSpent / 7);
            
            statsHTML = `
                <div style="margin-top: 30px; display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                    <div style="background: white; padding: 15px; border-radius: 8px; text-align: center; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                        <div style="font-size: 1.5em; font-weight: bold; color: #28a745;">${totalEarned}</div>
                        <div style="font-size: 0.9em; color: #6c757d;">7Â§©ÊÄªËé∑Âæó</div>
                    </div>
                    <div style="background: white; padding: 15px; border-radius: 8px; text-align: center; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                        <div style="font-size: 1.5em; font-weight: bold; color: #dc3545;">${totalSpent}</div>
                        <div style="font-size: 0.9em; color: #6c757d;">7Â§©ÊÄªÊ∂àË¥π</div>
                    </div>
                    <div style="background: white; padding: 15px; border-radius: 8px; text-align: center; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                        <div style="font-size: 1.5em; font-weight: bold; color: #667eea;">${activeDays}</div>
                        <div style="font-size: 0.9em; color: #6c757d;">Ê¥ªË∑ÉÂ§©Êï∞</div>
                    </div>
                    <div style="background: white; padding: 15px; border-radius: 8px; text-align: center; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                        <div style="font-size: 1.5em; font-weight: bold; color: #17a2b8;">${totalEarned - totalSpent > 0 ? '+' : ''}${totalEarned - totalSpent}</div>
                        <div style="font-size: 0.9em; color: #6c757d;">ÂáÄÂ¢ûÈïø</div>
                    </div>
                </div>
            `;
            
            return `
                <div style="background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
                    <div style="margin-bottom: 20px;">
                        <div style="display: flex; justify-content: center; align-items: center; margin-bottom: 15px;">
                            <div style="display: flex; align-items: center; margin-right: 20px;">
                                <div style="width: 12px; height: 12px; background: var(--success-gradient); border-radius: 2px; margin-right: 8px;"></div>
                                <span style="font-size: 14px; color: #6c757d;">Ëé∑ÂæóÁßØÂàÜ</span>
                            </div>
                            <div style="display: flex; align-items: center;">
                                <div style="width: 12px; height: 12px; background: var(--danger-gradient); border-radius: 2px; margin-right: 8px;"></div>
                                <span style="font-size: 14px; color: #6c757d;">Ê∂àË¥πÁßØÂàÜ</span>
                            </div>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: end; height: ${chartHeight + 40}px; background: #f8f9fa; border-radius: 8px; padding: 20px; overflow-x: auto;">
                            ${barsHTML}
                        </div>
                    </div>
                    ${statsHTML}
                </div>
            `;
        }

        // ÂÆ∂ÈïøÊéßÂà∂Èù¢Êùø
        function openAdminPanel() {
            console.log('ÊâìÂºÄÂÆ∂ÈïøÊéßÂà∂Èù¢Êùø');
            updateAdminStats();
            elements.adminPanel.classList.add('show');
        }

        function closeAdminPanel() {
            console.log('ÂÖ≥Èó≠ÂÆ∂ÈïøÊéßÂà∂Èù¢Êùø');
            elements.adminPanel.classList.remove('show');
        }

        function updateAdminStats() {
            elements.adminTotalPoints.textContent = pointsData.currentPoints;
            elements.adminTotalEarned.textContent = pointsData.totalEarned;
            elements.adminTotalSpent.textContent = pointsData.totalSpent;
            
            // ËÆ°ÁÆóÊ¥ªË∑ÉÂ§©Êï∞
            const uniqueDays = new Set();
            pointsData.history.forEach(record => {
                const date = new Date(record.timestamp).toDateString();
                uniqueDays.add(date);
            });
            elements.adminActivityDays.textContent = uniqueDays.size;
            
            // Ê∏≤ÊüìÂïÜÂ∫óÁâ©ÂìÅÁÆ°ÁêÜÂàóË°®
            renderShopManagement();
        }

        // ÂïÜÂ∫óÁâ©ÂìÅÁÆ°ÁêÜÁõ∏ÂÖ≥ÂèòÈáè
        let editingShopItemId = null;

        // Ê∏≤ÊüìÂïÜÂ∫óÁÆ°ÁêÜÂàóË°®
        function renderShopManagement() {
            const shopItemsList = document.getElementById('shopItemsList');
            if (!shopItemsList || !pointsData.shop.items) return;
            
            if (pointsData.shop.items.length === 0) {
                shopItemsList.innerHTML = '<div style="text-align: center; color: #6c757d; padding: 20px;">ÊöÇÊó†ÂïÜÂ∫óÁâ©ÂìÅ</div>';
                return;
            }
            
            let html = '';
            pointsData.shop.items.forEach(item => {
                const categoryName = getCategoryLabel(item.category);
                html += `
                    <div style="border: 1px solid #dee2e6; border-radius: 8px; padding: 15px; margin-bottom: 10px; background: white; transition: var(--transition);">
                        <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 10px;">
                            <div style="display: flex; align-items: center; flex: 1;">
                                <span style="font-size: 2em; margin-right: 15px;">${item.icon}</span>
                                <div>
                                    <h5 style="margin: 0 0 5px 0; color: var(--theme-text);">${item.name}</h5>
                                    <p style="margin: 0; color: #6c757d; font-size: 14px;">${item.description}</p>
                                    <div style="margin-top: 8px; display: flex; gap: 15px; align-items: center;">
                                        <span style="background: rgba(102, 126, 234, 0.1); color: var(--theme-accent); padding: 2px 8px; border-radius: 12px; font-size: 12px; font-weight: 600;">${categoryName}</span>
                                        <span style="font-weight: bold; color: var(--theme-accent);">${item.price} ${pointsData.settings.currency}</span>
                                    </div>
                                </div>
                            </div>
                            <div style="display: flex; gap: 8px;">
                                <button onclick="editShopItem('${item.id}')" style="padding: 8px 12px; border: none; border-radius: 6px; background: var(--info-gradient); color: white; font-size: 12px; font-weight: 600; cursor: pointer;">ÁºñËæë</button>
                                <button onclick="deleteShopItem('${item.id}')" style="padding: 8px 12px; border: none; border-radius: 6px; background: var(--danger-gradient); color: white; font-size: 12px; font-weight: 600; cursor: pointer;">Âà†Èô§</button>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            shopItemsList.innerHTML = html;
        }

        // Ëé∑ÂèñÂàÜÁ±ªÊòæÁ§∫ÂêçÁß∞
        function getCategoryLabel(category) {
            const labels = {
                'toys': 'üß∏ Áé©ÂÖ∑Á§ºÂìÅ',
                'books': 'üìö Â≠¶‰π†Áî®ÂìÅ',
                'food': 'üç≠ ÁæéÈ£üÈõ∂È£ü',
                'activities': 'üéâ Â®±‰πêÊ¥ªÂä®',
                'privileges': 'üëë ÁâπÊùÉÂ•ñÂä±',
                'custom': 'üé® ÂÆöÂà∂ÊúçÂä°'
            };
            return labels[category] || category;
        }

        // Êèê‰∫§ÂïÜÂ∫óÁâ©ÂìÅÔºàÊ∑ªÂä†ÊàñÁºñËæëÔºâ
        function submitShopItem() {
            const name = document.getElementById('shopItemName').value.trim();
            const icon = document.getElementById('shopItemIcon').value.trim();
            const category = document.getElementById('shopItemCategory').value;
            const price = parseInt(document.getElementById('shopItemPrice').value);
            const description = document.getElementById('shopItemDesc').value.trim();
            
            // È™åËØÅËæìÂÖ•
            if (!name || !icon || !category || !price || price <= 0) {
                showToast('ËØ∑Â°´ÂÜôÊâÄÊúâÂøÖÈúÄÂ≠óÊÆµ', 'error');
                return;
            }
            
            if (editingShopItemId) {
                // ÁºñËæëÁé∞ÊúâÁâ©ÂìÅ
                const itemIndex = pointsData.shop.items.findIndex(item => item.id == editingShopItemId);
                if (itemIndex !== -1) {
                    pointsData.shop.items[itemIndex] = {
                        ...pointsData.shop.items[itemIndex],
                        name,
                        icon,
                        category,
                        price,
                        description
                    };
                    showToast('Áâ©ÂìÅÊõ¥Êñ∞ÊàêÂäüÔºÅ');
                }
            } else {
                // Ê∑ªÂä†Êñ∞Áâ©ÂìÅ
                const newItem = {
                    id: Date.now(),
                    name,
                    icon,
                    category,
                    price,
                    description
                };
                
                pointsData.shop.items.unshift(newItem);
                showToast('Áâ©ÂìÅÊ∑ªÂä†ÊàêÂäüÔºÅ');
            }
            
            // ‰øùÂ≠òÊï∞ÊçÆÂπ∂Âà∑Êñ∞ÁïåÈù¢
            saveData();
            clearShopForm();
            renderShopManagement();
            
            // Â¶ÇÊûúÂïÜÂ∫óÊ≠£Âú®ÊòæÁ§∫Ôºå‰πüÂà∑Êñ∞ÂïÜÂ∫óÊòæÁ§∫
            if (document.getElementById('shop').classList.contains('active')) {
                renderShop();
            }
        }

        // ÁºñËæëÂïÜÂ∫óÁâ©ÂìÅ
        function editShopItem(itemId) {
            const item = pointsData.shop.items.find(item => item.id == itemId);
            if (!item) return;
            
            // Â°´ÂÖÖË°®Âçï
            document.getElementById('shopItemName').value = item.name;
            document.getElementById('shopItemIcon').value = item.icon;
            document.getElementById('shopItemCategory').value = item.category;
            document.getElementById('shopItemPrice').value = item.price;
            document.getElementById('shopItemDesc').value = item.description;
            
            // Êõ¥Êñ∞Ë°®ÂçïÁä∂ÊÄÅ
            document.getElementById('shopFormTitle').textContent = 'ÁºñËæëÁâ©ÂìÅ';
            document.querySelector('#shopItemForm button[type="button"]').textContent = 'Êõ¥Êñ∞Áâ©ÂìÅ';
            document.getElementById('cancelShopEdit').style.display = 'block';
            
            editingShopItemId = itemId;
        }

        // Âà†Èô§ÂïÜÂ∫óÁâ©ÂìÅ
        function deleteShopItem(itemId) {
            if (!confirm('Á°ÆÂÆöË¶ÅÂà†Èô§Ëøô‰∏™Áâ©ÂìÅÂêóÔºü')) {
                return;
            }
            
            const itemIndex = pointsData.shop.items.findIndex(item => item.id == itemId);
            if (itemIndex !== -1) {
                pointsData.shop.items.splice(itemIndex, 1);
                saveData();
                renderShopManagement();
                showToast('Áâ©ÂìÅÂà†Èô§ÊàêÂäüÔºÅ');
                
                // Â¶ÇÊûúÂïÜÂ∫óÊ≠£Âú®ÊòæÁ§∫Ôºå‰πüÂà∑Êñ∞ÂïÜÂ∫óÊòæÁ§∫
                if (document.getElementById('shop').classList.contains('active')) {
                    renderShop();
                }
            }
        }

        // Ê∏ÖÁ©∫ÂïÜÂ∫óÁâ©ÂìÅË°®Âçï
        function clearShopForm() {
            document.getElementById('shopItemForm').reset();
            document.getElementById('shopItemIcon').value = 'üéÅ';
            document.getElementById('shopFormTitle').textContent = 'Ê∑ªÂä†Êñ∞Áâ©ÂìÅ';
            document.querySelector('#shopItemForm button[type="button"]').textContent = 'Ê∑ªÂä†Áâ©ÂìÅ';
            document.getElementById('cancelShopEdit').style.display = 'none';
            editingShopItemId = null;
        }

        function resetAllData() {
            if (confirm('Á°ÆÂÆöË¶ÅÈáçÁΩÆÊâÄÊúâÊï∞ÊçÆÂêóÔºüËøôÂ∞ÜÊ∏ÖÁ©∫ÊâÄÊúâÁßØÂàÜ„ÄÅÂéÜÂè≤ËÆ∞ÂΩïÂíåÊàêÂ∞±ÔºÅÊ≠§Êìç‰ΩúÊó†Ê≥ïÊí§ÈîÄÔºÅ')) {
                if (confirm('ËØ∑ÂÜçÊ¨°Á°ÆËÆ§ÔºöËøôÂ∞ÜÊ∞∏‰πÖÂà†Èô§ÊâÄÊúâÊï∞ÊçÆÔºÅ')) {
                    pointsData = {
                        currentPoints: 0,
                        totalEarned: 0,
                        totalSpent: 0,
                        lastUpdated: null,
                        history: [],
                        settings: {
                            childName: 'Â∞èÊúãÂèã',
                            currency: 'ÁßØÂàÜ',
                            notifications: true,
                            theme: pointsData.settings.theme || 'default'
                        },
                        achievements: {
                            firstEarn: false,
                            points50: false,
                            points100: false,
                            points500: false,
                            firstSpend: false,
                            dailyActive: false,
                            consistency3: false,
                            goalAchiever: false
                        }
                    };
                    
                    updateDisplay();
                    renderHistory();
                    renderAchievements();
                    saveData();
                    
                    closeAdminPanel();
                    showToast('ÊâÄÊúâÊï∞ÊçÆÂ∑≤ÈáçÁΩÆ');
                }
            }
        }

        function generateReport() {
            const report = {
                timestamp: new Date().toISOString(),
                summary: {
                    currentPoints: pointsData.currentPoints,
                    totalEarned: pointsData.totalEarned,
                    totalSpent: pointsData.totalSpent,
                    activityDays: new Set(pointsData.history.map(r => new Date(r.timestamp).toDateString())).size
                },
                achievements: pointsData.achievements,
                settings: pointsData.settings,
                recentHistory: pointsData.history.slice(0, 50) // ÊúÄËøë50Êù°ËÆ∞ÂΩï
            };
            
            const dataStr = JSON.stringify(report, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `ÁßØÂàÜÁ≥ªÁªüËØ¶ÁªÜÊä•Âëä_${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            URL.revokeObjectURL(url);
            
            showToast('ËØ¶ÁªÜÊä•ÂëäÂ∑≤ÁîüÊàêÂπ∂‰∏ãËΩΩÔºÅ');
        }

        // ‰øùÂ≠òËÆæÁΩÆ
        function saveSettings() {
            const newName = elements.childNameInput.value.trim();
            const newCurrency = elements.currencyInput.value;
            const password = elements.passwordInput.value.trim();

            if (!newName) {
                showToast('ËØ∑ËæìÂÖ•ÂßìÂêç', 'error');
                return;
            }

            if (!newCurrency) {
                showToast('ËØ∑ÈÄâÊã©ÁßØÂàÜÂçï‰Ωç', 'error');
                return;
            }

            // Â§ÑÁêÜÂØÜÁ†ÅËÆæÁΩÆ
            if (password) {
                if (password.length < 4 || password.length > 8) {
                    showToast('ÂØÜÁ†ÅÈïøÂ∫¶ÂøÖÈ°ª‰∏∫4-8‰Ωç', 'error');
                    return;
                }
                
                // È™åËØÅÂØÜÁ†ÅÊ†ºÂºèÔºàÊï∞Â≠óÊàñÂ≠óÊØçÔºâ
                const passwordRegex = /^[a-zA-Z0-9]+$/;
                if (!passwordRegex.test(password)) {
                    showToast('ÂØÜÁ†ÅÂè™ËÉΩÂåÖÂê´Êï∞Â≠óÂíåÂ≠óÊØç', 'error');
                    return;
                }
                
                pointsData.settings.password = encryptPassword(password);
                pointsData.settings.passwordEnabled = true;
                
                // Ê∏ÖÁ©∫ÂØÜÁ†ÅËæìÂÖ•Ê°Ü
                elements.passwordInput.value = '';
                
                showToast('ÂØÜÁ†ÅËÆæÁΩÆÊàêÂäüÔºÅüéâ');
            } else if (pointsData.settings.passwordEnabled) {
                // Â¶ÇÊûúÂ∑≤ÁªèËÆæÁΩÆ‰∫ÜÂØÜÁ†ÅÔºå‰ΩÜÁî®Êà∑Ê≤°ÊúâËæìÂÖ•Êñ∞ÂØÜÁ†ÅÔºå‰øùÊåÅÂéüÂØÜÁ†Å
                showToast('ËÆæÁΩÆÂ∑≤‰øùÂ≠òÔºÅüîê');
            } else {
                // Â¶ÇÊûúÊ≤°ÊúâËÆæÁΩÆÂØÜÁ†ÅÔºå‰øùÊåÅÊó†ÂØÜÁ†ÅÁä∂ÊÄÅ
                pointsData.settings.password = '';
                pointsData.settings.passwordEnabled = false;
                showToast('ËÆæÁΩÆÂ∑≤‰øùÂ≠òÔºÅüéâ');
            }

            pointsData.settings.childName = newName;
            pointsData.settings.currency = newCurrency;
            
            updateDisplay(); // Ëøô‰∏™ÂáΩÊï∞Áé∞Âú®‰ºöË∞ÉÁî®updateCurrencyTexts()
            saveData();
        }

        // ÊòæÁ§∫ÊèêÁ§∫Ê∂àÊÅØ
        function showToast(message, type = 'success') {
            // ÁßªÈô§Áé∞ÊúâÁöÑtoast
            const existingToast = document.querySelector('.toast');
            if (existingToast) {
                existingToast.remove();
            }

            // ÂàõÂª∫Êñ∞ÁöÑtoast
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.textContent = message;
            document.body.appendChild(toast);

            // ÊòæÁ§∫Âä®Áîª
            setTimeout(() => toast.classList.add('show'), 100);

            // Ëá™Âä®ÈöêËóè
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }



        // Êú¨Âú∞‰∏ÄË®ÄÊï∞ÊçÆÂ∫ì
        const localQuotes = [
            { text: '‰ªäÂ§©‰πüË¶ÅÂä†Ê≤πÂì¶ÔºÅÊØèÂ§©ÈÉΩÊòØÊñ∞ÁöÑÂºÄÂßãÔºÅ', author: 'Â∞èÂä©Êâã' },
            { text: 'ÊàêÂäüÊ∫ê‰∫éÂùöÊåÅÔºåÊ¢¶ÊÉ≥Ê∫ê‰∫éÂä™Âäõ„ÄÇ', author: 'Âä±ÂøóÂêçË®Ä' },
            { text: 'ÊØè‰∏Ä‰ªΩÂä™ÂäõÈÉΩÂÄºÂæóË¢´ÁúãËßÅÔºåÊØè‰∏Ä‰ªΩÂùöÊåÅÈÉΩÂÄºÂæóË¢´Â∞äÈáç„ÄÇ', author: 'ÊàêÈïøÂØÑËØ≠' },
            { text: '‰∏çÊÄïË∑ØËøúÔºåÂ∞±ÊÄïÂøóÁü≠Ôºõ‰∏çÊÄïÁºìÊÖ¢ÔºåÂ∞±ÊÄïÂ∏∏Á´ô„ÄÇ', author: 'ÊàêËØ≠Ê†ºË®Ä' },
            { text: 'Â≠¶‰π†ÊòØ‰∏ÄÁßçÊÄÅÂ∫¶ÔºåÂùöÊåÅÊòØ‰∏ÄÁßçÂìÅÊ†º„ÄÇ', author: 'ÊïôËÇ≤ÁêÜÂøµ' },
            { text: '‰Ω†ÁöÑÂä™ÂäõÔºåÁªàÂ∞ÜÁæéÂ•Ω„ÄÇ', author: 'Ê≠£ËÉΩÈáèËØ≠ÂΩï' },
            { text: '‰ªäÂ§©ÁöÑ‰Ω†ÔºåÊØîÊò®Â§©Êõ¥‰ºòÁßÄ‰∫ÜÂêóÔºü', author: 'Ëá™ÊàëÊøÄÂä±' },
            { text: 'ÊØè‰∏ÄÊ¨°ËøõÊ≠•ÔºåÈÉΩÊòØÊàêÈïøÁöÑË∂≥Ëøπ„ÄÇ', author: 'ÊàêÈïøÊÑüÊÇü' },
            { text: 'Ê¢¶ÊÉ≥‰∏ç‰ºöËá™Âä®ÊàêÁúüÔºå‰ΩÜÂä™ÂäõÂèØ‰ª•ÊîπÂèòÁé∞Áä∂„ÄÇ', author: 'Â•ãÊñóÁ≤æÁ•û' },
            { text: '‰π¶Â±±ÊúâË∑ØÂã§‰∏∫ÂæÑÔºåÂ≠¶Êµ∑Êó†Ê∂ØËã¶‰ΩúËàü„ÄÇ', author: 'Âè§‰ª£ÂêçË®Ä' },
            { text: 'ÂÆùÂâëÈîã‰ªéÁ£®Á†∫Âá∫ÔºåÊ¢ÖËä±È¶ôËá™Ëã¶ÂØíÊù•„ÄÇ', author: 'Âä±ÂøóÂè§ËØó' },
            { text: 'ÂçÉÈáå‰πãË°åÔºåÂßã‰∫éË∂≥‰∏ã„ÄÇ', author: 'ËÄÅÂ≠ê' },
            { text: 'Â§©Ë°åÂÅ•ÔºåÂêõÂ≠ê‰ª•Ëá™Âº∫‰∏çÊÅØ„ÄÇ', author: 'Âë®Êòì' },
            { text: 'Â≠¶ËÄåÊó∂‰π†‰πãÔºå‰∏ç‰∫¶ËØ¥‰πéÔºü', author: 'Â≠îÂ≠ê' },
            { text: '‰∏â‰∫∫Ë°åÔºåÂøÖÊúâÊàëÂ∏àÁÑâ„ÄÇ', author: 'Â≠îÂ≠ê' },
            { text: 'Áü•‰πãËÄÖ‰∏çÂ¶ÇÂ•Ω‰πãËÄÖÔºåÂ•Ω‰πãËÄÖ‰∏çÂ¶Ç‰πê‰πãËÄÖ„ÄÇ', author: 'Â≠îÂ≠ê' },
            { text: 'Â≠¶ËÄå‰∏çÊÄùÂàôÁΩîÔºåÊÄùËÄå‰∏çÂ≠¶ÂàôÊÆÜ„ÄÇ', author: 'Â≠îÂ≠ê' },
            { text: 'Ê∏©ÊïÖËÄåÁü•Êñ∞ÔºåÂèØ‰ª•‰∏∫Â∏àÁü£„ÄÇ', author: 'Â≠îÂ≠ê' },
            { text: 'ËØª‰π¶Á†¥‰∏áÂç∑Ôºå‰∏ãÁ¨îÂ¶ÇÊúâÁ•û„ÄÇ', author: 'ÊùúÁî´' },
            { text: 'Â∞ëÂ£Æ‰∏çÂä™ÂäõÔºåËÄÅÂ§ßÂæí‰º§ÊÇ≤„ÄÇ', author: 'ÈïøÊ≠åË°å' },
            { text: '‰∏ÄÂØ∏ÂÖâÈò¥‰∏ÄÂØ∏ÈáëÔºåÂØ∏ÈáëÈöæ‰π∞ÂØ∏ÂÖâÈò¥„ÄÇ', author: 'Â¢ûÂπøË¥§Êñá' },
            { text: 'ÈªëÂèë‰∏çÁü•Âã§Â≠¶Êó©ÔºåÁôΩÈ¶ñÊñπÊÇîËØª‰π¶Ëøü„ÄÇ', author: 'È¢úÁúüÂçø' },
            { text: '‰∏öÁ≤æ‰∫éÂã§ÔºåËçí‰∫éÂ¨â„ÄÇ', author: 'Èü©ÊÑà' },
            { text: 'Áéâ‰∏çÁê¢Ôºå‰∏çÊàêÂô®Ôºõ‰∫∫‰∏çÂ≠¶Ôºå‰∏çÁü•ÈÅì„ÄÇ', author: 'Á§ºËÆ∞' },
            { text: 'ÂçöÂ≠¶‰πãÔºåÂÆ°ÈóÆ‰πãÔºåÊÖéÊÄù‰πãÔºåÊòéËæ®‰πãÔºåÁ¨ÉË°å‰πã„ÄÇ', author: 'Á§ºËÆ∞' },
            { text: 'Áü•‰∫∫ËÄÖÊô∫ÔºåËá™Áü•ËÄÖÊòé„ÄÇ', author: 'ËÄÅÂ≠ê' },
            { text: 'Â∑±ÊâÄ‰∏çÊ¨≤ÔºåÂãøÊñΩ‰∫é‰∫∫„ÄÇ', author: 'ËÆ∫ËØ≠' },
            { text: 'ËßÅË¥§ÊÄùÈΩêÁÑâÔºåËßÅ‰∏çË¥§ËÄåÂÜÖËá™ÁúÅ‰πü„ÄÇ', author: 'ËÆ∫ËØ≠' },
            { text: 'ÂêõÂ≠êÂù¶Ëç°Ëç°ÔºåÂ∞è‰∫∫ÈïøÊàöÊàö„ÄÇ', author: 'ËÆ∫ËØ≠' },
            { text: 'Â≠¶ËÄå‰∏çÂéåÔºåËØ≤‰∫∫‰∏çÂÄ¶„ÄÇ', author: 'ËÆ∫ËØ≠' },
            { text: 'ÂÖ¥Ë∂£ÊòØÊúÄÂ•ΩÁöÑËÄÅÂ∏à„ÄÇ', author: 'Áà±Âõ†ÊñØÂù¶' },
            { text: 'ÊÉ≥Ë±°ÂäõÊØîÁü•ËØÜÊõ¥ÈáçË¶Å„ÄÇ', author: 'Áà±Âõ†ÊñØÂù¶' },
            { text: 'ÊàêÂäüÊòØ1%ÁöÑÁÅµÊÑüÂä†‰∏ä99%ÁöÑÊ±óÊ∞¥„ÄÇ', author: 'Áà±Ëø™Áîü' },
            { text: 'Â§±Ë¥•ÊòØÊàêÂäü‰πãÊØç„ÄÇ', author: 'Ë∞öËØ≠' },
            { text: 'ÂùöÊåÅÂ∞±ÊòØËÉúÂà©„ÄÇ', author: 'Ë∞öËØ≠' },
            { text: 'Âè™Ë¶ÅÂäüÂ§´Ê∑±ÔºåÈìÅÊùµÁ£®ÊàêÈíà„ÄÇ', author: 'Ë∞öËØ≠' },
            { text: 'Ê∞¥Êª¥Áü≥Á©øÔºåÁª≥ÈîØÊú®Êñ≠„ÄÇ', author: 'Ë∞öËØ≠' },
            { text: 'Âè™Ë¶ÅÂäüÂ§´Ê∑±ÔºåÈìÅÊùµÁ£®ÊàêÈíà„ÄÇ', author: 'ÊùéÁôΩ' },
            { text: 'Â±±ÈáçÊ∞¥Â§çÁñëÊó†Ë∑ØÔºåÊü≥ÊöóËä±ÊòéÂèà‰∏ÄÊùë„ÄÇ', author: 'ÈôÜÊ∏∏' },
            { text: '‰ºöÂΩìÂáåÁªùÈ°∂Ôºå‰∏ÄËßà‰ºóÂ±±Â∞è„ÄÇ', author: 'ÊùúÁî´' },
            { text: '‰∏çÁïèÊµÆ‰∫ëÈÅÆÊúõÁúºÔºåËá™ÁºòË∫´Âú®ÊúÄÈ´òÂ±Ç„ÄÇ', author: 'ÁéãÂÆâÁü≥' },
            { text: 'Â§©ÁîüÊàëÊùêÂøÖÊúâÁî®ÔºåÂçÉÈáëÊï£Â∞ΩËøòÂ§çÊù•„ÄÇ', author: 'ÊùéÁôΩ' },
            { text: 'ÈïøÈ£éÁ†¥Êµ™‰ºöÊúâÊó∂ÔºåÁõ¥ÊåÇ‰∫ëÂ∏ÜÊµéÊ≤ßÊµ∑„ÄÇ', author: 'ÊùéÁôΩ' },
            { text: 'ÂçÉÊ∑ò‰∏áÊºâËôΩËæõËã¶ÔºåÂêπÂ∞ΩÁãÇÊ≤ôÂßãÂà∞Èáë„ÄÇ', author: 'ÂàòÁ¶πÈî°' },
            { text: 'Ê¨≤Á©∑ÂçÉÈáåÁõÆÔºåÊõ¥‰∏ä‰∏ÄÂ±ÇÊ•º„ÄÇ', author: 'Áéã‰πãÊ∂£' },
            { text: '‰ºöÊåΩÈõïÂºìÂ¶ÇÊª°ÊúàÔºåË•øÂåóÊúõÔºåÂ∞ÑÂ§©Áãº„ÄÇ', author: 'ËãèËΩº' },
            { text: 'ËÄÅÈ™•‰ºèÊû•ÔºåÂøóÂú®ÂçÉÈáå„ÄÇ', author: 'ÊõπÊìç' },
            { text: 'Ë∑ØÊº´Êº´ÂÖ∂‰øÆËøúÂÖÆÔºåÂêæÂ∞Ü‰∏ä‰∏ãËÄåÊ±ÇÁ¥¢„ÄÇ', author: 'Â±àÂéü' },
            { text: 'Â§©ÁîüÊàëÊùêÂøÖÊúâÁî®ÔºåÂçÉÈáëÊï£Â∞ΩËøòÂ§çÊù•„ÄÇ', author: 'ÊùéÁôΩ' },
            { text: 'ÈïøÈ£éÁ†¥Êµ™‰ºöÊúâÊó∂ÔºåÁõ¥ÊåÇ‰∫ëÂ∏ÜÊµéÊ≤ßÊµ∑„ÄÇ', author: 'ÊùéÁôΩ' },
            { text: '‰∫∫ÁîüÂæóÊÑèÈ°ªÂ∞ΩÊ¨¢ÔºåËé´‰ΩøÈáëÊ®ΩÁ©∫ÂØπÊúà„ÄÇ', author: 'ÊùéÁôΩ' },
            { text: '‰ª∞Â§©Â§ßÁ¨ëÂá∫Èó®ÂéªÔºåÊàëËæàÂ≤ÇÊòØËì¨Ëíø‰∫∫„ÄÇ', author: 'ÊùéÁôΩ' },
            { text: '‰∏çÈ£ûÂàôÂ∑≤Ôºå‰∏ÄÈ£ûÂÜ≤Â§©Ôºõ‰∏çÈ∏£ÂàôÂ∑≤Ôºå‰∏ÄÈ∏£ÊÉä‰∫∫„ÄÇ', author: 'Âè≤ËÆ∞' },
            { text: 'Âøó‰∏çÁ´ãÔºåÂ§©‰∏ãÊó†ÂèØÊàê‰πã‰∫ã„ÄÇ', author: 'ÁéãÈò≥Êòé' },
            { text: 'Â≠¶Â¶ÇÈÄÜÊ∞¥Ë°åËàüÔºå‰∏çËøõÂàôÈÄÄ„ÄÇ', author: 'Â¢ûÂπøË¥§Êñá' },
            { text: 'ÈùûÂ≠¶Êó†‰ª•ÂπøÊâçÔºåÈùûÂøóÊó†‰ª•ÊàêÂ≠¶„ÄÇ', author: 'ËØ∏Ëëõ‰∫Æ' },
            { text: '‰∏âÊõ¥ÁÅØÁÅ´‰∫îÊõ¥È∏°ÔºåÊ≠£ÊòØÁî∑ÂÑøËØª‰π¶Êó∂„ÄÇ', author: 'È¢úÁúüÂçø' },
            { text: 'Ëé´ÊÑÅÂâçË∑ØÊó†Áü•Â∑±ÔºåÂ§©‰∏ãË∞Å‰∫∫‰∏çËØÜÂêõ„ÄÇ', author: 'È´òÈÄÇ' },
            { text: 'Êµ∑ÂÜÖÂ≠òÁü•Â∑±ÔºåÂ§©Ê∂ØËã•ÊØîÈÇª„ÄÇ', author: 'ÁéãÂãÉ' },
            { text: 'Ê°ÉËä±ÊΩ≠Ê∞¥Ê∑±ÂçÉÂ∞∫Ôºå‰∏çÂèäÊ±™‰º¶ÈÄÅÊàëÊÉÖ„ÄÇ', author: 'ÊùéÁôΩ' },
            { text: 'Ê¥õÈò≥‰∫≤ÂèãÂ¶ÇÁõ∏ÈóÆÔºå‰∏ÄÁâáÂÜ∞ÂøÉÂú®ÁéâÂ£∂„ÄÇ', author: 'ÁéãÊòåÈæÑ' },
            { text: 'ÂäùÂêõÊõ¥Â∞Ω‰∏ÄÊùØÈÖíÔºåË•øÂá∫Èò≥ÂÖ≥Êó†ÊïÖ‰∫∫„ÄÇ', author: 'ÁéãÁª¥' },
            { text: 'Áã¨Âú®ÂºÇ‰π°‰∏∫ÂºÇÂÆ¢ÔºåÊØèÈÄ¢‰Ω≥ËäÇÂÄçÊÄù‰∫≤„ÄÇ', author: 'ÁéãÁª¥' },
            { text: '‰ΩÜÊÑø‰∫∫Èïø‰πÖÔºåÂçÉÈáåÂÖ±Â©µÂ®ü„ÄÇ', author: 'ËãèËΩº' },
            { text: 'ÊòéÊúàÂá†Êó∂ÊúâÔºåÊääÈÖíÈóÆÈùíÂ§©„ÄÇ', author: 'ËãèËΩº' },
            { text: '‰∫∫ÊúâÊÇ≤Ê¨¢Á¶ªÂêàÔºåÊúàÊúâÈò¥Êô¥ÂúÜÁº∫„ÄÇ', author: 'ËãèËΩº' },
            { text: 'Êò•Áú†‰∏çËßâÊôìÔºåÂ§ÑÂ§ÑÈóªÂïºÈ∏ü„ÄÇ', author: 'Â≠üÊµ©ÁÑ∂' },
            { text: 'Êò•Ê±üÊΩÆÊ∞¥ËøûÊµ∑Âπ≥ÔºåÊµ∑‰∏äÊòéÊúàÂÖ±ÊΩÆÁîü„ÄÇ', author: 'Âº†Ëã•Ëôö' },
            { text: 'Êó•Âá∫Ê±üËä±Á∫¢ËÉúÁÅ´ÔºåÊò•Êù•Ê±üÊ∞¥ÁªøÂ¶ÇËìù„ÄÇ', author: 'ÁôΩÂ±ÖÊòì' },
            { text: 'Á´πÂ§ñÊ°ÉËä±‰∏â‰∏§ÊûùÔºåÊò•Ê±üÊ∞¥ÊöñÈ∏≠ÂÖàÁü•„ÄÇ', author: 'ËãèËΩº' },
            { text: 'Êé•Â§©Ëé≤Âè∂Êó†Á©∑Á¢ßÔºåÊò†Êó•Ëç∑Ëä±Âà´Ê†∑Á∫¢„ÄÇ', author: 'Êù®‰∏áÈáå' },
            { text: 'ÁßãÈ£éËêßÁëüÔºåÊ¥™Ê≥¢Ê∂åËµ∑„ÄÇ', author: 'ÊõπÊìç' },
            { text: 'ÂøΩÂ¶Ç‰∏ÄÂ§úÊò•È£éÊù•ÔºåÂçÉÊ†ë‰∏áÊ†ëÊ¢®Ëä±ÂºÄ„ÄÇ', author: 'Â≤ëÂèÇ' },
            { text: 'ÂçÉÈáåÂÜ∞Â∞ÅÔºå‰∏áÈáåÈõ™È£ò„ÄÇ', author: 'ÊØõÊ≥Ω‰∏ú' },
            { text: 'Â¢ôËßíÊï∞ÊûùÊ¢ÖÔºåÂáåÂØíÁã¨Ëá™ÂºÄ„ÄÇ', author: 'ÁéãÂÆâÁü≥' },
            { text: 'ÂæÖÂà∞ÁßãÊù•‰πùÊúàÂÖ´ÔºåÊàëËä±ÂºÄÂêéÁôæËä±ÊùÄ„ÄÇ', author: 'ÈªÑÂ∑¢' },
            { text: 'ÈáéÁÅ´ÁÉß‰∏çÂ∞ΩÔºåÊò•È£éÂêπÂèàÁîü„ÄÇ', author: 'ÁôΩÂ±ÖÊòì' },
            { text: 'Êò•Ëâ≤Êª°Âõ≠ÂÖ≥‰∏ç‰ΩèÔºå‰∏ÄÊûùÁ∫¢ÊùèÂá∫Â¢ôÊù•„ÄÇ', author: 'Âè∂ÁªçÁøÅ' },
            { text: 'Á≠âÈó≤ËØÜÂæó‰∏úÈ£éÈù¢Ôºå‰∏áÁ¥´ÂçÉÁ∫¢ÊÄªÊòØÊò•„ÄÇ', author: 'Êú±ÁÜπ' },
            { text: '‰∏§‰∏™ÈªÑÈπÇÈ∏£Áø†Êü≥Ôºå‰∏ÄË°åÁôΩÈπ≠‰∏äÈùíÂ§©„ÄÇ', author: 'ÊùúÁî´' },
            { text: 'ËêΩÈúû‰∏éÂ≠§ÈπúÈΩêÈ£ûÔºåÁßãÊ∞¥ÂÖ±ÈïøÂ§©‰∏ÄËâ≤„ÄÇ', author: 'ÁéãÂãÉ' },
            { text: 'Â±±ÈáçÊ∞¥Â§çÁñëÊó†Ë∑ØÔºåÊü≥ÊöóËä±ÊòéÂèà‰∏ÄÊùë„ÄÇ', author: 'ÈôÜÊ∏∏' },
            { text: 'Â§ïÈò≥Êó†ÈôêÂ•ΩÔºåÂè™ÊòØËøëÈªÑÊòè„ÄÇ', author: 'ÊùéÂïÜÈöê' },
            { text: 'Â§ßÊº†Â≠§ÁÉüÁõ¥ÔºåÈïøÊ≤≥ËêΩÊó•ÂúÜ„ÄÇ', author: 'ÁéãÁª¥' },
            { text: 'ÈªÑÊ≤≥Ëøú‰∏äÁôΩ‰∫ëÈó¥Ôºå‰∏ÄÁâáÂ≠§Âüé‰∏á‰ªûÂ±±„ÄÇ', author: 'Áéã‰πãÊ∂£' },
            { text: 'ÈïøÊ±üÂêéÊµ™Êé®ÂâçÊµ™ÔºåÊµÆ‰∫ãÊñ∞‰∫∫Êç¢Êóß‰∫∫„ÄÇ', author: 'Ë∞öËØ≠' },
            { text: 'Êµ∑ÈòîÂá≠È±ºË∑ÉÔºåÂ§©È´ò‰ªªÈ∏üÈ£û„ÄÇ', author: 'Ë∞öËØ≠' },
            { text: 'Â±±È´òÊúàÂ∞èÔºåÊ∞¥ËêΩÁü≥Âá∫„ÄÇ', author: 'ËãèËΩº' },
            { text: '‰ºöÂΩìÂáåÁªùÈ°∂Ôºå‰∏ÄËßà‰ºóÂ±±Â∞è„ÄÇ', author: 'ÊùúÁî´' },
            { text: '‰∏çÁïèÊµÆ‰∫ëÈÅÆÊúõÁúºÔºåËá™ÁºòË∫´Âú®ÊúÄÈ´òÂ±Ç„ÄÇ', author: 'ÁéãÂÆâÁü≥' },
            { text: 'ÂçÉÊ∑ò‰∏áÊºâËôΩËæõËã¶ÔºåÂêπÂ∞ΩÁãÇÊ≤ôÂßãÂà∞Èáë„ÄÇ', author: 'ÂàòÁ¶πÈî°' },
            { text: 'Â±±ÈáçÊ∞¥Â§çÁñëÊó†Ë∑ØÔºåÊü≥ÊöóËä±ÊòéÂèà‰∏ÄÊùë„ÄÇ', author: 'ÈôÜÊ∏∏' },
            { text: 'ÂÆùÂâëÈîã‰ªéÁ£®Á†∫Âá∫ÔºåÊ¢ÖËä±È¶ôËá™Ëã¶ÂØíÊù•„ÄÇ', author: 'Ë∞öËØ≠' },
            { text: 'Âè™Ë¶ÅÂäüÂ§´Ê∑±ÔºåÈìÅÊùµÁ£®ÊàêÈíà„ÄÇ', author: 'Ë∞öËØ≠' },
            { text: 'Ê∞¥Êª¥Áü≥Á©øÔºåÁª≥ÈîØÊú®Êñ≠„ÄÇ', author: 'Ë∞öËØ≠' },
            { text: 'Èî≤ËÄåËàç‰πãÔºåÊúΩÊú®‰∏çÊäòÔºõÈî≤ËÄå‰∏çËàçÔºåÈáëÁü≥ÂèØÈïÇ„ÄÇ', author: 'ËçÄÂ≠ê' },
            { text: 'Áª≥ÈîØÊú®Êñ≠ÔºåÊ∞¥Êª¥Áü≥Á©ø„ÄÇ', author: 'Ë∞öËØ≠' },
            { text: 'ÂÜ∞ÂÜª‰∏âÂ∞∫ÔºåÈùû‰∏ÄÊó•‰πãÂØí„ÄÇ', author: 'Ë∞öËØ≠' },
            { text: 'Âè∞‰∏ä‰∏ÄÂàÜÈíüÔºåÂè∞‰∏ãÂçÅÂπ¥Âäü„ÄÇ', author: 'Ë∞öËØ≠' },
            { text: 'ÂÜ∞ÂÜª‰∏âÂ∞∫ÔºåÈùû‰∏ÄÊó•‰πãÂØí„ÄÇ', author: 'Ë∞öËØ≠' },
            { text: '‰∏ÄÊó•‰∏çËØªÂè£ÁîüÔºå‰∏ÄÊó•‰∏çÂÜôÊâãÁîü„ÄÇ', author: 'Ë∞öËØ≠' },
            { text: 'ËØª‰π¶ÁôæÈÅçÔºåÂÖ∂‰πâËá™ËßÅ„ÄÇ', author: '‰∏âÂõΩÂøó' },
            { text: 'Â≠¶ËÄåÊó∂‰π†‰πãÔºå‰∏ç‰∫¶ËØ¥‰πéÔºü', author: 'ËÆ∫ËØ≠' },
            { text: 'Ê∏©ÊïÖËÄåÁü•Êñ∞ÔºåÂèØ‰ª•‰∏∫Â∏àÁü£„ÄÇ', author: 'ËÆ∫ËØ≠' },
            { text: 'Â≠¶ËÄå‰∏çÊÄùÂàôÁΩîÔºåÊÄùËÄå‰∏çÂ≠¶ÂàôÊÆÜ„ÄÇ', author: 'ËÆ∫ËØ≠' },
            { text: 'Áü•‰πãËÄÖ‰∏çÂ¶ÇÂ•Ω‰πãËÄÖÔºåÂ•Ω‰πãËÄÖ‰∏çÂ¶Ç‰πê‰πãËÄÖ„ÄÇ', author: 'ËÆ∫ËØ≠' },
            { text: '‰∏â‰∫∫Ë°åÔºåÂøÖÊúâÊàëÂ∏àÁÑâ„ÄÇ', author: 'ËÆ∫ËØ≠' },
            { text: 'Â∑±ÊâÄ‰∏çÊ¨≤ÔºåÂãøÊñΩ‰∫é‰∫∫„ÄÇ', author: 'ËÆ∫ËØ≠' },
            { text: 'ËßÅË¥§ÊÄùÈΩêÁÑâÔºåËßÅ‰∏çË¥§ËÄåÂÜÖËá™ÁúÅ‰πü„ÄÇ', author: 'ËÆ∫ËØ≠' },
            { text: 'ÂêõÂ≠êÂù¶Ëç°Ëç°ÔºåÂ∞è‰∫∫ÈïøÊàöÊàö„ÄÇ', author: 'ËÆ∫ËØ≠' },
            { text: 'Â≠¶ËÄå‰∏çÂéåÔºåËØ≤‰∫∫‰∏çÂÄ¶„ÄÇ', author: 'ËÆ∫ËØ≠' },
            { text: 'Âøó‰∫éÈÅìÔºåÊçÆ‰∫éÂæ∑Ôºå‰æù‰∫é‰ªÅÔºåÊ∏∏‰∫éËâ∫„ÄÇ', author: 'ËÆ∫ËØ≠' },
            { text: 'ÊïèËÄåÂ•ΩÂ≠¶Ôºå‰∏çËÄª‰∏ãÈóÆ„ÄÇ', author: 'ËÆ∫ËØ≠' },
            { text: 'ÂçöÂ≠¶ËÄåÁ¨ÉË°åÔºåÂàáÈóÆËÄåËøëÊÄù„ÄÇ', author: 'ËÆ∫ËØ≠' },
            { text: '‰∏âÂÜõÂèØÂ§∫Â∏Ö‰πüÔºåÂåπÂ§´‰∏çÂèØÂ§∫Âøó‰πü„ÄÇ', author: 'ËÆ∫ËØ≠' },
            { text: 'Â≤ÅÂØíÔºåÁÑ∂ÂêéÁü•ÊùæÊüè‰πãÂêéÂáã‰πü„ÄÇ', author: 'ËÆ∫ËØ≠' },
            { text: 'ÂêõÂ≠êÂñª‰∫é‰πâÔºåÂ∞è‰∫∫Âñª‰∫éÂà©„ÄÇ', author: 'ËÆ∫ËØ≠' },
            { text: 'ÂêõÂ≠êÂíåËÄå‰∏çÂêåÔºåÂ∞è‰∫∫ÂêåËÄå‰∏çÂíå„ÄÇ', author: 'ËÆ∫ËØ≠' },
            { text: 'ÂêõÂ≠êÊàê‰∫∫‰πãÁæéÔºå‰∏çÊàê‰∫∫‰πãÊÅ∂„ÄÇ', author: 'ËÆ∫ËØ≠' },
            { text: 'ÂêõÂ≠ê‰ª•Êñá‰ºöÂèãÔºå‰ª•ÂèãËæÖ‰ªÅ„ÄÇ', author: 'ËÆ∫ËØ≠' },
            { text: 'Â∑ßË®Ä‰ª§Ëâ≤ÔºåÈ≤úÁü£‰ªÅ„ÄÇ', author: 'ËÆ∫ËØ≠' },
            { text: '‰∫∫ËÄåÊó†‰ø°Ôºå‰∏çÁü•ÂÖ∂ÂèØ‰πü„ÄÇ', author: 'ËÆ∫ËØ≠' },
            { text: 'Âæ∑‰∏çÂ≠§ÔºåÂøÖÊúâÈÇª„ÄÇ', author: 'ËÆ∫ËØ≠' },
            { text: 'Â∑•Ê¨≤ÂñÑÂÖ∂‰∫ãÔºåÂøÖÂÖàÂà©ÂÖ∂Âô®„ÄÇ', author: 'ËÆ∫ËØ≠' },
            { text: 'ËßÅ‰πâ‰∏ç‰∏∫ÔºåÊó†Âãá‰πü„ÄÇ', author: 'ËÆ∫ËØ≠' },
            { text: 'Â£´‰∏∫Áü•Â∑±ËÄÖÊ≠ªÔºåÂ•≥‰∏∫ÊÇ¶Â∑±ËÄÖÂÆπ„ÄÇ', author: 'Âè≤ËÆ∞' },
            { text: 'ÁáïÈõÄÂÆâÁü•È∏øÈπÑ‰πãÂøóÂìâÔºÅ', author: 'Âè≤ËÆ∞' },
            { text: '‰∫∫Âõ∫Êúâ‰∏ÄÊ≠ªÔºåÊàñÈáç‰∫éÊ≥∞Â±±ÔºåÊàñËΩª‰∫éÈ∏øÊØõ„ÄÇ', author: 'Âè≤ËÆ∞' },
            { text: 'Á©∂Â§©‰∫∫‰πãÈôÖÔºåÈÄöÂè§‰ªä‰πãÂèòÔºåÊàê‰∏ÄÂÆ∂‰πãË®Ä„ÄÇ', author: 'Âè≤ËÆ∞' },
            { text: 'ËøêÁ≠πÂ∏∑ÂπÑÔºåÂÜ≥ËÉúÂçÉÈáå‰πãÂ§ñ„ÄÇ', author: 'Âè≤ËÆ∞' },
            { text: 'Â§ßË°å‰∏çÈ°æÁªÜË∞®ÔºåÂ§ßÁ§º‰∏çËæûÂ∞èËÆ©„ÄÇ', author: 'Âè≤ËÆ∞' },
            { text: '‰∫∫‰∏∫ÂàÄ‰øéÔºåÊàë‰∏∫È±ºËÇâ„ÄÇ', author: 'Âè≤ËÆ∞' },
            { text: 'È°πÂ∫ÑËàûÂâëÔºåÊÑèÂú®Ê≤õÂÖ¨„ÄÇ', author: 'Âè≤ËÆ∞' },
            { text: 'Êô∫ËÄÖÂçÉËôëÔºåÂøÖÊúâ‰∏ÄÂ§±ÔºõÊÑöËÄÖÂçÉËôëÔºåÂøÖÊúâ‰∏ÄÂæó„ÄÇ', author: 'Âè≤ËÆ∞' },
            { text: 'Ê°ÉÊùéÊª°Â§©‰∏ãÔºå‰ΩïÁî®Â†ÇÂâçÊõ¥ÁßçËä±„ÄÇ', author: 'ÁôΩÂ±ÖÊòì' },
            { text: 'Êò•ËöïÂà∞Ê≠ª‰∏ùÊñπÂ∞ΩÔºåËú°ÁÇ¨ÊàêÁÅ∞Ê≥™ÂßãÂπ≤„ÄÇ', author: 'ÊùéÂïÜÈöê' },
            { text: 'ËêΩÁ∫¢‰∏çÊòØÊó†ÊÉÖÁâ©ÔºåÂåñ‰ΩúÊò•Ê≥•Êõ¥Êä§Ëä±„ÄÇ', author: 'ÈæöËá™Áèç' },
            { text: 'ÈááÂæóÁôæËä±ÊàêËúúÂêéÔºå‰∏∫Ë∞ÅËæõËã¶‰∏∫Ë∞ÅÁîú„ÄÇ', author: 'ÁΩóÈöê' },
            { text: 'ÈöèÈ£éÊΩúÂÖ•Â§úÔºåÊ∂¶Áâ©ÁªÜÊó†Â£∞„ÄÇ', author: 'ÊùúÁî´' },
            { text: 'ÂçÅÂπ¥Ê†ëÊú®ÔºåÁôæÂπ¥Ê†ë‰∫∫„ÄÇ', author: 'ÁÆ°Â≠ê' },
            { text: 'Â∏àËÄÖÔºåÊâÄ‰ª•‰º†ÈÅìÂèó‰∏öËß£ÊÉë‰πü„ÄÇ', author: 'Èü©ÊÑà' },
            { text: '‰∏ÄÊó•‰∏∫Â∏àÔºåÁªàË∫´‰∏∫Áà∂„ÄÇ', author: 'Ë∞öËØ≠' },
            { text: 'ÁªèÂ∏àÊòìÂæóÔºå‰∫∫Â∏àÈöæÊ±Ç„ÄÇ', author: 'Âè∏È©¨ÂÖâ' },
            { text: 'ÈùíÔºåÂèñ‰πã‰∫éËìùÔºåËÄåÈùí‰∫éËìù„ÄÇ', author: 'ËçÄÂ≠ê' },
            { text: 'ÂºüÂ≠ê‰∏çÂøÖ‰∏çÂ¶ÇÂ∏àÔºåÂ∏à‰∏çÂøÖË¥§‰∫éÂºüÂ≠ê„ÄÇ', author: 'Èü©ÊÑà' },
            { text: 'Â≠¶Ë¥µÂæóÂ∏àÔºå‰∫¶Ë¥µÂæóÂèã„ÄÇ', author: 'ÂîêÁîÑ' },
            { text: 'Â∏àÈÅìÊó¢Â∞äÔºåÂ≠¶È£éËá™ÂñÑ„ÄÇ', author: 'Â∫∑Êúâ‰∏∫' },
            { text: 'ÂñÑ‰πãÊú¨Âú®ÊïôÔºåÊïô‰πãÊú¨Âú®Â∏à„ÄÇ', author: 'ÊùéËßè' },
            { text: 'Â∏àËÄÖÔºå‰∫∫‰πãÊ®°ËåÉ‰πü„ÄÇ', author: 'Êù®ÈõÑ' },
            { text: 'Â≠¶È´ò‰∏∫Â∏àÔºåË∫´Ê≠£‰∏∫ËåÉ„ÄÇ', author: 'Èô∂Ë°åÁü•' },
            { text: 'Ë∫´ÊïôÈáç‰∫éË®ÄÊïô„ÄÇ', author: 'Ë∞öËØ≠' },
            { text: 'ÂÖ∂Ë∫´Ê≠£Ôºå‰∏ç‰ª§ËÄåË°åÔºõÂÖ∂Ë∫´‰∏çÊ≠£ÔºåËôΩ‰ª§‰∏ç‰ªé„ÄÇ', author: 'ËÆ∫ËØ≠' },
            { text: 'Â∑±‰∏çÊ≠£ÔºåÁÑâËÉΩÊ≠£‰∫∫„ÄÇ', author: 'ËÆ∫ËØ≠' },
            { text: 'Ê¨≤Ê≠£‰∫∫ÔºåÂÖàÊ≠£Â∑±„ÄÇ', author: 'Ë∞öËØ≠' },
            { text: 'ÂÖ∂Ë∫´Ê≠£Ôºå‰∏ç‰ª§ËÄåË°å„ÄÇ', author: 'ËÆ∫ËØ≠' },
            { text: 'Ê°ÉÊùé‰∏çË®ÄÔºå‰∏ãËá™ÊàêËπä„ÄÇ', author: 'Âè≤ËÆ∞' },
            { text: 'Â≠¶ËÄåÊó∂‰π†‰πãÔºå‰∏ç‰∫¶ËØ¥‰πéÔºü', author: 'ËÆ∫ËØ≠' },
            { text: 'Ê∏©ÊïÖËÄåÁü•Êñ∞ÔºåÂèØ‰ª•‰∏∫Â∏àÁü£„ÄÇ', author: 'ËÆ∫ËØ≠' },
            { text: 'Â≠¶ËÄå‰∏çÊÄùÂàôÁΩîÔºåÊÄùËÄå‰∏çÂ≠¶ÂàôÊÆÜ„ÄÇ', author: 'ËÆ∫ËØ≠' },
            { text: 'Áü•‰πãËÄÖ‰∏çÂ¶ÇÂ•Ω‰πãËÄÖÔºåÂ•Ω‰πãËÄÖ‰∏çÂ¶Ç‰πê‰πãËÄÖ„ÄÇ', author: 'ËÆ∫ËØ≠' },
            { text: '‰∏â‰∫∫Ë°åÔºåÂøÖÊúâÊàëÂ∏àÁÑâ„ÄÇ', author: 'ËÆ∫ËØ≠' },
            { text: 'Â∑±ÊâÄ‰∏çÊ¨≤ÔºåÂãøÊñΩ‰∫é‰∫∫„ÄÇ', author: 'ËÆ∫ËØ≠' },
            { text: 'ËßÅË¥§ÊÄùÈΩêÁÑâÔºåËßÅ‰∏çË¥§ËÄåÂÜÖËá™ÁúÅ‰πü„ÄÇ', author: 'ËÆ∫ËØ≠' },
            { text: 'ÂêõÂ≠êÂù¶Ëç°Ëç°ÔºåÂ∞è‰∫∫ÈïøÊàöÊàö„ÄÇ', author: 'ËÆ∫ËØ≠' },
            { text: 'Â≠¶ËÄå‰∏çÂéåÔºåËØ≤‰∫∫‰∏çÂÄ¶„ÄÇ', author: 'ËÆ∫ËØ≠' }
        ];

        // ÊØèÊó•‰∏ÄË®ÄÂäüËÉΩ
        function initDailyQuote() {
            console.log('ÂàùÂßãÂåñÈöèÊú∫‰∏ÄË®ÄÂäüËÉΩ...');
            
            // ÊòæÁ§∫Âä†ËΩΩÁä∂ÊÄÅ
            showQuoteLoading();
            
            // Áõ¥Êé•Ëé∑ÂèñÊñ∞ÁöÑ‰∏ÄË®Ä
            fetchDailyQuote();
        }
        
        function showQuoteLoading() {
            elements.quoteLoading.style.display = 'block';
            elements.quoteContent.style.display = 'none';
            elements.quoteError.style.display = 'none';
        }
        
        function showQuoteError() {
            elements.quoteLoading.style.display = 'none';
            elements.quoteContent.style.display = 'none';
            elements.quoteError.style.display = 'block';
        }
        
        function showQuoteContent() {
            elements.quoteLoading.style.display = 'none';
            elements.quoteContent.style.display = 'block';
            elements.quoteError.style.display = 'none';
        }
        
        function loadCachedQuote() {
            try {
                const cached = localStorage.getItem('dailyQuote');
                if (!cached) return null;
                
                const quoteData = JSON.parse(cached);
                const cacheDate = new Date(quoteData.timestamp);
                const today = new Date();
                
                // Ê£ÄÊü•ÊòØÂê¶‰∏∫Âêå‰∏ÄÂ§©
                if (cacheDate.toDateString() === today.toDateString()) {
                    console.log('‰ΩøÁî®ÁºìÂ≠òÁöÑÊØèÊó•‰∏ÄË®Ä');
                    return quoteData;
                }
                
                // ÁºìÂ≠òËøáÊúüÔºåÂà†Èô§
                localStorage.removeItem('dailyQuote');
                return null;
            } catch (error) {
                console.error('ËØªÂèñÁºìÂ≠ò‰∏ÄË®ÄÂ§±Ë¥•:', error);
                localStorage.removeItem('dailyQuote');
                return null;
            }
        }
        
        function saveQuoteToCache(quoteData) {
            try {
                const cacheData = {
                    ...quoteData,
                    timestamp: new Date().toISOString()
                };
                localStorage.setItem('dailyQuote', JSON.stringify(cacheData));
                console.log('‰∏ÄË®ÄÂ∑≤ÁºìÂ≠ò');
            } catch (error) {
                console.error('ÁºìÂ≠ò‰∏ÄË®ÄÂ§±Ë¥•:', error);
            }
        }
        
        function fetchDailyQuote() {
            console.log('Ëé∑ÂèñÈöèÊú∫‰∏ÄË®Ä...');
            
            try {
                // ‰ΩøÁî®ÁúüÊ≠£ÁöÑÈöèÊú∫ÈÄâÊã©ÔºåÊØèÊ¨°ÈÉΩËé∑Âèñ‰∏çÂêåÁöÑ‰∏ÄË®Ä
                const quoteIndex = Math.floor(Math.random() * localQuotes.length);
                
                // Ëé∑Âèñ‰∏ÄË®Ä
                const selectedQuote = localQuotes[quoteIndex];
                
                const quoteData = {
                    text: selectedQuote.text,
                    author: selectedQuote.author,
                    type: 'random'
                };
                
                console.log('Ëé∑ÂèñÈöèÊú∫‰∏ÄË®ÄÊàêÂäü:', quoteData);
                
                updateDailyQuoteDisplay(quoteData);
                // ÁßªÈô§ÁºìÂ≠òÈÄªËæëÔºåËÆ©ÊØèÊ¨°ËÆøÈóÆÈÉΩËé∑ÂèñÊñ∞ÁöÑ‰∏ÄË®Ä
                // saveQuoteToCache(quoteData);
                
            } catch (error) {
                console.error('Ëé∑ÂèñÊú¨Âú∞‰∏ÄË®ÄÂ§±Ë¥•:', error);
                showQuoteError();
                
                // ‰ΩøÁî®ÈªòËÆ§‰∏ÄË®Ä‰Ωú‰∏∫ÈôçÁ∫ß
                const fallbackQuote = {
                    text: '‰ªäÂ§©‰πüË¶ÅÂä†Ê≤πÂì¶ÔºÅÊØèÂ§©ÈÉΩÊòØÊñ∞ÁöÑÂºÄÂßãÔºÅ',
                    author: 'Â∞èÂä©Êâã',
                    type: 'fallback'
                };
                updateDailyQuoteDisplay(fallbackQuote);
            }
        }
        
        function updateDailyQuoteDisplay(quoteData) {
            if (!elements.quoteText || !elements.quoteAuthor) {
                console.error('‰∏ÄË®ÄÂÖÉÁ¥†Êú™ÊâæÂà∞');
                return;
            }
            
            elements.quoteText.textContent = quoteData.text;
            elements.quoteAuthor.textContent = quoteData.author;
            showQuoteContent();
            
            console.log('ÊØèÊó•‰∏ÄË®ÄÂ∑≤Êõ¥Êñ∞:', quoteData);
        }

        // Ëá™Âä®ËÆæÁΩÆÁßØÂàÜÊï∞Èáè
        function autoSetPointsAmount(reason, type) {
            if (type === 'earn') {
                const config = pointsConfig.earn;
                const suggestedPoints = config[reason] || 10;
                elements.addAmount.value = suggestedPoints;
                
                // Ê∑ªÂä†ËßÜËßâÊèêÁ§∫
                showPointsSuggestion('addAmount', suggestedPoints, 'Ëé∑Âæó');
            } else if (type === 'spend') {
                const config = pointsConfig.spend;
                const suggestedPoints = config[reason] || 5;
                elements.subtractAmount.value = suggestedPoints;
                
                // Ê∑ªÂä†ËßÜËßâÊèêÁ§∫
                showPointsSuggestion('subtractAmount', suggestedPoints, 'Ê∂àË¥π');
            }
        }
        
        // ÊòæÁ§∫ÁßØÂàÜÂª∫ËÆÆÊèêÁ§∫
        function showPointsSuggestion(inputId, points, type) {
            const input = document.getElementById(inputId);
            if (!input) return;
            
            // ÂàõÂª∫ÊèêÁ§∫ÂÖÉÁ¥†
            const existingTip = document.getElementById(`${inputId}_tip`);
            if (existingTip) {
                existingTip.remove();
            }
            
            const tip = document.createElement('div');
            tip.id = `${inputId}_tip`;
            tip.style.cssText = `
                position: absolute;
                top: -25px;
                right: 0;
                background: var(--info-gradient);
                color: white;
                padding: 4px 8px;
                border-radius: 4px;
                font-size: 12px;
                font-weight: 600;
                z-index: 1000;
                animation: fadeIn 0.3s ease;
                box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            `;
            tip.textContent = `Á≥ªÁªüÂª∫ËÆÆ: ${points}ÂàÜ`;
            
            // ÂåÖË£ÖËæìÂÖ•Ê°Ü
            const wrapper = document.createElement('div');
            wrapper.style.position = 'relative';
            wrapper.style.display = 'inline-block';
            
            input.parentNode.insertBefore(wrapper, input);
            wrapper.appendChild(input);
            wrapper.appendChild(tip);
            
            // 3ÁßíÂêéËá™Âä®ÁßªÈô§ÊèêÁ§∫
            setTimeout(() => {
                if (tip.parentNode) {
                    tip.remove();
                }
            }, 3000);
        }
        
        // ÁªëÂÆö‰∫ã‰ª∂
        function bindEvents() {
            console.log('ÂºÄÂßãÁªëÂÆö‰∫ã‰ª∂');
            
            try {
                // Ëé∑ÂæóÂéüÂõ†ÂèòÂåñÊó∂Ëá™Âä®ËÆæÁΩÆÁßØÂàÜÊï∞Èáè
                if (elements.addReason) {
                    elements.addReason.addEventListener('change', (e) => {
                        const reason = e.target.value;
                        if (reason) {
                            autoSetPointsAmount(reason, 'earn');
                        }
                    });
                }
                
                // Ê∂àË¥πÂéüÂõ†ÂèòÂåñÊó∂Ëá™Âä®ËÆæÁΩÆÁßØÂàÜÊï∞Èáè
                if (elements.subtractReason) {
                    elements.subtractReason.addEventListener('change', (e) => {
                        const reason = e.target.value;
                        if (reason) {
                            autoSetPointsAmount(reason, 'spend');
                        }
                    });
                }
                
                // EnterÈîÆÂø´Êç∑Êìç‰Ωú
                if (elements.addAmount) {
                    elements.addAmount.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter') addPoints();
                    });
                }
                
                if (elements.subtractAmount) {
                    elements.subtractAmount.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter') subtractPoints();
                    });
                }

                // ÁÇπÂáªÂ§ñÈÉ®ÂÖ≥Èó≠‰∏ªÈ¢ò‰∏ãÊãâËèúÂçï
                document.addEventListener('click', (e) => {
                    if (!e.target.closest('.theme-selector') && elements.themeDropdown) {
                        elements.themeDropdown.classList.remove('show');
                    }
                });

                // ÁÇπÂáªÂ§ñÈÉ®ÂÖ≥Èó≠ÂÆ∂ÈïøÊéßÂà∂Èù¢Êùø
                if (elements.adminPanel) {
                    elements.adminPanel.addEventListener('click', (e) => {
                        if (e.target === elements.adminPanel) {
                            closeAdminPanel();
                        }
                    });
                }
                
                console.log('‰∫ã‰ª∂ÁªëÂÆöÂÆåÊàê');
            } catch (error) {
                console.error('‰∫ã‰ª∂ÁªëÂÆöÂ§±Ë¥•:', error);
            }
        }

        // ÁîüÊàêÊñáÊú¨Ê†ºÂºèÂ§á‰ªΩÊï∞ÊçÆ
        function generateTextBackup() {
            const now = new Date();
            const exportTime = now.toLocaleString('zh-CN');
            
            let textData = '';
            
            // Êñá‰ª∂Â§¥ÈÉ®‰ø°ÊÅØ
            textData += `=== ÁßØÂàÜÁ≥ªÁªüÊï∞ÊçÆÂ§á‰ªΩ ===\n`;
            textData += `ÂØºÂá∫Êó∂Èó¥: ${exportTime}\n`;
            textData += `Áî®Êà∑ÂßìÂêç: ${pointsData.settings.childName}\n`;
            textData += `ÁßØÂàÜÂçï‰Ωç: ${pointsData.settings.currency}\n\n`;
            
            // ÂΩìÂâçÁßØÂàÜÁä∂ÂÜµ
            textData += `=== ÂΩìÂâçÁßØÂàÜÁä∂ÂÜµ ===\n`;
            textData += `ÂΩìÂâçÁßØÂàÜ: ${pointsData.currentPoints}\n`;
            textData += `Á¥ØËÆ°Ëé∑Âæó: ${pointsData.totalEarned}\n`;
            textData += `Á¥ØËÆ°Ê∂àË¥π: ${pointsData.totalSpent}\n`;
            if (pointsData.lastUpdated) {
                const lastUpdate = new Date(pointsData.lastUpdated).toLocaleString('zh-CN');
                textData += `ÊúÄÂêéÊõ¥Êñ∞: ${lastUpdate}\n`;
            }
            textData += `\n`;
            
            // ÁßØÂàÜÂéÜÂè≤ËÆ∞ÂΩï
            textData += `=== ÁßØÂàÜÂéÜÂè≤ËÆ∞ÂΩï ===\n`;
            if (pointsData.history.length === 0) {
                textData += `ÊöÇÊó†ÂéÜÂè≤ËÆ∞ÂΩï\n`;
            } else {
                // ÊòæÁ§∫ÊúÄËøë20Êù°ËÆ∞ÂΩï
                const recentHistory = pointsData.history.slice(0, 20);
                recentHistory.forEach(record => {
                    const date = new Date(record.timestamp).toLocaleString('zh-CN');
                    const type = record.type === 'earned' ? 'Ëé∑Âæó' : 'Ê∂àË¥π';
                    const prefix = record.type === 'earned' ? '+' : '-';
                    const icon = record.type === 'earned' ? 'üéâ' : 'üí∏';
                    textData += `[${type}] ${prefix}${record.amount} ${record.reason} ${date} ${icon}\n`;
                });
                if (pointsData.history.length > 20) {
                    textData += `... ËøòÊúâ ${pointsData.history.length - 20} Êù°ËÆ∞ÂΩï\n`;
                }
            }
            textData += `\n`;
            
            // ÊàêÂ∞±Á≥ªÁªü
            textData += `=== ÊàêÂ∞±Á≥ªÁªü ===\n`;
            const earnedAchievements = achievements.filter(achievement => pointsData.achievements[achievement.id]);
            const unearnedAchievements = achievements.filter(achievement => !pointsData.achievements[achievement.id]);
            
            if (earnedAchievements.length > 0) {
                textData += `‚úÖ Â∑≤Ëß£ÈîÅÊàêÂ∞± (${earnedAchievements.length}/${achievements.length}):\n`;
                earnedAchievements.forEach(achievement => {
                    textData += `  ‚úÖ ${achievement.title} - ${achievement.desc}\n`;
                });
            }
            
            if (unearnedAchievements.length > 0) {
                textData += `\n‚ùå Êú™Ëß£ÈîÅÊàêÂ∞±:\n`;
                unearnedAchievements.slice(0, 10).forEach(achievement => {
                    textData += `  ‚ùå ${achievement.title} - ${achievement.desc}\n`;
                });
                if (unearnedAchievements.length > 10) {
                    textData += `  ... ËøòÊúâ ${unearnedAchievements.length - 10} ‰∏™ÊàêÂ∞±\n`;
                }
            }
            textData += `\n`;
            
            // Á≥ªÁªüËÆæÁΩÆ
            textData += `=== Á≥ªÁªüËÆæÁΩÆ ===\n`;
            textData += `‰∏ªÈ¢ò: ${getThemeName(pointsData.settings.theme)}\n`;
            textData += `ÁßØÂàÜÂçï‰Ωç: ${pointsData.settings.currency}\n`;
            textData += `ÂØÜÁ†Å‰øùÊä§: ${pointsData.settings.passwordEnabled ? 'Â∑≤ÂêØÁî®' : 'Êú™ÂêØÁî®'}\n`;
            textData += `ÈÄöÁü•: ${pointsData.settings.notifications ? 'ÂºÄÂêØ' : 'ÂÖ≥Èó≠'}\n`;
            textData += `\n`;
            
            // ÁªüËÆ°Êï∞ÊçÆ
            const activeDays = new Set(pointsData.history.map(r => new Date(r.timestamp).toDateString())).size;
            const avgEarned = pointsData.totalEarned > 0 ? Math.round(pointsData.totalEarned / Math.max(activeDays, 1)) : 0;
            const avgSpent = pointsData.totalSpent > 0 ? Math.round(pointsData.totalSpent / Math.max(activeDays, 1)) : 0;
            
            textData += `=== ‰ΩøÁî®ÁªüËÆ° ===\n`;
            textData += `Ê¥ªË∑ÉÂ§©Êï∞: ${activeDays} Â§©\n`;
            textData += `Âπ≥ÂùáÊØèÊó•Ëé∑Âæó: ${avgEarned} ${pointsData.settings.currency}\n`;
            textData += `Âπ≥ÂùáÊØèÊó•Ê∂àË¥π: ${avgSpent} ${pointsData.settings.currency}\n`;
            textData += `ËÆ∞ÂΩïÊÄªÊï∞: ${pointsData.history.length} Êù°\n`;
            textData += `\n`;
            
            // Êï∞ÊçÆÊ†°È™å‰ø°ÊÅØ
            textData += `=== Êï∞ÊçÆÊ†°È™å ===\n`;
            const dataHash = generateSimpleHash(JSON.stringify(pointsData));
            textData += `Ê†°È™åÁ†Å: ${dataHash}\n`;
            textData += `ÁâàÊú¨: 2.0 (ÊñáÊú¨Ê†ºÂºè)\n`;
            textData += `Á≥ªÁªü: ÁªàÊûÅÁßØÂàÜÁ≥ªÁªü\n`;
            
            return textData;
        }
        
        // ÁîüÊàêÁÆÄÂçïÁöÑÊï∞ÊçÆÊ†°È™åÁ†Å
        function generateSimpleHash(str) {
            let hash = 0;
            for (let i = 0; i < str.length; i++) {
                const char = str.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash; // ËΩ¨Êç¢‰∏∫32‰ΩçÊï¥Êï∞
            }
            return Math.abs(hash).toString(16).toUpperCase().substring(0, 8);
        }
        
        // ‰∏ãËΩΩÊñáÊú¨Êñá‰ª∂
        function downloadTextFile(textBlob, fileName) {
            const url = URL.createObjectURL(textBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = fileName;
            link.click();
            URL.revokeObjectURL(url);
        }
        
        // ÊòæÁ§∫ÊñáÊú¨ÂÜÖÂÆπ‰æõÂ§çÂà∂
        function showTextForCopy(textData) {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0,0,0,0.8); display: flex; align-items: center; justify-content: center;
                z-index: 10000;
            `;
            
            modal.innerHTML = `
                <div style="
                    background: var(--theme-bg); padding: 30px; border-radius: var(--border-radius);
                    max-width: 800px; width: 90%; max-height: 80vh; overflow-y: auto;
                    text-align: center; box-shadow: var(--card-shadow);
                ">
                    <h3 style="margin-bottom: 20px; color: var(--theme-text);">üìã ÊñáÊú¨Â§á‰ªΩÂÜÖÂÆπ</h3>
                    <div style="
                        background: #f8f9fa; border: 2px solid #dee2e6; border-radius: 12px;
                        padding: 20px; margin-bottom: 20px; text-align: left;
                        font-family: 'Courier New', monospace; font-size: 14px;
                        white-space: pre-wrap; word-wrap: break-word;
                        max-height: 400px; overflow-y: auto;
                    ">${textData}</div>
                    <div style="display: flex; gap: 15px; justify-content: center;">
                        <button onclick="copyTextToClipboard()" style="
                            padding: 15px 25px; border: none; border-radius: 12px;
                            background: var(--success-gradient); color: white; font-weight: 600;
                            cursor: pointer;
                        ">üìã Â§çÂà∂ÊñáÊú¨</button>
                        <button onclick="closeTextModal()" style="
                            padding: 15px 25px; border: none; border-radius: 12px;
                            background: #6c757d; color: white; font-weight: 600;
                            cursor: pointer;
                        ">ÂÖ≥Èó≠</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // ÁªëÂÆöÂÖ®Â±ÄÂáΩÊï∞
            window.copyTextToClipboard = async () => {
                try {
                    await navigator.clipboard.writeText(textData);
                    showToast('ÊñáÊú¨Â∑≤Â§çÂà∂Âà∞Ââ™Ë¥¥ÊùøÔºÅüìã');
                } catch (err) {
                    // Â¶ÇÊûúÁé∞‰ª£APIÂ§±Ë¥•Ôºå‰ΩøÁî®‰º†ÁªüÊñπÊ≥ï
                    const textArea = document.createElement('textarea');
                    textArea.value = textData;
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    showToast('ÊñáÊú¨Â∑≤Â§çÂà∂Âà∞Ââ™Ë¥¥ÊùøÔºÅüìã');
                }
            };
            
            window.closeTextModal = () => {
                document.body.removeChild(modal);
                delete window.copyTextToClipboard;
                delete window.closeTextModal;
            };
        }
        
        // ÁîüÊàêBase64ÁºñÁ†ÅÁâàÊú¨
        function generateBase64Version(textData) {
            try {
                return btoa(encodeURIComponent(textData));
            } catch (error) {
                console.error('Base64ÁºñÁ†ÅÂ§±Ë¥•:', error);
                return null;
            }
        }
        
        // ÊòæÁ§∫Base64ÈÄâÈ°π
        function showBase64Option(encodedData) {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0,0,0,0.8); display: flex; align-items: center; justify-content: center;
                z-index: 10000;
            `;
            
            modal.innerHTML = `
                <div style="
                    background: var(--theme-bg); padding: 30px; border-radius: var(--border-radius);
                    max-width: 700px; width: 90%; max-height: 80vh; overflow-y: auto;
                    text-align: center; box-shadow: var(--card-shadow);
                ">
                    <h3 style="margin-bottom: 20px; color: var(--theme-text);">üîí Base64ÁºñÁ†ÅÁâàÊú¨</h3>
                    <p style="margin-bottom: 15px; color: #6c757d;">ËøôÊòØÂéãÁº©ÂêéÁöÑÁºñÁ†ÅÁâàÊú¨ÔºåÂèØ‰ª•Â§çÂà∂Âà∞‰ªª‰ΩïÂú∞Êñπ‰øùÂ≠ò</p>
                    <div style="
                        background: #f8f9fa; border: 2px solid #dee2e6; border-radius: 12px;
                        padding: 20px; margin-bottom: 20px; text-align: left;
                        font-family: 'Courier New', monospace; font-size: 12px;
                        word-wrap: break-word; max-height: 300px; overflow-y: auto;
                    ">${encodedData}</div>
                    <div style="display: flex; gap: 15px; justify-content: center;">
                        <button onclick="copyBase64ToClipboard()" style="
                            padding: 15px 25px; border: none; border-radius: 12px;
                            background: var(--info-gradient); color: white; font-weight: 600;
                            cursor: pointer;
                        ">üìã Â§çÂà∂ÁºñÁ†Å</button>
                        <button onclick="closeBase64Modal()" style="
                            padding: 15px 25px; border: none; border-radius: 12px;
                            background: #6c757d; color: white; font-weight: 600;
                            cursor: pointer;
                        ">ÂÖ≥Èó≠</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            window.copyBase64ToClipboard = async () => {
                try {
                    await navigator.clipboard.writeText(encodedData);
                    showToast('Base64ÁºñÁ†ÅÂ∑≤Â§çÂà∂ÔºÅüîí');
                } catch (err) {
                    const textArea = document.createElement('textarea');
                    textArea.value = encodedData;
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    showToast('Base64ÁºñÁ†ÅÂ∑≤Â§çÂà∂ÔºÅüîí');
                }
            };
            
            window.closeBase64Modal = () => {
                document.body.removeChild(modal);
                delete window.copyBase64ToClipboard;
                delete window.closeBase64Modal;
            };
        }
        
        // Â¢ûÂº∫ÁöÑÂØºÂá∫Êï∞ÊçÆÂäüËÉΩ
        function exportData() {
            // ÊòæÁ§∫ÂØºÂá∫ÈÄâÈ°πËèúÂçï
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0,0,0,0.8); display: flex; align-items: center; justify-content: center;
                z-index: 10000;
            `;
            
            modal.innerHTML = `
                <div style="
                    background: var(--theme-bg); padding: 30px; border-radius: var(--border-radius);
                    max-width: 500px; width: 90%; text-align: center; box-shadow: var(--card-shadow);
                ">
                    <h3 style="margin-bottom: 25px; color: var(--theme-text);">üì• Êï∞ÊçÆÂØºÂá∫ÈÄâÈ°π</h3>
                    <div style="display: flex; flex-direction: column; gap: 15px;">
                        <button onclick="exportAsTextFile()" style="
                            padding: 18px; border: none; border-radius: 12px;
                            background: var(--success-gradient); color: white; font-weight: 600;
                            cursor: pointer; font-size: 16px;
                        ">üìÑ ÂØºÂá∫‰∏∫ÊñáÊú¨Êñá‰ª∂ (.txt)</button>
                        <button onclick="exportAsTextAndShow()" style="
                            padding: 18px; border: none; border-radius: 12px;
                            background: var(--primary-gradient); color: white; font-weight: 600;
                            cursor: pointer; font-size: 16px;
                        ">üìã ÊòæÁ§∫ÊñáÊú¨‰æõÂ§çÂà∂</button>
                        <button onclick="exportAsJSON()" style="
                            padding: 18px; border: none; border-radius: 12px;
                            background: var(--warning-gradient); color: white; font-weight: 600;
                            cursor: pointer; font-size: 16px;
                        ">üíæ ÂØºÂá∫‰∏∫JSONÊñá‰ª∂</button>
                        <button onclick="exportWithBase64()" style="
                            padding: 18px; border: none; border-radius: 12px;
                            background: var(--info-gradient); color: white; font-weight: 600;
                            cursor: pointer; font-size: 16px;
                        ">üîí ÁîüÊàêBase64ÁºñÁ†Å</button>
                        <button onclick="closeExportModal()" style="
                            padding: 15px; border: 2px solid #dee2e6; border-radius: 12px;
                            background: white; color: #6c757d; font-weight: 600;
                            cursor: pointer; font-size: 14px;
                        ">ÂèñÊ∂à</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // ÁªëÂÆöÂØºÂá∫ÂáΩÊï∞
            window.exportAsTextFile = () => {
                const textData = generateTextBackup();
                const textBlob = new Blob([textData], { type: 'text/plain;charset=utf-8' });
                const fileName = `ÁßØÂàÜÊï∞ÊçÆ_${new Date().toISOString().split('T')[0]}.txt`;
                downloadTextFile(textBlob, fileName);
                closeExportModal();
                showToast('ÊñáÊú¨Êñá‰ª∂ÂØºÂá∫ÊàêÂäüÔºÅüìÑ');
            };
            
            window.exportAsTextAndShow = () => {
                const textData = generateTextBackup();
                closeExportModal();
                showTextForCopy(textData);
            };
            
            window.exportAsJSON = () => {
                const dataStr = JSON.stringify(pointsData, null, 2);
                const dataBlob = new Blob([dataStr], { type: 'application/json' });
                const url = URL.createObjectURL(dataBlob);
                const link = document.createElement('a');
                link.href = url;
                link.download = `ÁßØÂàÜÁ≥ªÁªüÊï∞ÊçÆ_${new Date().toISOString().split('T')[0]}.json`;
                link.click();
                URL.revokeObjectURL(url);
                closeExportModal();
                showToast('JSONÊñá‰ª∂ÂØºÂá∫ÊàêÂäüÔºÅüì•');
            };
            
            window.exportWithBase64 = () => {
                const textData = generateTextBackup();
                const encodedData = generateBase64Version(textData);
                if (encodedData) {
                    closeExportModal();
                    showBase64Option(encodedData);
                } else {
                    showToast('Base64ÁºñÁ†ÅÁîüÊàêÂ§±Ë¥•', 'error');
                }
            };
            
            window.closeExportModal = () => {
                document.body.removeChild(modal);
                // Ê∏ÖÁêÜÂÖ®Â±ÄÂáΩÊï∞
                ['exportAsTextFile', 'exportAsTextAndShow', 'exportAsJSON', 'exportWithBase64', 'closeExportModal']
                    .forEach(func => delete window[func]);
            };
        }

        // ÂØºÂÖ•Êï∞ÊçÆ
        function importData() {
            const fileInput = document.getElementById('importFileInput');
            const file = fileInput.files[0];
            
            if (!file) {
                return;
            }
            
            // Ê£ÄÊü•Êñá‰ª∂Á±ªÂûã
            const isJsonFile = file.type.includes('json') || file.name.endsWith('.json');
            const isTextFile = file.type.includes('text') || file.name.endsWith('.txt');
            
            if (!isJsonFile && !isTextFile) {
                showToast('ËØ∑ÈÄâÊã©JSONÊàñTXTÊ†ºÂºèÁöÑÊï∞ÊçÆÊñá‰ª∂', 'error');
                return;
            }
            
            const reader = new FileReader();
            
            reader.onload = function(e) {
                try {
                    let importedData;
                    
                    if (isTextFile) {
                        // Ëß£ÊûêÊñáÊú¨Ê†ºÂºè
                        importedData = parseTextBackupData(e.target.result);
                    } else {
                        // Ëß£ÊûêJSONÊ†ºÂºè
                        importedData = JSON.parse(e.target.result);
                    }
                    
                    // È™åËØÅÊï∞ÊçÆÊ†ºÂºè
                    if (!isValidPointsData(importedData)) {
                        showToast('Êï∞ÊçÆÊ†ºÂºè‰∏çÊ≠£Á°ÆÔºåËØ∑Ê£ÄÊü•Êñá‰ª∂ÂÜÖÂÆπ', 'error');
                        return;
                    }
                    
                    // Á°ÆËÆ§ÂØºÂÖ•Êìç‰Ωú
                    if (confirm('ÂØºÂÖ•Êï∞ÊçÆÂ∞Ü‰ºöË¶ÜÁõñÂΩìÂâçÊâÄÊúâÊï∞ÊçÆÔºåÁ°ÆÂÆöË¶ÅÁªßÁª≠ÂêóÔºü')) {
                        // Â§á‰ªΩÂΩìÂâçÊï∞ÊçÆ
                        const backupData = { ...pointsData };
                        
                        try {
                            // ÂØºÂÖ•Êï∞ÊçÆ
                            pointsData = importedData;
                            
                            // Êõ¥Êñ∞ÁïåÈù¢
                            applyTheme();
                            updateDisplay();
                            renderAchievements();
                            saveData();
                            checkAchievements();
                            
                            showToast('Êï∞ÊçÆÂØºÂÖ•ÊàêÂäüÔºÅüéâ');
                        } catch (importError) {
                            // ÊÅ¢Â§çÂ§á‰ªΩÊï∞ÊçÆ
                            pointsData = backupData;
                            showToast('ÂØºÂÖ•Â§±Ë¥•Ôºö' + importError.message, 'error');
                        }
                    }
                } catch (parseError) {
                    if (isTextFile) {
                        showToast('ÊñáÊú¨Ê†ºÂºèÈîôËØØÔºöÊó†Ê≥ïËß£ÊûêÊï∞ÊçÆÔºåËØ∑Ê£ÄÊü•Ê†ºÂºèÊòØÂê¶Ê≠£Á°Æ', 'error');
                    } else {
                        showToast('Êñá‰ª∂Ê†ºÂºèÈîôËØØÔºöÊó†Ê≥ïËß£ÊûêJSONÊï∞ÊçÆ', 'error');
                    }
                }
            };
            
            reader.onerror = function() {
                showToast('Êñá‰ª∂ËØªÂèñÂ§±Ë¥•', 'error');
            };
            
            reader.readAsText(file, 'UTF-8');
            
            // Ê∏ÖÁ©∫Êñá‰ª∂ËæìÂÖ•ÔºåÂÖÅËÆ∏ÈáçÂ§çÂØºÂÖ•Âêå‰∏ÄÊñá‰ª∂
            fileInput.value = '';
        }
        
        // È™åËØÅÂØºÂÖ•Êï∞ÊçÆÁöÑÊ†ºÂºè
        function isValidPointsData(data) {
            if (!data || typeof data !== 'object') {
                return false;
            }
            
            // Ê£ÄÊü•ÂøÖË¶ÅÂ≠óÊÆµ
            const requiredFields = ['currentPoints', 'totalEarned', 'totalSpent', 'history', 'settings', 'achievements'];
            
            for (let field of requiredFields) {
                if (!(field in data)) {
                    console.warn(`Áº∫Â∞ëÂøÖË¶ÅÂ≠óÊÆµ: ${field}`);
                    return false;
                }
            }
            
            // Ê£ÄÊü•Êï∞ÊçÆÁ±ªÂûã
            if (typeof data.currentPoints !== 'number' || 
                typeof data.totalEarned !== 'number' || 
                typeof data.totalSpent !== 'number' ||
                !Array.isArray(data.history) ||
                typeof data.settings !== 'object' ||
                typeof data.achievements !== 'object') {
                return false;
            }
            
            return true;
        }
        
        // Ëß£ÊûêÊñáÊú¨Ê†ºÂºèÂ§á‰ªΩÊï∞ÊçÆ
        function parseTextBackupData(textData) {
            const lines = textData.split('\n');
            const data = {
                currentPoints: 0,
                totalEarned: 0,
                totalSpent: 0,
                lastUpdated: null,
                history: [],
                settings: {
                    childName: 'Â∞èÊúãÂèã',
                    currency: 'ÁßØÂàÜ',
                    notifications: true,
                    theme: 'default',
                    password: '',
                    passwordEnabled: false
                },
                achievements: {
                    firstEarn: false,
                    points50: false,
                    points100: false,
                    points500: false,
                    firstSpend: false,
                    dailyActive: false,
                    consistency3: false
                }
            };
            
            let parsingHistory = false;
            let parsingAchievements = false;
            
            for (let line of lines) {
                line = line.trim();
                
                if (line === '') continue;
                
                // Ëß£ÊûêÂΩìÂâçÁßØÂàÜÁä∂ÂÜµ
                if (line.startsWith('ÂΩìÂâçÁßØÂàÜ:')) {
                    const match = line.match(/ÂΩìÂâçÁßØÂàÜ:\s*(\d+)/);
                    if (match) data.currentPoints = parseInt(match[1]);
                }
                else if (line.startsWith('Á¥ØËÆ°Ëé∑Âæó:')) {
                    const match = line.match(/Á¥ØËÆ°Ëé∑Âæó:\s*(\d+)/);
                    if (match) data.totalEarned = parseInt(match[1]);
                }
                else if (line.startsWith('Á¥ØËÆ°Ê∂àË¥π:')) {
                    const match = line.match(/Á¥ØËÆ°Ê∂àË¥π:\s*(\d+)/);
                    if (match) data.totalSpent = parseInt(match[1]);
                }
                else if (line.startsWith('ÊúÄÂêéÊõ¥Êñ∞:')) {
                    const timestamp = line.replace('ÊúÄÂêéÊõ¥Êñ∞:', '').trim();
                    if (timestamp) {
                        data.lastUpdated = new Date(timestamp).toISOString();
                    }
                }
                
                // Ëß£ÊûêÁî®Êà∑‰ø°ÊÅØ
                else if (line.startsWith('Áî®Êà∑ÂßìÂêç:')) {
                    const name = line.replace('Áî®Êà∑ÂßìÂêç:', '').trim();
                    if (name) data.settings.childName = name;
                }
                else if (line.startsWith('ÁßØÂàÜÂçï‰Ωç:')) {
                    const currency = line.replace('ÁßØÂàÜÂçï‰Ωç:', '').trim();
                    if (currency) data.settings.currency = currency;
                }
                
                // Ëß£Êûê‰∏ªÈ¢ò
                else if (line.startsWith('‰∏ªÈ¢ò:')) {
                    const themeLine = line.replace('‰∏ªÈ¢ò:', '').trim();
                    const themeMap = {
                        'ÈªòËÆ§': 'default',
                        'ÂΩ©Ëôπ': 'rainbow', 
                        'Ê£ÆÊûó': 'forest',
                        'Êó•ËêΩ': 'sunset',
                        'Êµ∑Ê¥ã': 'ocean',
                        'Âú£ËØû': 'christmas',
                        'Êñ∞Âπ¥': 'newyear'
                    };
                    data.settings.theme = themeMap[themeLine] || 'default';
                }
                
                // ÂºÄÂßãËß£ÊûêÂéÜÂè≤ËÆ∞ÂΩï
                else if (line === '=== ÁßØÂàÜÂéÜÂè≤ËÆ∞ÂΩï ===') {
                    parsingHistory = true;
                    parsingAchievements = false;
                    continue;
                }
                
                // ÂºÄÂßãËß£ÊûêÊàêÂ∞±
                else if (line === '=== ÊàêÂ∞±Á≥ªÁªü ===') {
                    parsingHistory = false;
                    parsingAchievements = true;
                    continue;
                }
                
                // Ëß£ÊûêÂéÜÂè≤ËÆ∞ÂΩï
                else if (parsingHistory && line.includes('[') && line.includes(']')) {
                    try {
                        // ÂåπÈÖçÊ†ºÂºè: [Ëé∑Âæó] +10 ÂÆåÊàê‰Ωú‰∏ö 2023/12/1 10:30:00 üéâ
                        const match = line.match(/\[(Ëé∑Âæó|Ê∂àË¥π)\]\s*([+-]?)(\d+)\s+(.+?)\s+(.+?)\s+[üéâüí∏]/);
                        if (match) {
                            const type = match[1] === 'Ëé∑Âæó' ? 'earned' : 'spent';
                            const amount = parseInt(match[3]);
                            const reason = match[4];
                            const timestamp = match[5];
                            
                            data.history.push({
                                id: Date.now() + Math.random(),
                                type: type,
                                amount: amount,
                                reason: reason,
                                timestamp: new Date(timestamp).toISOString()
                            });
                        }
                    } catch (e) {
                        console.warn('Ëß£ÊûêÂéÜÂè≤ËÆ∞ÂΩïÂ§±Ë¥•:', line);
                    }
                }
                
                // Ëß£ÊûêÊàêÂ∞±
                else if (parsingAchievements && line.includes('‚úÖ')) {
                    try {
                        // ÂåπÈÖçÊ†ºÂºè: ‚úÖ ÂàùÊ¨°Ëé∑Âæó - Ëé∑ÂæóÁ¨¨‰∏Ä‰∏™ÁßØÂàÜ
                        const match = line.match(/‚úÖ\s+(.+?)\s*-\s*(.+)/);
                        if (match) {
                            const title = match[1].trim();
                            
                            // Ê†πÊçÆÊ†áÈ¢òÂåπÈÖçÊàêÂ∞±ID
                            const achievementMap = {
                                'ÂàùÊ¨°Ëé∑Âæó': 'firstEarn',
                                'È¶ñÊ¨°Ê∂àË¥π': 'firstSpend',
                                'ÁôæÁßØÂàÜËææÊàê': 'points100',
                                'Â∞èÊúâÊàêÂ∞±': 'points50',
                                'ÁßØÂàÜËææ‰∫∫': 'points250',
                                'ÁßØÂàÜÂ§ßÊà∑': 'points500',
                                'ÁßØÂàÜÁéãËÄÖ': 'points1000',
                                'ÂùöÊåÅ‰∏çÊáà': 'consistency3',
                                '‰∏ÄÂë®ÂùöÊåÅ': 'consistency7',
                                '‰∏§Âë®ÂùöÊåÅ': 'consistency14',
                                'ÊúàÂ∫¶ÂùöÊåÅÁéã': 'consistency30'
                            };
                            
                            const achievementId = achievementMap[title];
                            if (achievementId) {
                                data.achievements[achievementId] = true;
                            }
                        }
                    } catch (e) {
                        console.warn('Ëß£ÊûêÊàêÂ∞±Â§±Ë¥•:', line);
                    }
                }
            }
            
            return data;
        }
        
        // ÊòæÁ§∫ÊñáÊú¨ÂØºÂÖ•ÂØπËØùÊ°Ü
        function showTextImportDialog() {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0,0,0,0.8); display: flex; align-items: center; justify-content: center;
                z-index: 10000;
            `;
            
            modal.innerHTML = `
                <div style="
                    background: var(--theme-bg); padding: 30px; border-radius: var(--border-radius);
                    max-width: 800px; width: 90%; max-height: 80vh; overflow-y: auto;
                    text-align: center; box-shadow: var(--card-shadow);
                ">
                    <h3 style="margin-bottom: 20px; color: var(--theme-text);">üìã ÊñáÊú¨Êï∞ÊçÆÂØºÂÖ•</h3>
                    <p style="margin-bottom: 20px; color: #6c757d;">ËØ∑Á≤òË¥¥ÊÇ®Â§á‰ªΩÁöÑÊñáÊú¨Êï∞ÊçÆÂà∞‰∏ãÊñπÊñáÊú¨Ê°Ü‰∏≠Ôºö</p>
                    <textarea id="textImportInput" placeholder="ËØ∑Á≤òË¥¥Â§á‰ªΩÁöÑÊñáÊú¨Êï∞ÊçÆ..." style="
                        width: 100%; height: 300px; padding: 15px; border: 2px solid #dee2e6;
                        border-radius: 12px; font-size: 14px; font-family: 'Courier New', monospace;
                        resize: vertical; box-sizing: border-box;
                    "></textarea>
                    <div style="margin-top: 20px; color: #6c757d; font-size: 13px; text-align: left;">
                        <strong>ÊîØÊåÅÊ†ºÂºèÔºö</strong><br>
                        ‚Ä¢ ÊñáÊú¨Ê†ºÂºèÂ§á‰ªΩÊñá‰ª∂ (.txt)<br>
                        ‚Ä¢ Base64ÁºñÁ†ÅÁöÑÊñáÊú¨Êï∞ÊçÆ<br>
                        ‚Ä¢ ÊâãÂä®Â§çÂà∂ÁöÑÊñáÊú¨ÂÜÖÂÆπ
                    </div>
                    <div style="display: flex; gap: 15px; justify-content: center; margin-top: 25px;">
                        <button onclick="processTextImport()" style="
                            padding: 15px 25px; border: none; border-radius: 12px;
                            background: var(--success-gradient); color: white; font-weight: 600;
                            cursor: pointer;
                        ">üì• ÂØºÂÖ•Êï∞ÊçÆ</button>
                        <button onclick="closeTextImportDialog()" style="
                            padding: 15px 25px; border: 2px solid #dee2e6; border-radius: 12px;
                            background: white; color: #6c757d; font-weight: 600;
                            cursor: pointer;
                        ">ÂèñÊ∂à</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // ÁªëÂÆöÂÖ®Â±ÄÂáΩÊï∞
            window.processTextImport = () => {
                const textInput = document.getElementById('textImportInput');
                const textData = textInput.value.trim();
                
                if (!textData) {
                    showToast('ËØ∑ËæìÂÖ•Ë¶ÅÂØºÂÖ•ÁöÑÊñáÊú¨Êï∞ÊçÆ', 'error');
                    return;
                }
                
                try {
                    let parsedData;
                    
                    // Â∞ùËØïËß£Á†ÅBase64
                    try {
                        const decoded = decodeURIComponent(atob(textData));
                        if (decoded.includes('=== ÁßØÂàÜÁ≥ªÁªüÊï∞ÊçÆÂ§á‰ªΩ ===')) {
                            parsedData = parseTextBackupData(decoded);
                        } else {
                            parsedData = JSON.parse(decoded);
                        }
                    } catch (base64Error) {
                        // Â¶ÇÊûú‰∏çÊòØBase64ÔºåÂ∞ùËØïÁõ¥Êé•Ëß£Êûê
                        if (textData.includes('=== ÁßØÂàÜÁ≥ªÁªüÊï∞ÊçÆÂ§á‰ªΩ ===')) {
                            parsedData = parseTextBackupData(textData);
                        } else {
                            parsedData = JSON.parse(textData);
                        }
                    }
                    
                    // È™åËØÅÊï∞ÊçÆÊ†ºÂºè
                    if (!isValidPointsData(parsedData)) {
                        showToast('Êï∞ÊçÆÊ†ºÂºè‰∏çÊ≠£Á°ÆÔºåËØ∑Ê£ÄÊü•ÊñáÊú¨ÂÜÖÂÆπ', 'error');
                        return;
                    }
                    
                    // Á°ÆËÆ§ÂØºÂÖ•Êìç‰Ωú
                    if (confirm('ÂØºÂÖ•Êï∞ÊçÆÂ∞Ü‰ºöË¶ÜÁõñÂΩìÂâçÊâÄÊúâÊï∞ÊçÆÔºåÁ°ÆÂÆöË¶ÅÁªßÁª≠ÂêóÔºü')) {
                        // Â§á‰ªΩÂΩìÂâçÊï∞ÊçÆ
                        const backupData = { ...pointsData };
                        
                        try {
                            // ÂØºÂÖ•Êï∞ÊçÆ
                            pointsData = parsedData;
                            
                            // Êõ¥Êñ∞ÁïåÈù¢
                            applyTheme();
                            updateDisplay();
                            renderAchievements();
                            saveData();
                            checkAchievements();
                            
                            closeTextImportDialog();
                            showToast('ÊñáÊú¨Êï∞ÊçÆÂØºÂÖ•ÊàêÂäüÔºÅüéâ');
                        } catch (importError) {
                            // ÊÅ¢Â§çÂ§á‰ªΩÊï∞ÊçÆ
                            pointsData = backupData;
                            showToast('ÂØºÂÖ•Â§±Ë¥•Ôºö' + importError.message, 'error');
                        }
                    }
                } catch (parseError) {
                    showToast('ÊñáÊú¨Ëß£ÊûêÂ§±Ë¥•ÔºöËØ∑Ê£ÄÊü•Êï∞ÊçÆÊ†ºÂºèÊòØÂê¶Ê≠£Á°Æ', 'error');
                }
            };
            
            window.closeTextImportDialog = () => {
                document.body.removeChild(modal);
                delete window.processTextImport;
                delete window.closeTextImportDialog;
            };
            
            // ËÅöÁÑ¶Âà∞ÊñáÊú¨Ê°Ü
            setTimeout(() => {
                document.getElementById('textImportInput').focus();
            }, 100);
        }

        // ÂàùÂßãÂåñÁ≥ªÁªü
        console.log('ÁªàÊûÅÁßØÂàÜÁ≥ªÁªüËÑöÊú¨Âä†ËΩΩÂÆåÊàêÔºåÂáÜÂ§áÂàùÂßãÂåñ...');
        
        // È°µÈù¢Âä†ËΩΩÂÆåÊàêÂêéÂàùÂßãÂåñ
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }
        
        // Â§áÁî®ÂàùÂßãÂåñ
        window.addEventListener('load', () => {
            if (!window.ultimatePointsSystemInitialized) {
                console.log('ÊâßË°åÂ§áÁî®ÂàùÂßãÂåñ');
                init();
            }
        });
        
        // Ê†áËÆ∞ÂàùÂßãÂåñÂÆåÊàê
        window.ultimatePointsSystemInitialized = true;
        
        // ======================== ÂïÜÂ∫óÁ≥ªÁªüÂäüËÉΩ ========================
        
        // ÂïÜÂ∫óÊï∞ÊçÆÂ≠òÂÇ®ÈîÆ
        const SHOP_DATA_KEY = 'pointsShopData';
        
        // ÂàùÂßãÂåñÂïÜÂ∫ó
        function initShop() {
            // Á°Æ‰øùshopÊï∞ÊçÆÁªìÊûÑÂ≠òÂú®
            if (!pointsData.shop) {
                pointsData.shop = {
                    totalExchanged: 0,
                    exchangeHistory: [],
                    items: []
                };
            }
            
            renderShop();
            renderExchangeHistory();
            updateShopStats();
            
            // ËÆæÁΩÆÁ≠õÈÄâÂô®‰∫ã‰ª∂ÁõëÂê¨Âô®
            const categoryFilter = document.getElementById('categoryFilter');
            const priceFilter = document.getElementById('priceFilter');
            
            if (categoryFilter) {
                categoryFilter.addEventListener('change', applyShopFilters);
            }
            if (priceFilter) {
                priceFilter.addEventListener('change', applyShopFilters);
            }
        }
        
        // Ê∏≤ÊüìÂïÜÂ∫óÁâ©ÂìÅ
        function renderShop() {
            const shopGrid = document.getElementById('shopGrid');
            if (!shopGrid || !pointsData.shop.items) return;
            
            shopGrid.innerHTML = '';
            
            pointsData.shop.items.forEach(item => {
                const itemElement = document.createElement('div');
                itemElement.className = 'shop-item';
                itemElement.dataset.category = item.category;
                itemElement.dataset.price = item.price;
                itemElement.innerHTML = `
                    <div class="shop-item-header">
                        <span class="shop-item-icon">${item.icon}</span>
                        <h4 class="shop-item-name">${item.name}</h4>
                    </div>
                    <p class="shop-item-description">${item.description}</p>
                    <div class="shop-item-footer">
                        <span class="shop-item-price">${item.price} ${pointsData.settings.currency}</span>
                        <button class="btn-exchange" onclick="showExchangeConfirmModal('${item.id}')">
                            ÂÖëÊç¢
                        </button>
                    </div>
                `;
                shopGrid.appendChild(itemElement);
            });
            
            applyShopFilters();
        }
        
        // Â∫îÁî®ÂïÜÂ∫óÁ≠õÈÄâÂô®
        function applyShopFilters() {
            const categoryFilter = document.getElementById('categoryFilter')?.value || 'all';
            const priceFilter = document.getElementById('priceFilter')?.value || 'all';
            
            const shopItems = document.querySelectorAll('.shop-item');
            shopItems.forEach(item => {
                let show = true;
                
                // ÂàÜÁ±ªÁ≠õÈÄâ
                if (categoryFilter !== 'all') {
                    const itemCategory = item.dataset.category;
                    if (itemCategory !== categoryFilter) {
                        show = false;
                    }
                }
                
                // ‰ª∑Ê†ºÁ≠õÈÄâ
                if (priceFilter !== 'all') {
                    const priceText = item.querySelector('.shop-item-price')?.textContent || '0';
                    const price = parseInt(priceText.match(/\d+/)?.[0] || '0');
                    
                    switch (priceFilter) {
                        case 'low':
                            if (price > 50) show = false;
                            break;
                        case 'medium':
                            if (price <= 50 || price > 200) show = false;
                            break;
                        case 'high':
                            if (price <= 200) show = false;
                            break;
                    }
                }
                
                item.style.display = show ? 'block' : 'none';
            });
        }
        
        // ÊòæÁ§∫ÂÖëÊç¢Á°ÆËÆ§Ê®°ÊÄÅÊ°Ü
        function showExchangeConfirmModal(itemId) {
            const item = pointsData.shop.items.find(i => i.id == itemId);
            if (!item) return;
            
            const modal = document.getElementById('exchangeConfirmModal');
            if (!modal) {
                // Â¶ÇÊûúÊ≤°ÊúâÊ®°ÊÄÅÊ°ÜÔºåÂàõÂª∫‰∏Ä‰∏™ÁÆÄÂçïÁöÑÁ°ÆËÆ§
                if (confirm(`Á°ÆÂÆöË¶ÅÂÖëÊç¢„Äå${item.icon} ${item.name}„ÄçÂêóÔºü\n\nÈúÄË¶ÅÊ∂àËÄó ${item.price} ${pointsData.settings.currency}`)) {
                    confirmExchange(itemId);
                }
                return;
            }
            
            document.getElementById('confirmItemName').textContent = item.name;
            document.getElementById('confirmItemPrice').textContent = item.price;
            document.getElementById('confirmItemIcon').textContent = item.icon;
            
            modal.style.display = 'block';
            
            // ËÆæÁΩÆÁ°ÆËÆ§ÂíåÂèñÊ∂àÊåâÈíÆ‰∫ã‰ª∂
            const confirmBtn = document.getElementById('confirmExchangeBtn');
            const cancelBtn = document.getElementById('cancelExchangeBtn');
            
            if (confirmBtn) {
                confirmBtn.onclick = () => confirmExchange(itemId);
            }
            
            if (cancelBtn) {
                cancelBtn.onclick = () => modal.style.display = 'none';
            }
        }
        
        // Á°ÆËÆ§ÂÖëÊç¢
        function confirmExchange(itemId) {
            const item = pointsData.shop.items.find(i => i.id == itemId);
            if (!item) return;
            
            const currentPoints = pointsData.currentPoints;
            
            if (currentPoints < item.price) {
                showToast('ÁßØÂàÜ‰∏çË∂≥ÔºåÊó†Ê≥ïÂÖëÊç¢Ê≠§Áâ©ÂìÅÔºÅ', 'error');
                return;
            }
            
            // Êâ£Èô§ÁßØÂàÜ
            pointsData.currentPoints = currentPoints - item.price;
            pointsData.totalSpent += item.price;
            
            // ËÆ∞ÂΩïÂÖëÊç¢ÂéÜÂè≤
            const exchangeRecord = {
                id: Date.now(),
                itemId: item.id,
                itemName: item.name,
                itemIcon: item.icon,
                price: item.price,
                timestamp: new Date().toISOString(),
                pointsBefore: currentPoints,
                pointsAfter: pointsData.currentPoints
            };
            
            if (!pointsData.shop.exchangeHistory) {
                pointsData.shop.exchangeHistory = [];
            }
            
            pointsData.shop.exchangeHistory.unshift(exchangeRecord);
            
            // ÈôêÂà∂ÂéÜÂè≤ËÆ∞ÂΩïÊï∞ÈáèÔºà‰øùÁïôÊúÄËøë100Êù°Ôºâ
            if (pointsData.shop.exchangeHistory.length > 100) {
                pointsData.shop.exchangeHistory = pointsData.shop.exchangeHistory.slice(0, 100);
            }
            
            // Êõ¥Êñ∞ÁªüËÆ°Êï∞ÊçÆ
            pointsData.shop.totalExchanged = (pointsData.shop.totalExchanged || 0) + item.price;
            pointsData.shop.totalExchanges = (pointsData.shop.totalExchanges || 0) + 1;
            
            // ‰øùÂ≠òÊï∞ÊçÆ
            saveData();
            
            // Êõ¥Êñ∞ÁïåÈù¢
            updateDisplay();
            updateShopStats();
            renderExchangeHistory();
            
            // ÂÖ≥Èó≠Ê®°ÊÄÅÊ°Ü
            const modal = document.getElementById('exchangeConfirmModal');
            if (modal) {
                modal.style.display = 'none';
            }
            
            showToast(`‚úÖ ÊàêÂäüÂÖëÊç¢Ôºö${item.icon} ${item.name}ÔºÅ`);
        }
        
        // Ê∏≤ÊüìÂÖëÊç¢ÂéÜÂè≤
        function renderExchangeHistory() {
            const historyList = document.getElementById('exchangeHistoryList');
            if (!historyList) return;
            
            historyList.innerHTML = '';
            
            if (!pointsData.shop.exchangeHistory || pointsData.shop.exchangeHistory.length === 0) {
                historyList.innerHTML = '<div class="empty-history">ËøòÊ≤°ÊúâÂÖëÊç¢ËÆ∞ÂΩïÔºåÂø´Êù•ÂÖëÊç¢ÂøÉ‰ª™ÁöÑÁâ©ÂìÅÂêßÔºÅ</div>';
                return;
            }
            
            pointsData.shop.exchangeHistory.forEach(record => {
                const historyItem = document.createElement('div');
                historyItem.className = 'exchange-history-item';
                
                const date = new Date(record.timestamp).toLocaleString('zh-CN');
                
                historyItem.innerHTML = `
                    <div class="exchange-info">
                        <div class="exchange-name">${record.itemIcon} ${record.itemName}</div>
                        <div class="exchange-time">${date}</div>
                    </div>
                    <div class="exchange-cost">-${record.price} ${pointsData.settings.currency}</div>
                `;
                
                historyList.appendChild(historyItem);
            });
        }
        
        // Âà†Èô§ÂÖëÊç¢ËÆ∞ÂΩï
        function deleteExchangeRecord(recordId) {
            if (!confirm('Á°ÆÂÆöË¶ÅÂà†Èô§ËøôÊù°ÂÖëÊç¢ËÆ∞ÂΩïÂêóÔºü')) {
                return;
            }
            
            const recordIndex = pointsData.shop.exchangeHistory.findIndex(r => r.id == recordId);
            if (recordIndex > -1) {
                pointsData.shop.exchangeHistory.splice(recordIndex, 1);
                saveData();
                renderExchangeHistory();
                showToast('ÂÖëÊç¢ËÆ∞ÂΩïÂ∑≤Âà†Èô§');
            }
        }
        
        // Êõ¥Êñ∞ÂïÜÂ∫óÁªüËÆ°
        function updateShopStats() {
            const shopCurrentPoints = document.getElementById('shopCurrentPoints');
            const shopTotalExchanged = document.getElementById('shopTotalExchanged');
            
            if (shopCurrentPoints) {
                shopCurrentPoints.textContent = pointsData.currentPoints;
            }
            
            if (shopTotalExchanged) {
                shopTotalExchanged.textContent = pointsData.shop.totalExchanged || 0;
            }
        }
        
        console.log('ÁªàÊûÅÁßØÂàÜÁ≥ªÁªüËÑöÊú¨ÊâßË°åÂÆåÊàê');
    </script>
</body>
</html>